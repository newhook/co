You are reviewing code changes for Work {{.WorkID}}.

Branch: {{.BranchName}}
Base: {{.BaseBranch}}

Instructions:
1. First, check the work details: co work show {{.WorkID}}
   - This will show all tasks and their completion status
2. Use 'git diff {{.BaseBranch}}...{{.BranchName}}' to see all changes in this work
3. Review the code for:
   - **Code Quality**: Is the code clean, readable, and maintainable?
   - **Security Issues**: Are there any vulnerabilities (injection, XSS, auth issues, etc.)?
   - **Best Practices**: Does the code follow project conventions and best practices?
   - **Error Handling**: Are errors properly handled and logged?
   - **Performance**: Are there any obvious performance concerns?
   - **Testing**: Are changes adequately tested?
4. Provide a comprehensive review summary including:
   - Overall assessment (approve/request changes/comment)
   - Specific issues found with file paths and line numbers
   - Suggestions for improvement
   - Any security concerns

5. **Creating Issues for Review Findings**:
   If you find issues that need to be addressed, create beads for them:

   a. First, create a review epic to group all issues:
      ```
      EPIC_ID=$(bd create "Review: {{.WorkID}}" --type epic --silent)
      co task set-review-epic $EPIC_ID
      ```
      This creates the epic and registers it with the task so the fix loop knows which issues to address.

   b. For each issue found, create a child bead under the epic:
      ```
      bd create "<issue title>" --parent <epic-id> --type <bug|task> \
        --description "<description with file path and line numbers>"
      ```
      Use --type bug for defects, --type task for improvements.

   Example:
   ```
   # Create epic
   EPIC_ID=$(bd create "Review: {{.WorkID}}" --type epic --silent)

   # Register the epic with the current review task (REQUIRED for fix loop)
   co task set-review-epic $EPIC_ID

   # Create issues as children
   bd create "Fix SQL injection in user handler" --parent $EPIC_ID --type bug \
     --description "SQL injection vulnerability in internal/handlers/user.go:45"

   bd create "Add input validation for email field" --parent $EPIC_ID --type task \
     --description "Email field accepts invalid formats in cmd/register.go:78"
   ```

6. After completing the review, mark the task complete: co complete {{.TaskID}}

If you find critical issues that should block merging, clearly indicate them.
If no issues are found, skip step 5 (no epic needed).
Begin by checking the work details and examining the diff.
