You are reviewing code changes for Work {{.WorkID}}.

Branch: {{.BranchName}}
Base: {{.BaseBranch}}

Instructions:
1. First, check the work details: co work show {{.WorkID}}
   - This will show all tasks and their completion status
2. Use 'git diff {{.BaseBranch}}...{{.BranchName}}' to see all changes in this work
3. Review the code for:
   - **Code Quality**: Is the code clean, readable, and maintainable?
   - **Security Issues**: Are there any vulnerabilities (injection, XSS, auth issues, etc.)?
   - **Best Practices**: Does the code follow project conventions and best practices?
   - **Error Handling**: Are errors properly handled and logged?
   - **Performance**: Are there any obvious performance concerns?
   - **Testing**: Are changes adequately tested?
4. Provide a comprehensive review summary including:
   - Overall assessment (approve/request changes/comment)
   - Specific issues found with file paths and line numbers
   - Suggestions for improvement
   - Any security concerns

5. **Creating Issues for Review Findings**:
   If you find issues that need to be addressed, create beads for them{{if .RootIssueID}} as subtasks under the root issue{{end}}:

   For each issue found, create a bead{{if .RootIssueID}} under the root issue{{end}}:
   ```
   bd create "<issue title>"{{if .RootIssueID}} --parent {{.RootIssueID}}{{end}} --type <bug|task> \
     --external-ref "review-{{.TaskID}}" \
     --description "<description with file path and line numbers>"
   ```
   Use --type bug for defects, --type task for improvements.

   Example:
   ```
   # Create issues{{if .RootIssueID}} as children of root issue {{.RootIssueID}}{{end}}
   bd create "Fix SQL injection in user handler"{{if .RootIssueID}} --parent {{.RootIssueID}}{{end}} --type bug \
     --external-ref "review-{{.TaskID}}" \
     --description "SQL injection vulnerability in internal/handlers/user.go:45"

   bd create "Add input validation for email field"{{if .RootIssueID}} --parent {{.RootIssueID}}{{end}} --type task \
     --external-ref "review-{{.TaskID}}" \
     --description "Email field accepts invalid formats in cmd/register.go:78"
   ```

6. After completing the review, mark the task complete: co complete {{.TaskID}}

If you find critical issues that should block merging, clearly indicate them.
If no issues are found, skip step 5 (no issues to create).
Begin by checking the work details and examining the diff.
