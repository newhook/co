{"id":"ac-1bf","title":"Use Claude Code for complexity estimation instead of direct API","description":"Replace direct Anthropic API calls in `co plan --auto-group` with Claude Code invocation using the same task mechanism as implementation tasks.\n\n## Approach\n\nUse the existing task infrastructure with a new \"estimate\" task type:\n1. Add `task_type` column to tasks table (\"implement\" vs \"estimate\")\n2. Create an estimate task with all beads needing complexity estimation\n3. Run the task using existing `Run()` mechanism (different prompt)\n4. Claude runs `co estimate \u003cid\u003e --score X --tokens Y` for each bead\n5. Completion detected by checking complexity_cache has all beads\n\n## Key Design Decisions\n\n1. **Reuse task infrastructure** - Estimate tasks use same DB tables, same `Run()` function\n2. **Task type column** - Distinguishes implement vs estimate tasks\n3. **`co estimate` command** - Claude reports estimates, auto-completes task when all done\n4. **Single estimate task** - All uncached beads estimated in one Claude session\n\n## Verification\n\n1. Build: `go build -o co .`\n2. Test: `go test ./...`\n3. Create a project with some beads\n4. Run `co plan --auto-group`\n5. Verify estimate task created, Claude estimates beads, planning proceeds","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-10T14:01:23.26411-05:00","created_by":"matthew","updated_at":"2026-01-10T14:01:23.26411-05:00"}
{"id":"ac-2u6","title":"Add CacheComplexity database helper","description":"Add `CacheComplexity()` method to DB type for storing complexity estimates.\n\n**File to modify:** `internal/db/db.go` (or new `internal/db/complexity.go`)\n\n**Function signature:**\n```go\nfunc (db *DB) CacheComplexity(beadID, descHash string, score, tokens int) error\n```\n\n**SQL:**\n```sql\nINSERT INTO complexity_cache (bead_id, description_hash, complexity_score, estimated_tokens)\nVALUES (?, ?, ?, ?)\nON CONFLICT(bead_id) DO UPDATE SET ...\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:58.699672-05:00","created_by":"matthew","updated_at":"2026-01-10T14:17:34.781249-05:00","closed_at":"2026-01-10T14:17:34.781249-05:00","close_reason":"Added CacheComplexity and related database helpers","dependencies":[{"issue_id":"ac-2u6","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.442818-05:00","created_by":"matthew"}]}
{"id":"ac-2vr","title":"Add bead ID positional argument to run command","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.008418-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.553736-05:00","closed_at":"2026-01-09T20:52:28.553736-05:00","close_reason":"Added positional argument for bead ID: ac run \u003cbead-id\u003e now works as alternative to --bead flag","dependencies":[{"issue_id":"ac-2vr","depends_on_id":"ac-r51","type":"blocks","created_at":"2026-01-09T20:45:17.691025-05:00","created_by":"matthew"}]}
{"id":"ac-345","title":"Create internal/task/task.go with Task struct and Planner interface","description":"Define Task struct with ID, BeadIDs, Beads, Complexity, Status fields. Define Planner interface with Plan(beads []BeadWithDeps, budget int) ([]Task, error) method.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.551676-05:00","created_by":"matthew","updated_at":"2026-01-10T11:55:28.881087-05:00","closed_at":"2026-01-10T11:55:28.881087-05:00","close_reason":"Created Task struct and Planner interface","dependencies":[{"issue_id":"ac-345","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.667951-05:00","created_by":"matthew"}]}
{"id":"ac-3ei","title":"Update complexity.go to use estimate tasks","description":"Replace direct Anthropic API calls with estimate task mechanism.\n\n**File to modify:** `internal/task/complexity.go`\n\n**Changes:**\n1. Remove `anthropic` SDK import\n2. Add `claude` package import\n3. Change `LLMEstimator` struct: remove `client`, add `workDir` and `projectName`\n4. Update `NewLLMEstimator(database *db.DB, workDir, projectName string)`\n5. Add `EstimateBatch(ctx, beadList []beads.Bead) error` method that:\n   - Filters uncached beads\n   - Creates estimate task with `CreateTask(taskID, \"estimate\", beadIDs, 0)`\n   - Builds prompt with `BuildEstimatePrompt()`\n   - Calls `claude.Run()` to execute\n6. Export `HashDescription()` for use by cmd/estimate.go\n7. Keep existing caching logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:00.762235-05:00","created_by":"matthew","updated_at":"2026-01-10T14:29:08.173017-05:00","closed_at":"2026-01-10T14:29:08.173017-05:00","close_reason":"Updated complexity estimation to use estimate tasks","dependencies":[{"issue_id":"ac-3ei","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.789404-05:00","created_by":"matthew"},{"issue_id":"ac-3ei","depends_on_id":"ac-2u6","type":"blocks","created_at":"2026-01-10T14:02:28.903848-05:00","created_by":"matthew"},{"issue_id":"ac-3ei","depends_on_id":"ac-dzb","type":"blocks","created_at":"2026-01-10T14:02:29.020387-05:00","created_by":"matthew"}]}
{"id":"ac-3wt","title":"Create internal/task/planner.go with bin-packing algorithm","description":"Implement Planner that: 1) Builds dependency graph from BeadWithDeps, 2) Identifies beads that can be grouped (no cross-dependencies), 3) Uses first-fit decreasing bin-packing to assign beads to tasks targeting 50-70% context budget, 4) Respects dependency constraints.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:15.071257-05:00","created_by":"matthew","updated_at":"2026-01-10T12:02:06.718125-05:00","closed_at":"2026-01-10T12:02:06.718125-05:00","close_reason":"Created planner with bin-packing algorithm","dependencies":[{"issue_id":"ac-3wt","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.874239-05:00","created_by":"matthew"},{"issue_id":"ac-3wt","depends_on_id":"ac-345","type":"blocks","created_at":"2026-01-10T11:35:21.029918-05:00","created_by":"matthew"},{"issue_id":"ac-3wt","depends_on_id":"ac-rky","type":"blocks","created_at":"2026-01-10T11:35:21.25285-05:00","created_by":"matthew"}]}
{"id":"ac-4g9","title":"Update cmd/run.go for DB integration","description":"Update cmd/run.go:\n- In runBeads(): Add db.Open() at start, defer db.Close()\n- Before processBead(): call db.StartBead(bead.ID, bead.Title, sessionName, paneName)\n- Pass session/pane info to claude.Run() or have it return them\n- On error: call db.FailBead(bead.ID, err.Error())\n- In buildPrompt(): Change instruction to use 'co complete \u003cid\u003e --pr \u003cPR_URL\u003e' instead of file creation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.329221-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:09.319481-05:00","closed_at":"2026-01-10T09:47:09.319481-05:00","close_reason":"Updated cmd/run.go with DB integration (Open, StartBead, FailBead), updated runner.go to poll DB for completion","dependencies":[{"issue_id":"ac-4g9","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.726713-05:00","created_by":"matthew"},{"issue_id":"ac-4g9","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:23.489695-05:00","created_by":"matthew"}]}
{"id":"ac-5n9","title":"Implement Claude Code invocation","description":"Create internal/claude/runner.go:\n- Run(ctx, prompt, workDir) error\n- Executes: claude --dangerously-skip-permissions -p \"\u003cprompt\u003e\"\n- Streams stdout/stderr to terminal\n- Returns error on non-zero exit\n\nAcceptance criteria:\n- Claude is invoked with correct flags\n- Output is visible during execution\n- Errors are properly propagated","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.54837-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:51.902096-05:00","closed_at":"2026-01-09T20:36:51.902096-05:00","close_reason":"Implemented Run(ctx, prompt, workDir) that invokes claude --dangerously-skip-permissions -p with streaming output to stdout/stderr.","dependencies":[{"issue_id":"ac-5n9","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.589403-05:00","created_by":"matthew"}]}
{"id":"ac-6n7","title":"Add go-sqlite3 dependency to go.mod","description":"Add github.com/ncruces/go-sqlite3 dependency to go.mod using: go get github.com/ncruces/go-sqlite3","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:55.793334-05:00","created_by":"matthew","updated_at":"2026-01-10T09:42:37.185342-05:00","closed_at":"2026-01-10T09:42:37.185342-05:00","close_reason":"Dependency will be properly added when db.go imports it - standard Go workflow","dependencies":[{"issue_id":"ac-6n7","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.71691-05:00","created_by":"matthew"}]}
{"id":"ac-6zo","title":"Create cmd/complete.go subcommand","description":"Create cmd/complete.go implementing:\n- co complete \u003cbead-id\u003e [--pr \u003curl\u003e]\n- Called by Claude Code when task is done\n- Updates SQLite status to completed\n- Optionally records PR URL","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.455048-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.518884-05:00","closed_at":"2026-01-10T09:45:02.518884-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-6zo","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.721222-05:00","created_by":"matthew"},{"issue_id":"ac-6zo","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.454068-05:00","created_by":"matthew"}]}
{"id":"ac-7tz","title":"Modify internal/claude/claude.go for task-based execution","description":"Update RunInProject() to take task ID and list of beads instead of single bead. Change pane naming to task-\u003ctask-id\u003e. Update database polling to check task completion (all beads done). Build multi-bead prompt with instructions for completing each bead individually.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:34.186954-05:00","created_by":"matthew","updated_at":"2026-01-10T11:53:20.530204-05:00","closed_at":"2026-01-10T11:53:20.530204-05:00","close_reason":"Added task-based execution support to Claude runner","dependencies":[{"issue_id":"ac-7tz","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.213359-05:00","created_by":"matthew"},{"issue_id":"ac-7tz","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.307864-05:00","created_by":"matthew"}]}
{"id":"ac-9hx","title":"Implement main run command orchestration loop","description":"Update cmd/run.go to orchestrate the full workflow:\n1. Get ready beads (with --limit and --bead filters)\n2. For each bead:\n   a. Create branch: bead/\u003cbead-id\u003e\n   b. Run Claude with bead prompt\n   c. If changes: commit, push, create PR, merge PR\n   d. Close bead with reason\n   e. Cleanup branch\n3. Stop on first error\n\nFlags:\n- --branch, -b: target branch (default: main)\n- --bead: specific bead ID only\n- --limit, -n: max beads to process\n- --dry-run: show plan without executing\n- --no-merge: create PRs but don't merge\n\nAcceptance criteria:\n- Full workflow executes for a single bead\n- --dry-run shows plan without side effects\n- Stops immediately on error","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:19:01.843065-05:00","created_by":"matthew","updated_at":"2026-01-09T20:48:31.190588-05:00","closed_at":"2026-01-09T20:48:31.190588-05:00","close_reason":"Implemented full orchestration loop in cmd/run.go with --branch, --bead, --limit, --dry-run, and --no-merge flags. Workflow: create branch, run Claude, check commits, push, close bead, create PR, merge.","dependencies":[{"issue_id":"ac-9hx","depends_on_id":"ac-f6p","type":"blocks","created_at":"2026-01-09T20:19:49.398102-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-tia","type":"blocks","created_at":"2026-01-09T20:20:19.978523-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-5n9","type":"blocks","created_at":"2026-01-09T20:20:20.067903-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-b1v","type":"blocks","created_at":"2026-01-09T20:20:20.147985-05:00","created_by":"matthew"}]}
{"id":"ac-ais","title":"Modify cmd/run.go to use task planner instead of per-bead processing","description":"Add --budget flag (default 70%). Change flow: 1) Fetch beads, 2) Plan tasks via task.Planner, 3) Process each task with processTaskWithWorktree(). Replace processBeadWithWorktree with task-based equivalent. Update dry-run output to show task assignments.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:33.867164-05:00","created_by":"matthew","updated_at":"2026-01-10T12:05:59.030148-05:00","closed_at":"2026-01-10T12:05:59.030148-05:00","close_reason":"Added task-based processing mode with --task and --budget flags","dependencies":[{"issue_id":"ac-ais","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.095451-05:00","created_by":"matthew"},{"issue_id":"ac-ais","depends_on_id":"ac-3wt","type":"blocks","created_at":"2026-01-10T11:35:31.956249-05:00","created_by":"matthew"},{"issue_id":"ac-ais","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.059944-05:00","created_by":"matthew"}]}
{"id":"ac-aof","title":"SQLite tracking and completion subcommands","description":"Replace temp file completion tracking with SQLite database and add CLI subcommands (complete, status, list) that Claude Code can use to mark tasks complete.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T09:34:29.520812-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:18.303813-05:00","closed_at":"2026-01-10T09:47:18.303813-05:00","close_reason":"All child tasks completed: SQLite tracking database (internal/db/), CLI subcommands (complete, status, list), run.go and runner.go DB integration","comments":[{"id":1,"issue_id":"ac-aof","author":"matthew","text":"Feature branch: epic/ac-aof - all child issues should branch from and merge to this branch","created_at":"2026-01-10T14:40:33Z"}]}
{"id":"ac-b1v","title":"Implement PR creation and merging via gh CLI","description":"Create internal/github/pr.go:\n- CreatePR(branch, base, title, body string) (prURL, error)\n- MergePR(prURL string) error\n- Uses gh pr create and gh pr merge commands\n\nAcceptance criteria:\n- PRs are created with correct title/body\n- PRs are merged successfully\n- Errors from gh are properly handled","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.867752-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:52.062255-05:00","closed_at":"2026-01-09T20:36:52.062255-05:00","close_reason":"Implemented CreatePR(branch, base, title, body) and MergePR(prURL) using gh CLI. MergePR uses --merge --delete-branch for cleanup.","dependencies":[{"issue_id":"ac-b1v","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.667497-05:00","created_by":"matthew"}]}
{"id":"ac-ckx","title":"Add GetBeadWithDeps function to beads client","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.437718-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.722176-05:00","closed_at":"2026-01-09T20:52:28.722176-05:00","close_reason":"Added GetBeadWithDeps(id) function that returns BeadWithDeps struct including Dependencies slice","dependencies":[{"issue_id":"ac-ckx","depends_on_id":"ac-r51","type":"blocks","created_at":"2026-01-09T20:45:18.014568-05:00","created_by":"matthew"}]}
{"id":"ac-cnm","title":"Add --deps flag to process dependencies","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.161987-05:00","created_by":"matthew","updated_at":"2026-01-09T21:00:31.395729-05:00","closed_at":"2026-01-09T21:00:31.395729-05:00","close_reason":"Implemented --deps flag that recursively processes open dependencies before the target bead. PR #8 merged.","dependencies":[{"issue_id":"ac-cnm","depends_on_id":"ac-ckx","type":"blocks","created_at":"2026-01-09T20:45:17.849864-05:00","created_by":"matthew"}]}
{"id":"ac-ctt","title":"Update cmd/root.go to register new commands","description":"Update cmd/root.go init() to register:\n- completeCmd\n- statusCmd  \n- listCmd","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.117222-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:22.962581-05:00","closed_at":"2026-01-10T09:45:22.962581-05:00","close_reason":"Updated cmd/root.go to register completeCmd, statusCmd, listCmd","dependencies":[{"issue_id":"ac-ctt","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.725475-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-6zo","type":"blocks","created_at":"2026-01-10T09:35:23.06505-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-p9b","type":"blocks","created_at":"2026-01-10T09:35:23.185819-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-zqp","type":"blocks","created_at":"2026-01-10T09:35:23.290447-05:00","created_by":"matthew"}]}
{"id":"ac-d5o","title":"Add task_type column to database schema","description":"Add `task_type` column to tasks table to distinguish \"implement\" vs \"estimate\" tasks.\n\n**Files to modify:**\n- `internal/db/db.go` - Add migration function `migrateTaskType()`\n- `internal/db/task.go` - Add `TaskType` field to Task struct, update `CreateTask()` signature\n\n**Schema change:**\n```sql\nALTER TABLE tasks ADD COLUMN task_type TEXT NOT NULL DEFAULT 'implement'\n```\n\n**Code changes:**\n- Add `TaskType string` field to `Task` struct\n- Update `CreateTask(id string, taskType string, beadIDs []string, complexityBudget int)`\n- Update all `CreateTask` call sites to pass \"implement\" as task type","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:56.920021-05:00","created_by":"matthew","updated_at":"2026-01-10T14:14:12.494853-05:00","closed_at":"2026-01-10T14:14:12.494853-05:00","close_reason":"Implemented task_type column and migration"}
{"id":"ac-dzb","title":"Add BuildEstimatePrompt to runner","description":"Add estimate prompt builder to Claude runner.\n\n**File to modify:** `internal/claude/runner.go`\n\n**Function signature:**\n```go\nfunc BuildEstimatePrompt(taskID string, taskBeads []beads.Bead) string\n```\n\n**Prompt template:**\n- List all beads with ID, title, description\n- Instruct Claude to run `co estimate \u003cid\u003e --score X --tokens Y` for each\n- Include scoring guide (1=trivial, 5=medium, 10=major refactor)\n- Include token estimation guide (5000-50000)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:59.682405-05:00","created_by":"matthew","updated_at":"2026-01-10T14:15:48.477549-05:00","closed_at":"2026-01-10T14:15:48.477549-05:00","close_reason":"Added BuildEstimatePrompt function to runner"}
{"id":"ac-ec4","title":"Create internal/db/bead.go for tracking operations","description":"Create internal/db/bead.go with:\n- TrackedBead struct (including ZellijSession, ZellijPane fields)\n- StartBead(id, title, zellijSession, zellijPane) - mark as processing with session info\n- CompleteBead(id, prURL) - mark as completed\n- FailBead(id, errMsg) - mark as failed\n- GetBead(id) - get tracking record (includes session/pane info)\n- IsCompleted(id) - check if completed/failed\n- ListBeads(statusFilter) - list all beads\n- GetBeadSession(id) - get zellij session/pane for a bead","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.23703-05:00","created_by":"matthew","updated_at":"2026-01-10T09:44:04.319552-05:00","closed_at":"2026-01-10T09:44:04.319552-05:00","close_reason":"Created internal/db/bead.go with TrackedBead struct, StartBead, CompleteBead, FailBead, GetBead, IsCompleted, ListBeads, GetBeadSession functions","dependencies":[{"issue_id":"ac-ec4","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.719938-05:00","created_by":"matthew"},{"issue_id":"ac-ec4","depends_on_id":"ac-nz0","type":"blocks","created_at":"2026-01-10T09:35:22.26614-05:00","created_by":"matthew"}]}
{"id":"ac-ewl","title":"Remove Anthropic SDK dependency","description":"Clean up Anthropic SDK dependency after migration.\n\n**Changes:**\n1. Remove `github.com/anthropics/anthropic-sdk-go` import from `internal/task/complexity.go`\n2. Run `go mod tidy` to remove from go.mod/go.sum\n3. Verify build succeeds without SDK","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:02.930692-05:00","created_by":"matthew","updated_at":"2026-01-10T14:02:02.930692-05:00","dependencies":[{"issue_id":"ac-ewl","depends_on_id":"ac-3ei","type":"blocks","created_at":"2026-01-10T14:02:29.242445-05:00","created_by":"matthew"}]}
{"id":"ac-f6p","title":"Implement beads client to query ready work","description":"Create internal/beads/client.go:\n- GetReadyBeads() - runs `bd ready --json`, parses output\n- CloseBead(id, reason) - runs `bd close \u003cid\u003e --reason \"\u003creason\u003e\"`\n- Bead struct with ID, Title, Description fields\n\nAcceptance criteria:\n- GetReadyBeads returns parsed beads from bd ready\n- CloseBead successfully closes a bead","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:44.955092-05:00","created_by":"matthew","updated_at":"2026-01-09T20:33:01.642893-05:00","closed_at":"2026-01-09T20:33:01.642893-05:00","close_reason":"Implemented beads client with GetReadyBeads() and CloseBead() functions. PR #1 merged.","dependencies":[{"issue_id":"ac-f6p","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:19:46.368644-05:00","created_by":"matthew"}]}
{"id":"ac-f7o","title":"Update co complete command to support task lookup from bead ID","description":"Modify cmd/complete.go: look up task_id from task_beads table using bead_id, mark bead as complete in task_beads, check if all beads in task are complete, if so mark task as complete. Keep existing bead-only completion as fallback for backwards compatibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:34.401719-05:00","created_by":"matthew","updated_at":"2026-01-10T11:50:06.427885-05:00","closed_at":"2026-01-10T11:50:06.427885-05:00","close_reason":"Updated co complete command to support task lookup","dependencies":[{"issue_id":"ac-f7o","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.331247-05:00","created_by":"matthew"},{"issue_id":"ac-f7o","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.534277-05:00","created_by":"matthew"}]}
{"id":"ac-fru","title":"Add tasks, task_beads, and complexity_cache tables to database schema","description":"Add new SQLite tables to internal/db/: tasks (id, status, complexity_budget, actual_complexity, zellij_session, zellij_pane, worktree_path, pr_url, error_message, timestamps), task_beads (task_id, bead_id, status), complexity_cache (bead_id, description_hash, complexity_score, estimated_tokens, created_at)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.332219-05:00","created_by":"matthew","updated_at":"2026-01-10T11:42:10.14169-05:00","closed_at":"2026-01-10T11:42:10.14169-05:00","close_reason":"Added tasks, task_beads, and complexity_cache tables to database schema","dependencies":[{"issue_id":"ac-fru","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.560886-05:00","created_by":"matthew"}]}
{"id":"ac-gs6","title":"Add feature branch workflow with final PR","description":"Extend cmd/run.go:\n- When --branch is specified, all PRs target that branch\n- After all beads complete, create final PR: branch → main\n- Skip final PR if no beads were processed\n\nAcceptance criteria:\n- PRs target feature branch when --branch specified\n- Final PR is created after all beads complete\n- Works correctly when some beads have no changes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:19:02.166276-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.892894-05:00","closed_at":"2026-01-09T20:52:28.892894-05:00","close_reason":"Implemented feature branch workflow: when --branch != main, PRs target feature branch and final PR merges to main after all beads complete","dependencies":[{"issue_id":"ac-gs6","depends_on_id":"ac-9hx","type":"blocks","created_at":"2026-01-09T20:19:49.718878-05:00","created_by":"matthew"}]}
{"id":"ac-ieo","title":"Initialize Go project with cobra CLI","description":"Create the ac (auto claude) Go project:\n- go mod init github.com/newhook/autoclaude\n- Install cobra: go get github.com/spf13/cobra@latest\n- Create main.go with root command\n- Create cmd/run.go with placeholder run command\n\nAcceptance criteria:\n- `go build` succeeds\n- `./ac --help` shows usage\n- `./ac run --help` shows run command flags","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:30.087397-05:00","created_by":"matthew","updated_at":"2026-01-09T20:26:43.02485-05:00","closed_at":"2026-01-09T20:26:43.02485-05:00","close_reason":"Initialized Go project with cobra CLI. Created main.go, cmd/root.go, and cmd/run.go. Build succeeds and help commands work correctly."}
{"id":"ac-la1","title":"Project-based orchestrator with worktree isolation","description":"# Plan: Project-based Orchestrator with Worktree Isolation\n\n## Overview\n\nRestructure `co` to use a project-based model where:\n- Each project lives in its own directory with `.co/` for state\n- The target repo is symlinked (local) or cloned (GitHub) into `main/`\n- Each task gets an isolated git worktree\n- Zellij sessions are named per project/task for future parallelism\n- Beads issue tracking lives in the `main/` repo\n\n## Directory Structure\n\n```\n\u003cproject-dir\u003e/\n├── .co/\n│   ├── config.toml      # Project configuration\n│   └── tracking.db      # SQLite coordination database\n├── main/                # Symlink to local repo OR clone from GitHub\n│   └── .beads/          # Beads issue tracker (in repo)\n├── bead-123/            # Worktree for task bead-123\n├── bead-456/            # Worktree for task bead-456\n└── ...\n```\n\n## New Commands\n\n### `co proj create \u003cdir\u003e \u003crepo\u003e`\n\nCreates a new orchestrator project.\n\n**Arguments:**\n- `\u003cdir\u003e` - Path to create project directory\n- `\u003crepo\u003e` - Either local path (symlinked) or GitHub URL (cloned)\n\n**Behavior:**\n1. Create `\u003cdir\u003e/` and `\u003cdir\u003e/.co/`\n2. Detect if `\u003crepo\u003e` is local path or GitHub URL\n3. If local: `ln -s \u003crepo\u003e \u003cdir\u003e/main`\n4. If GitHub: `git clone \u003crepo\u003e \u003cdir\u003e/main`\n5. Write `\u003cdir\u003e/.co/config.toml` with:\n   ```toml\n   [project]\n   name = \"\u003cdir-basename\u003e\"\n   created_at = \"2024-...\"\n\n   [repo]\n   type = \"local\" | \"github\"\n   source = \"\u003coriginal-path-or-url\u003e\"\n   path = \"main\"\n   ```\n6. Initialize `\u003cdir\u003e/.co/tracking.db`\n\n### `co proj destroy [--force]`\n\nTears down the current project.\n\n**Behavior:**\n1. Find project root (walk up looking for `.co/`)\n2. List all worktrees and prompt for confirmation (unless `--force`)\n3. Remove all worktrees via `git worktree remove`\n4. Delete project directory\n\n### `co proj status`\n\nShows project status including active worktrees and task states.\n\n## Project Context Detection\n\n`co` commands find the project by walking up from cwd looking for `.co/`:\n- `/Users/matthew/proj/bead-xyz/foo/bar` → finds `/Users/matthew/proj/.co/`\n- Override with `--project=\u003cpath\u003e` flag on any command\n\n## Modified Workflow\n\n### `co run` Changes\n\n1. **Find project context** (cwd walk or `--project` flag)\n2. **Load config** from `.co/config.toml`\n3. **Query beads** from `main/` directory (where `.beads/` lives)\n4. **For each task:**\n   - Create worktree: `git -C main/ worktree add ../\u003ctask-id\u003e -b bead/\u003ctask-id\u003e`\n   - Launch Claude in Zellij session `co-\u003cproject-name\u003e`, pane named `\u003ctask-id\u003e`\n   - Claude works in `\u003cproject-dir\u003e/\u003ctask-id\u003e/`\n   - On success: `git worktree remove \u003ctask-id\u003e`\n   - On failure: Keep worktree for debugging\n\n### Zellij Session \u0026 Pane Model\n\n**Session**: One per project, named `co-\u003cproject-name\u003e`\n**Panes**: One per task, named after the task ID\n\nExample:\n- Session: `co-myapp`\n- Panes: `bead-123`, `bead-456`, etc.\n\nThis enables:\n- Multiple projects running simultaneously (separate sessions)\n- Future parallel task execution within a project (multiple panes)\n- Easy identification: `zellij -s co-myapp` shows all tasks for that project\n\n### Worktree Cleanup\n\n- **On success**: Remove worktree immediately\n- **On failure**: Keep worktree for debugging (user can inspect/fix)\n\n## Implementation Steps\n\n### 1. Add new `internal/project/` package\n\n```go\n// internal/project/project.go\ntype Project struct {\n    Root   string      // Project directory path\n    Config *Config     // Parsed config.toml\n    DB     *db.DB      // Tracking database\n}\n\ntype Config struct {\n    Project ProjectConfig\n    Repo    RepoConfig\n}\n\ntype ProjectConfig struct {\n    Name      string\n    CreatedAt time.Time\n}\n\ntype RepoConfig struct {\n    Type   string  // \"local\" or \"github\"\n    Source string  // Original path or URL\n    Path   string  // Always \"main\"\n}\n\nfunc Find(startDir string) (*Project, error)      // Walk up to find .co/\nfunc Create(dir, repoSource string) (*Project, error)\nfunc (p *Project) MainRepoPath() string           // Returns \u003croot\u003e/main\nfunc (p *Project) WorktreePath(taskID string) string\n```\n\n### 2. Add new `internal/worktree/` package\n\n```go\n// internal/worktree/worktree.go\nfunc Create(repoPath, worktreePath, branch string) error\nfunc Remove(repoPath, worktreePath string) error\nfunc List(repoPath string) ([]Worktree, error)\nfunc Exists(repoPath, worktreePath string) bool\n```\n\n### 3. Add `cmd/proj.go` with subcommands\n\n- `co proj create \u003cdir\u003e \u003crepo\u003e`\n- `co proj destroy [--force]`\n- `co proj status`\n\n### 4. Update `cmd/run.go`\n\n- Add `--project` flag\n- Use `project.Find()` to get context\n- Query beads from `project.MainRepoPath()`\n- Create worktrees for each task\n- Clean up worktrees on completion\n\n### 5. Update `internal/claude/runner.go`\n\n- Accept project name parameter\n- Use session name `co-\u003cproject\u003e` (one session per project)\n- Pane name is the task ID\n- Work directory is the worktree path\n\n### 6. Update database schema\n\nAdd project tracking:\n```sql\n-- Beads table gains project context\nALTER TABLE beads ADD COLUMN worktree_path TEXT;\n```\n\n## Files to Modify\n\n| File | Changes |\n|------|---------|\n| `cmd/root.go` | Add `proj` command group, `--project` global flag |\n| `cmd/run.go` | Project context, worktree creation/cleanup |\n| `cmd/complete.go` | Find project from cwd |\n| `cmd/status.go` | Show worktree info |\n| `internal/claude/runner.go` | Project-aware session naming |\n| `internal/beads/client.go` | Accept repo path parameter |\n| `internal/db/db.go` | Path from project, schema update |\n\n## New Files\n\n| File | Purpose |\n|------|---------|\n| `cmd/proj.go` | Project management commands |\n| `internal/project/project.go` | Project discovery and config |\n| `internal/project/config.go` | TOML config parsing |\n| `internal/worktree/worktree.go` | Git worktree operations |\n\n## Verification\n\n1. **Create project from local repo:**\n   ```bash\n   co proj create ~/co-test ~/some-repo\n   ls ~/co-test/  # Should show .co/, main/\n   cat ~/co-test/.co/config.toml\n   ```\n\n2. **Create project from GitHub:**\n   ```bash\n   co proj create ~/co-github https://github.com/user/repo\n   ls ~/co-github/main/.git  # Should be a real clone\n   ```\n\n3. **Run from project dir:**\n   ```bash\n   cd ~/co-test\n   co run --dry-run  # Should find project, list beads from main/\n   ```\n\n4. **Run from subdirectory:**\n   ```bash\n   cd ~/co-test/main/src\n   co run --dry-run  # Should still find project root\n   ```\n\n5. **Worktree lifecycle:**\n   ```bash\n   co run  # Creates worktree, runs Claude, cleans up\n   ls ~/co-test/  # Worktree should be gone after completion\n   ```\n\n6. **Zellij session/pane:**\n   ```bash\n   zellij list-sessions  # Should show co-\u003cproject-name\u003e\n   zellij -s co-\u003cproject-name\u003e action list-panes  # Should show task panes\n   ```\n\n## Future Work (Out of Scope)\n\n- Dependency management between beads for parallel execution\n- Running multiple independent tasks concurrently in same Zellij session\n- `co proj list` to show all known projects\n","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T10:22:37.856945-05:00","created_by":"matthew","updated_at":"2026-01-10T10:45:14.697697-05:00","closed_at":"2026-01-10T10:45:14.697697-05:00","close_reason":"Implemented all child tasks for project-based orchestrator with worktree isolation"}
{"id":"ac-la1.1","title":"Add internal/project/ package","description":"Create the project discovery and configuration package.\n\n## Implementation\n- Create internal/project/project.go with Project struct\n- Create internal/project/config.go for TOML parsing\n- Implement Find(startDir) to walk up looking for .co/\n- Implement Create(dir, repoSource) for project initialization\n- Implement MainRepoPath() and WorktreePath(taskID) helpers\n\n## Config Structure\n```toml\n[project]\nname = \"\u003cdir-basename\u003e\"\ncreated_at = \"2024-...\"\n\n[repo]\ntype = \"local\" | \"github\"\nsource = \"\u003coriginal-path-or-url\u003e\"\npath = \"main\"\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:22:53.312453-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.783237-05:00","closed_at":"2026-01-10T10:44:22.783237-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.1","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:22:53.313396-05:00","created_by":"matthew"}]}
{"id":"ac-la1.2","title":"Add internal/worktree/ package","description":"Create git worktree management package.\n\n## Implementation\n- Create internal/worktree/worktree.go\n- Implement Create(repoPath, worktreePath, branch) \n- Implement Remove(repoPath, worktreePath)\n- Implement List(repoPath) returning []Worktree\n- Implement Exists(repoPath, worktreePath)\n\n## Commands\n- Create: git -C \u003crepo\u003e worktree add \u003cpath\u003e -b \u003cbranch\u003e\n- Remove: git -C \u003crepo\u003e worktree remove \u003cpath\u003e\n- List: git -C \u003crepo\u003e worktree list --porcelain","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:20.778468-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.786589-05:00","closed_at":"2026-01-10T10:44:22.786589-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.2","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:20.779348-05:00","created_by":"matthew"}]}
{"id":"ac-la1.3","title":"Add cmd/proj.go with subcommands","description":"Create project management CLI commands.\n\n## Commands\n- co proj create \u003cdir\u003e \u003crepo\u003e: Creates project directory, .co/, symlinks/clones repo\n- co proj destroy [--force]: Removes worktrees and project directory\n- co proj status: Shows project info, active worktrees, task states\n\n## Behavior\n- proj create: detect local path vs GitHub URL, create structure, init DB\n- proj destroy: find project root, confirm, cleanup worktrees, delete dir\n- proj status: show config, list worktrees, show task states from DB","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:20.997707-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.788875-05:00","closed_at":"2026-01-10T10:44:22.788875-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.3","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:20.998384-05:00","created_by":"matthew"},{"issue_id":"ac-la1.3","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.209763-05:00","created_by":"matthew"}]}
{"id":"ac-la1.4","title":"Update cmd/run.go for project context","description":"Modify run command to use project-based workflow.\n\n## Changes\n- Add --project flag for explicit project path\n- Use project.Find() to get context from cwd or flag\n- Load config from .co/config.toml\n- Query beads from project.MainRepoPath() (where .beads/ lives)\n- Create worktree before each task\n- Clean up worktree on success, keep on failure\n- Pass project name to claude.Run() for Zellij session naming","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:21.227045-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.790902-05:00","closed_at":"2026-01-10T10:44:22.790902-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.4","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.227733-05:00","created_by":"matthew"},{"issue_id":"ac-la1.4","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.339098-05:00","created_by":"matthew"},{"issue_id":"ac-la1.4","depends_on_id":"ac-la1.2","type":"blocks","created_at":"2026-01-10T10:23:34.45809-05:00","created_by":"matthew"}]}
{"id":"ac-la1.5","title":"Update internal/claude/runner.go for project sessions","description":"Modify Claude runner for project-aware Zellij sessions.\n\n## Changes\n- Accept project name parameter in Run()\n- Use session name co-\u003cproject\u003e (one session per project)\n- Pane name is the task ID (already done)\n- Work directory is the worktree path (passed in)\n\n## Zellij Model\n- Session: co-\u003cproject-name\u003e\n- Panes: \u003ctask-id\u003e for each task\n- Enables parallel tasks within same project in future","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:21.444426-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.792581-05:00","closed_at":"2026-01-10T10:44:22.792581-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.5","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.445082-05:00","created_by":"matthew"},{"issue_id":"ac-la1.5","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.580327-05:00","created_by":"matthew"}]}
{"id":"ac-la1.6","title":"Update database for project context","description":"Update SQLite database for project-aware tracking.\n\n## Changes\n- Database path now comes from project (.co/tracking.db)\n- Add worktree_path column to beads table\n- Update db.Open() to accept path parameter\n- Update schema migration if needed\n\n## Schema Change\nALTER TABLE beads ADD COLUMN worktree_path TEXT;","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T10:23:21.67905-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.794199-05:00","closed_at":"2026-01-10T10:44:22.794199-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.6","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.679753-05:00","created_by":"matthew"},{"issue_id":"ac-la1.6","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.692759-05:00","created_by":"matthew"}]}
{"id":"ac-la1.7","title":"Update supporting commands and clients","description":"Update remaining files for project context.\n\n## Files\n- cmd/root.go: Add proj command group, --project global flag\n- cmd/complete.go: Find project from cwd\n- cmd/status.go: Show worktree info\n- internal/beads/client.go: Accept repo path parameter for bd commands\n\n## Changes\n- All commands that need project context use project.Find()\n- Beads client runs bd commands in the main repo directory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T10:23:21.900393-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.796011-05:00","closed_at":"2026-01-10T10:44:22.796011-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.7","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.901124-05:00","created_by":"matthew"},{"issue_id":"ac-la1.7","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.797419-05:00","created_by":"matthew"}]}
{"id":"ac-mv4","title":"Add task CRUD operations to internal/db/database.go","description":"Add functions: CreateTask(task), StartTask(taskID, session, pane, worktree), CompleteTask(taskID, prURL), FailTask(taskID, errMsg), GetTaskBeads(taskID), GetTaskForBead(beadID), CompleteTaskBead(taskID, beadID), FailTaskBead(taskID, beadID), IsTaskCompleted(taskID). Include logic to auto-complete task when all beads are done.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:33.655441-05:00","created_by":"matthew","updated_at":"2026-01-10T11:47:04.360805-05:00","closed_at":"2026-01-10T11:47:04.360805-05:00","close_reason":"Added task CRUD operations to database","dependencies":[{"issue_id":"ac-mv4","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.984663-05:00","created_by":"matthew"},{"issue_id":"ac-mv4","depends_on_id":"ac-fru","type":"blocks","created_at":"2026-01-10T11:35:20.579713-05:00","created_by":"matthew"}]}
{"id":"ac-nz0","title":"Create internal/db/db.go for SQLite connection","description":"Create internal/db/db.go with:\n- Open() function to initialize DB connection and create ~/.config/co/tracking.db\n- Close() function\n- Schema creation with beads table:\n  - id, status, title, pr_url, error_message\n  - zellij_session (TEXT) - zellij session name where Claude is running\n  - zellij_pane (TEXT) - pane name/ID within the session\n  - started_at, completed_at, created_at, updated_at\n- Status constants: pending, processing, completed, failed\n- Support CO_DB_PATH env var override","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.02255-05:00","created_by":"matthew","updated_at":"2026-01-10T09:43:25.986541-05:00","closed_at":"2026-01-10T09:43:25.986541-05:00","close_reason":"Created internal/db/db.go with Open(), Close(), schema creation with beads table, status constants, and CO_DB_PATH env var support","dependencies":[{"issue_id":"ac-nz0","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.718597-05:00","created_by":"matthew"},{"issue_id":"ac-nz0","depends_on_id":"ac-6n7","type":"blocks","created_at":"2026-01-10T09:35:22.062034-05:00","created_by":"matthew"}]}
{"id":"ac-p9b","title":"Create cmd/status.go subcommand","description":"Create cmd/status.go implementing:\n- co status [bead-id]\n- With ID: Show detailed status including zellij session/pane info\n- Without ID: Show all beads currently processing with their session/pane\n- Useful for debugging which Claude instance is working on what","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.678228-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.540741-05:00","closed_at":"2026-01-10T09:45:02.540741-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-p9b","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.722503-05:00","created_by":"matthew"},{"issue_id":"ac-p9b","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.654291-05:00","created_by":"matthew"}]}
{"id":"ac-r51","title":"Add GetBead function to beads client","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.286533-05:00","created_by":"matthew","updated_at":"2026-01-09T20:48:31.350644-05:00","closed_at":"2026-01-09T20:48:31.350644-05:00","close_reason":"Added GetBead(id) function to internal/beads/client.go that retrieves a single bead by ID using bd show --json."}
{"id":"ac-rcy","title":"Virtual Tasks: Group beads by complexity for efficient context usage","description":"Redesign co run to group beads into virtual tasks based on LLM-estimated complexity. Each Claude Code agent works on a task (multiple beads), producing one PR per task. Algorithm: dependency flattening → complexity estimation → bin-packing. See plan file: ~/.claude/plans/indexed-frolicking-bunny.md","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-10T11:33:43.137206-05:00","created_by":"matthew","updated_at":"2026-01-10T11:33:54.215672-05:00"}
{"id":"ac-rky","title":"Create internal/task/complexity.go with LLM-based complexity estimator","description":"Implement ComplexityEstimator interface with Estimate(bead) (score, tokens, error). Create LLMEstimator using Claude Haiku API to analyze bead title+description and return complexity score (1-10) and estimated context tokens. Include caching logic that checks description_hash against complexity_cache table.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.846849-05:00","created_by":"matthew","updated_at":"2026-01-10T11:58:57.501077-05:00","closed_at":"2026-01-10T11:58:57.501077-05:00","close_reason":"Created LLM-based complexity estimator with caching","dependencies":[{"issue_id":"ac-rky","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.760278-05:00","created_by":"matthew"},{"issue_id":"ac-rky","depends_on_id":"ac-345","type":"blocks","created_at":"2026-01-10T11:35:20.811773-05:00","created_by":"matthew"}]}
{"id":"ac-rqb","title":"Add unit tests for dependency flattening and bin-packing algorithms","description":"Create internal/task/planner_test.go with tests for: dependency graph building, identifying groupable beads, first-fit decreasing bin-packing, respecting dependency constraints. Test edge cases: single bead, all beads independent, chain dependencies, circular reference detection.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:50.277592-05:00","created_by":"matthew","updated_at":"2026-01-10T12:02:47.826538-05:00","closed_at":"2026-01-10T12:02:47.826538-05:00","close_reason":"Tests already added in planner_test.go: dependency graph, topological sort, cycle detection, bin-packing, budget splitting, dependency constraints","dependencies":[{"issue_id":"ac-rqb","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.552774-05:00","created_by":"matthew"},{"issue_id":"ac-rqb","depends_on_id":"ac-3wt","type":"blocks","created_at":"2026-01-10T11:35:33.098538-05:00","created_by":"matthew"}]}
{"id":"ac-sqi","title":"Implement partial failure handling with partial PR creation","description":"When agent fails mid-task: 1) Detect via polling (agent exits without all beads complete), 2) If any work committed, create PR listing completed beads and noting failed ones, 3) Mark failed beads in task_beads table, 4) Keep worktree for debugging. Allow retry of failed beads with co run \u003cfailed-bead-id\u003e.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:50.0705-05:00","created_by":"matthew","updated_at":"2026-01-10T12:10:40.476992-05:00","closed_at":"2026-01-10T12:10:40.476992-05:00","close_reason":"Implemented partial failure handling with partial PR creation","dependencies":[{"issue_id":"ac-sqi","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.445682-05:00","created_by":"matthew"},{"issue_id":"ac-sqi","depends_on_id":"ac-7tz","type":"blocks","created_at":"2026-01-10T11:35:32.77114-05:00","created_by":"matthew"},{"issue_id":"ac-sqi","depends_on_id":"ac-ais","type":"blocks","created_at":"2026-01-10T11:35:32.876338-05:00","created_by":"matthew"}]}
{"id":"ac-tia","title":"Implement git branch and commit operations","description":"Create internal/git/git.go:\n- CreateBranch(name, base string) - create and checkout branch\n- HasChanges() bool - check for uncommitted changes\n- CommitAll(message string) - stage and commit all\n- Push(branch string) - push to origin\n- Checkout(branch string) - switch branches\n- DeleteBranch(branch string) - cleanup after merge\n- GetCurrentBranch() string - get current branch name\n\nAcceptance criteria:\n- All git operations work via exec.Command\n- Proper error handling for git failures","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.184949-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:51.728059-05:00","closed_at":"2026-01-09T20:36:51.728059-05:00","close_reason":"Implemented streamlined git operations (GetCurrentBranch, Checkout, DeleteBranch, Push). Removed CreateBranch, CommitAll, HasChanges since Claude Code handles those per CLAUDE.md workflow.","dependencies":[{"issue_id":"ac-tia","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.493061-05:00","created_by":"matthew"}]}
{"id":"ac-vry","title":"Update cmd/plan.go to use batch estimation","description":"Update plan command to use new batch estimation.\n\n**File to modify:** `cmd/plan.go`\n\n**Changes in `planAutoGroup()`:**\n1. Create estimator with project context:\n   `estimator := task.NewLLMEstimator(database, proj.MainRepoPath(), proj.Name)`\n2. Call batch estimation before planning:\n   `estimator.EstimateBatch(ctx, readyBeads)`\n3. Use cached estimates for planning logic","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:01.857325-05:00","created_by":"matthew","updated_at":"2026-01-10T14:29:17.894219-05:00","dependencies":[{"issue_id":"ac-vry","depends_on_id":"ac-3ei","type":"blocks","created_at":"2026-01-10T14:02:29.127596-05:00","created_by":"matthew"}]}
{"id":"ac-w14","title":"Update internal/claude/runner.go for DB polling","description":"Update internal/claude/runner.go:\n- Remove os and path/filepath imports\n- Remove completionFile creation (lines 42-44)\n- Remove file instruction append (line 47)\n- Add import for internal/db\n- Update Run() to accept or return zellij session/pane names\n- Record session/pane in DB via db.StartBead() or update existing record\n- Change prompt to append 'co complete \u003cid\u003e' instruction\n- Change polling loop to poll db.IsCompleted(beadID) instead of file stat\n- Consider: expose session name constant or make configurable","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.554085-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:09.349291-05:00","closed_at":"2026-01-10T09:47:09.349291-05:00","close_reason":"Updated cmd/run.go with DB integration (Open, StartBead, FailBead), updated runner.go to poll DB for completion","dependencies":[{"issue_id":"ac-w14","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.727958-05:00","created_by":"matthew"},{"issue_id":"ac-w14","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:23.688381-05:00","created_by":"matthew"}]}
{"id":"ac-yar","title":"Add co estimate command","description":"Add new `co estimate` command for Claude to report complexity estimates.\n\n**New file:** `cmd/estimate.go`\n\n**Command signature:**\n```\nco estimate \u003cbead-id\u003e --score \u003c1-10\u003e --tokens \u003cn\u003e\n```\n\n**Behavior:**\n1. Get bead from beads DB to compute description hash\n2. Store estimate in complexity_cache table\n3. Mark bead complete in task_beads table\n4. If all beads in task have estimates, auto-complete the task\n5. Print confirmation message","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:57.816712-05:00","created_by":"matthew","updated_at":"2026-01-10T14:21:12.486746-05:00","closed_at":"2026-01-10T14:21:12.486746-05:00","close_reason":"Added co estimate command for complexity reporting","dependencies":[{"issue_id":"ac-yar","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.556897-05:00","created_by":"matthew"},{"issue_id":"ac-yar","depends_on_id":"ac-2u6","type":"blocks","created_at":"2026-01-10T14:02:28.67766-05:00","created_by":"matthew"}]}
{"id":"ac-zqp","title":"Create cmd/list.go subcommand","description":"Create cmd/list.go implementing:\n- co list [--status \u003cfilter\u003e]\n- List all tracked beads\n- Optional status filter (pending, processing, completed, failed)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.900454-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.564939-05:00","closed_at":"2026-01-10T09:45:02.564939-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-zqp","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.724199-05:00","created_by":"matthew"},{"issue_id":"ac-zqp","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.857299-05:00","created_by":"matthew"}]}
