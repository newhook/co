{"id":"ac-03ir","title":"Create Help modal","description":"Add '?' keybinding to show help modal. Display all available keybindings organized by category. Dismiss with any key or Escape. Style consistently with rest of TUI.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:33.056386-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.965043-05:00","closed_at":"2026-01-13T20:05:36.965043-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-03ir","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.805255-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-03ir","depends_on_id":"ac-dql","type":"blocks","created_at":"2026-01-13T13:33:04.781707-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-0a1","title":"Fix automated workflow to create tasks progressively after estimation","description":"runAutomatedWorkflow in cmd/work_automated.go creates all tasks upfront (estimate, implement, review, pr) before estimation completes. This is wrong because estimation results should inform how implement tasks are grouped. Fix: create only estimate task initially, then create implement tasks after estimation completes using the complexity results for bin-packing.","status":"closed","priority":1,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T10:00:21.038159-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T10:06:12.900124-05:00","closed_at":"2026-01-13T10:06:12.900124-05:00","close_reason":"Fixed automated workflow to create tasks progressively: 1) Only estimate task is created initially, 2) After estimate completes, handlePostEstimation creates implement and review tasks using bin-packing, 3) PR task is created only after review passes (in handleReviewFixLoop)"}
{"id":"ac-0by","title":"Add unit tests for zellij package","description":"Add unit tests for the zellij package with mock command execution","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:16.626874-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.285578-05:00","closed_at":"2026-01-13T13:14:41.285578-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-0by","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:42.933722-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-0by","depends_on_id":"ac-gn0","type":"blocks","created_at":"2026-01-13T13:03:58.877099-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-0eo","title":"Analyze SQL null fields complexity and necessity","description":"Analyze the use of nullable fields in the SQL database schema and Go code. These null fields (sql.NullString, sql.NullInt64, sql.NullTime, etc.) add significant code complexity with conversion functions like nullString(), nullTime(), and field access patterns. Investigate whether these nullable fields are necessary or if we could simplify by using non-nullable fields with sensible defaults.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T13:04:13.722415-05:00","created_by":"matthew","updated_at":"2026-01-11T20:58:24.295739-05:00","closed_at":"2026-01-11T17:43:21.414167-05:00"}
{"id":"ac-0lx","title":"Push and set upstream when creating work branches","description":"Modify 'co work create' command in cmd/work.go to automatically run 'git push --set-upstream origin \u003cbranch\u003e' after creating the feature branch. This prevents users from getting 'no upstream branch' errors later.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T13:14:00.043406-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.901064-05:00","closed_at":"2026-01-11T15:56:31.596935-05:00"}
{"id":"ac-0pg","title":"Fix work-task association issue in co run","description":"When running co run in different terminal sessions for different work units, tasks are not correctly associated with their respective work. Root cause: code checks for 'work-' prefix but IDs are actually 'w-\u003chash\u003e'.","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T09:25:28.802705-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T10:07:38.419057-05:00","closed_at":"2026-01-12T09:31:13.246705-05:00"}
{"id":"ac-112c","title":"DestroyWork silently suppresses errors instead of returning warnings","description":"In cmd/work.go:573-590, the DestroyWork function silently ignores errors from:\n- TerminateWorkTabs\n- worktree.RemoveForce\n- os.RemoveAll\n\nThe CLI version (runWorkDestroy) printed warnings for these errors. Consider returning a struct with warnings so callers can optionally display them, similar to how CreateWorkWithBranch returns a result struct.","status":"open","priority":3,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:23:21.92883-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:23:21.92883-05:00"}
{"id":"ac-129","title":"Planning phase: Update plan.go for work context awareness","description":"Update cmd/plan.go to detect work context from directory or --work flag. Create tasks with work_id reference. Support planning within work directories.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:18:03.445935-05:00","created_by":"matthew","updated_at":"2026-01-10T21:01:36.72422-05:00","closed_at":"2026-01-10T21:01:36.72422-05:00","close_reason":"Implemented: Updated plan.go to detect work context from directory or --work flag. Added detectWorkFromDirectory function. Updated all CreateTask calls to include work_id.","dependencies":[{"issue_id":"ac-129","depends_on_id":"ac-s4d","type":"blocks","created_at":"2026-01-10T18:19:24.530761-05:00","created_by":"matthew"}]}
{"id":"ac-19j","title":"Fix co complete command to handle closed beads and task IDs properly","description":"The 'co complete' command should: 1) Accept both task IDs and bead IDs, 2) Handle beads that are already closed in bd (common when Claude closes them during work), 3) Provide clearer error messages. Currently it fails saying 'bead not found' even when the bead exists but is closed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T13:14:39.187859-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.902048-05:00","closed_at":"2026-01-11T15:49:27.688883-05:00"}
{"id":"ac-1bf","title":"Use Claude Code for complexity estimation instead of direct API","description":"Replace direct Anthropic API calls in `co plan --auto-group` with Claude Code invocation using the same task mechanism as implementation tasks.\n\n## Approach\n\nUse the existing task infrastructure with a new \"estimate\" task type:\n1. Add `task_type` column to tasks table (\"implement\" vs \"estimate\")\n2. Create an estimate task with all beads needing complexity estimation\n3. Run the task using existing `Run()` mechanism (different prompt)\n4. Claude runs `co estimate \u003cid\u003e --score X --tokens Y` for each bead\n5. Completion detected by checking complexity_cache has all beads\n\n## Key Design Decisions\n\n1. **Reuse task infrastructure** - Estimate tasks use same DB tables, same `Run()` function\n2. **Task type column** - Distinguishes implement vs estimate tasks\n3. **`co estimate` command** - Claude reports estimates, auto-completes task when all done\n4. **Single estimate task** - All uncached beads estimated in one Claude session\n\n## Verification\n\n1. Build: `go build -o co .`\n2. Test: `go test ./...`\n3. Create a project with some beads\n4. Run `co plan --auto-group`\n5. Verify estimate task created, Claude estimates beads, planning proceeds","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T14:01:23.26411-05:00","created_by":"matthew","updated_at":"2026-01-10T14:32:30.116147-05:00","closed_at":"2026-01-10T14:32:30.116147-05:00","close_reason":"Implemented Claude Code for complexity estimation"}
{"id":"ac-1d1","title":"Add testify assertion library to all tests","description":"Replace standard Go test assertions with testify's assert and require packages for better error messages and cleaner test code. This includes updating all existing test files to use testify assertions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T17:20:23.963577-05:00","created_by":"matthew","updated_at":"2026-01-11T19:33:54.091189-05:00","closed_at":"2026-01-11T16:27:19.349428-05:00"}
{"id":"ac-1d5","title":"Fix co task delete command - foreign key constraint error","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T13:22:08.602776-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.902801-05:00","closed_at":"2026-01-11T15:57:13.731094-05:00"}
{"id":"ac-1gt","title":"Claude runner: Update zellij management for work tabs","description":"Update internal/claude/runner.go so works create tabs (not tasks). Tasks run sequentially in work's tab without creating panes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:18:26.311169-05:00","created_by":"matthew","updated_at":"2026-01-10T21:42:34.372365-05:00","closed_at":"2026-01-10T21:42:34.372365-05:00","close_reason":"Implemented: Work commands with create/list/show/destroy, work-centric execution in run.go, zellij tab management, documentation updates, and testing completed","dependencies":[{"issue_id":"ac-1gt","depends_on_id":"ac-s4d","type":"blocks","created_at":"2026-01-10T18:19:24.767167-05:00","created_by":"matthew"}]}
{"id":"ac-1i0","title":"Add continuation support for manually run estimation tasks","description":"When estimation tasks are run manually with 'co run estimate-xxx', there's no way to continue creating implementation tasks. Should either detect completed estimation tasks in 'co plan' or add a 'co task continue' command.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-10T16:20:22.250441-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.903509-05:00","closed_at":"2026-01-11T15:57:53.346419-05:00"}
{"id":"ac-2rz","title":"Implement automated workflow orchestration in work_automated.go","description":"Create new file cmd/work_automated.go with executeAutomatedWorkflow() function that orchestrates the complete flow: collect dependencies, plan, execute, review loop, and PR creation.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:50.03232-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.083166-05:00","closed_at":"2026-01-11T21:03:47.560319-05:00","dependencies":[{"issue_id":"ac-2rz","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:30.252476-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-2rz","depends_on_id":"ac-qcz","type":"blocks","created_at":"2026-01-11T19:32:59.113501-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-2rz","depends_on_id":"ac-ys9","type":"blocks","created_at":"2026-01-11T19:33:01.810139-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-2sv","title":"Fix plan command to support auto-grouping with specified beads","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T15:12:56.088501-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T15:15:13.119251-05:00","closed_at":"2026-01-11T15:15:13.119251-05:00","close_reason":"Fixed in PR #37 - plan command now properly supports auto-grouping with specified beads"}
{"id":"ac-2u6","title":"Add CacheComplexity database helper","description":"Add `CacheComplexity()` method to DB type for storing complexity estimates.\n\n**File to modify:** `internal/db/db.go` (or new `internal/db/complexity.go`)\n\n**Function signature:**\n```go\nfunc (db *DB) CacheComplexity(beadID, descHash string, score, tokens int) error\n```\n\n**SQL:**\n```sql\nINSERT INTO complexity_cache (bead_id, description_hash, complexity_score, estimated_tokens)\nVALUES (?, ?, ?, ?)\nON CONFLICT(bead_id) DO UPDATE SET ...\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:58.699672-05:00","created_by":"matthew","updated_at":"2026-01-10T14:17:34.781249-05:00","closed_at":"2026-01-10T14:17:34.781249-05:00","close_reason":"Added CacheComplexity and related database helpers","dependencies":[{"issue_id":"ac-2u6","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.442818-05:00","created_by":"matthew"}]}
{"id":"ac-2uob","title":"in plan mode pressing 'w' spew logs","description":"When I press 'w' I see lots of prints to the console about mise install and all that stuff. That should be reserved for the cli. I shouldn't see that in the tui.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T21:05:01.443148-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T21:05:32.572974-05:00"}
{"id":"ac-2vr","title":"Add bead ID positional argument to run command","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.008418-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.553736-05:00","closed_at":"2026-01-09T20:52:28.553736-05:00","close_reason":"Added positional argument for bead ID: ac run \u003cbead-id\u003e now works as alternative to --bead flag","dependencies":[{"issue_id":"ac-2vr","depends_on_id":"ac-r51","type":"blocks","created_at":"2026-01-09T20:45:17.691025-05:00","created_by":"matthew"}]}
{"id":"ac-2z5","title":"Allow co task delete to accept multiple task IDs","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T11:41:07.892022-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.904208-05:00","closed_at":"2026-01-11T15:56:25.799992-05:00"}
{"id":"ac-345","title":"Create internal/task/task.go with Task struct and Planner interface","description":"Define Task struct with ID, BeadIDs, Beads, Complexity, Status fields. Define Planner interface with Plan(beads []BeadWithDeps, budget int) ([]Task, error) method.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.551676-05:00","created_by":"matthew","updated_at":"2026-01-10T11:55:28.881087-05:00","closed_at":"2026-01-10T11:55:28.881087-05:00","close_reason":"Created Task struct and Planner interface","dependencies":[{"issue_id":"ac-345","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.667951-05:00","created_by":"matthew"}]}
{"id":"ac-350","title":"Refactor cmd/work_automated.go to create tasks with dependencies","description":"Move workflow setup (create work, collect beads, plan tasks) to run BEFORE spawning orchestrator. Create tasks with explicit dependencies: estimate -\u003e implement -\u003e review -\u003e pr. Use AddTaskDependency() to set up dependency chains.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:13.311929-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:47:53.923159-05:00","closed_at":"2026-01-12T17:47:53.923162-05:00","dependencies":[{"issue_id":"ac-350","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.202879-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-350","depends_on_id":"ac-lcz","type":"blocks","created_at":"2026-01-12T17:29:37.381164-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-3ei","title":"Update complexity.go to use estimate tasks","description":"Replace direct Anthropic API calls with estimate task mechanism.\n\n**File to modify:** `internal/task/complexity.go`\n\n**Changes:**\n1. Remove `anthropic` SDK import\n2. Add `claude` package import\n3. Change `LLMEstimator` struct: remove `client`, add `workDir` and `projectName`\n4. Update `NewLLMEstimator(database *db.DB, workDir, projectName string)`\n5. Add `EstimateBatch(ctx, beadList []beads.Bead) error` method that:\n   - Filters uncached beads\n   - Creates estimate task with `CreateTask(taskID, \"estimate\", beadIDs, 0)`\n   - Builds prompt with `BuildEstimatePrompt()`\n   - Calls `claude.Run()` to execute\n6. Export `HashDescription()` for use by cmd/estimate.go\n7. Keep existing caching logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:00.762235-05:00","created_by":"matthew","updated_at":"2026-01-10T14:29:08.173017-05:00","closed_at":"2026-01-10T14:29:08.173017-05:00","close_reason":"Updated complexity estimation to use estimate tasks","dependencies":[{"issue_id":"ac-3ei","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.789404-05:00","created_by":"matthew"},{"issue_id":"ac-3ei","depends_on_id":"ac-2u6","type":"blocks","created_at":"2026-01-10T14:02:28.903848-05:00","created_by":"matthew"},{"issue_id":"ac-3ei","depends_on_id":"ac-dzb","type":"blocks","created_at":"2026-01-10T14:02:29.020387-05:00","created_by":"matthew"}]}
{"id":"ac-3ho2","title":"Refactor TUI createWork to call logic directly instead of shelling out","description":"In cmd/tui_work.go, createWork() shells out to 'co work create'. Should call the underlying runWorkCreate logic directly for better error handling and to avoid subprocess overhead.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:22:36.499995-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:51:30.768854-05:00","closed_at":"2026-01-14T19:51:30.768854-05:00","close_reason":"Refactored TUI createWork to call CreateWorkWithBranch directly instead of shelling out to 'co work create'. Added new helper function CreateWorkWithBranch that encapsulates core work creation logic (worktree, branch, database record) without requiring beads upfront."}
{"id":"ac-3jn8","title":"Fix detectWorkFromDirectory error handling in poll.go","description":"cmd/poll.go:213-217 changed to surface error from detectWorkFromDirectory, but this now returns an error if simply not in a work directory. This may break callers expecting empty string for 'not in work dir' case.","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T19:03:47.236465-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:11:44.922913-05:00","closed_at":"2026-01-13T19:11:44.922913-05:00","close_reason":"Fixed in feat/redo-bead-work branch"}
{"id":"ac-3ow","title":"Create cmd/migrate.go command (status, up, rollback)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:45.545495-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:13.510289-05:00","closed_at":"2026-01-13T12:42:13.510289-05:00","close_reason":"Created cmd/migrate.go with status, up, and rollback subcommands","dependencies":[{"issue_id":"ac-3ow","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.794947-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-3ow","depends_on_id":"ac-8zo","type":"blocks","created_at":"2026-01-13T12:26:14.531813-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-3wt","title":"Create internal/task/planner.go with bin-packing algorithm","description":"Implement Planner that: 1) Builds dependency graph from BeadWithDeps, 2) Identifies beads that can be grouped (no cross-dependencies), 3) Uses first-fit decreasing bin-packing to assign beads to tasks targeting 50-70% context budget, 4) Respects dependency constraints.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:15.071257-05:00","created_by":"matthew","updated_at":"2026-01-10T12:02:06.718125-05:00","closed_at":"2026-01-10T12:02:06.718125-05:00","close_reason":"Created planner with bin-packing algorithm","dependencies":[{"issue_id":"ac-3wt","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.874239-05:00","created_by":"matthew"},{"issue_id":"ac-3wt","depends_on_id":"ac-345","type":"blocks","created_at":"2026-01-10T11:35:21.029918-05:00","created_by":"matthew"},{"issue_id":"ac-3wt","depends_on_id":"ac-rky","type":"blocks","created_at":"2026-01-10T11:35:21.25285-05:00","created_by":"matthew"}]}
{"id":"ac-4cx","title":"internal/db/migration.go uses sql directly. It should use sqlc","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-12T09:06:23.168109-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T09:10:23.409371-05:00","closed_at":"2026-01-12T09:10:23.409371-05:00","close_reason":"Refactored internal/db/migration.go to use SQLC-generated queries instead of direct SQL. Added schema_migrations table to schema.sql and created sql/queries/migrations.sql with SQLC queries for CreateMigrationsTable, GetAppliedMigrations, GetLastMigration, RecordMigration, DeleteMigration, and ListMigrationVersions."}
{"id":"ac-4fu","title":"Implement zellij pane input control functions","description":"Implement WriteASCII(session, code), WriteChars(session, text), SendCtrlC(session), SendEnter(session), and ExecuteCommand(session, cmd)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:14.516679-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.278581-05:00","closed_at":"2026-01-13T13:14:41.278581-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-4fu","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:39.884499-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-4fu","depends_on_id":"ac-gn0","type":"blocks","created_at":"2026-01-13T13:03:55.426469-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-4g9","title":"Update cmd/run.go for DB integration","description":"Update cmd/run.go:\n- In runBeads(): Add db.Open() at start, defer db.Close()\n- Before processBead(): call db.StartBead(bead.ID, bead.Title, sessionName, paneName)\n- Pass session/pane info to claude.Run() or have it return them\n- On error: call db.FailBead(bead.ID, err.Error())\n- In buildPrompt(): Change instruction to use 'co complete \u003cid\u003e --pr \u003cPR_URL\u003e' instead of file creation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.329221-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:09.319481-05:00","closed_at":"2026-01-10T09:47:09.319481-05:00","close_reason":"Updated cmd/run.go with DB integration (Open, StartBead, FailBead), updated runner.go to poll DB for completion","dependencies":[{"issue_id":"ac-4g9","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.726713-05:00","created_by":"matthew"},{"issue_id":"ac-4g9","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:23.489695-05:00","created_by":"matthew"}]}
{"id":"ac-4ki","title":"Fix co task delete command - FOREIGN KEY constraint error","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T13:26:55.592751-05:00","created_by":"matthew","updated_at":"2026-01-11T14:38:48.149528-05:00","closed_at":"2026-01-11T14:38:48.149528-05:00","close_reason":"Fixed FOREIGN KEY constraint error in co task delete command by adding deletion from work_tasks table, and fixed UNIQUE constraint error in plan command by adding atomic task counter table"}
{"id":"ac-536","title":"co sync should skip beads internal worktrees","description":"The sync command iterates over all git worktrees and runs git pull on each. However, it also tries to pull on internal beads worktrees (like beads-sync) which may not have an upstream branch configured, causing failures.\n\nThe sync command should filter out worktrees in the .git/beads-worktrees directory since these are managed by the beads system, not by co.","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T15:53:08.521498-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:33:54.092759-05:00","closed_at":"2026-01-11T16:07:56.19882-05:00"}
{"id":"ac-57h","title":"co complete command not in PATH causes task completion failure","description":"Claude cannot mark tasks complete because 'co complete \u003cbead-id\u003e' command fails - the co binary is not in PATH. Located at ~/co/co but Claude needs it accessible via PATH.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-10T15:17:37.265624-05:00","created_by":"matthew","updated_at":"2026-01-10T15:42:27.382157-05:00","closed_at":"2026-01-10T15:42:27.382157-05:00","close_reason":"Fixed by switching from panes to tabs and adding tab existence check"}
{"id":"ac-580r","title":"Modify EnsureWorkOrchestrator to always restart orchestrator","description":"Change EnsureWorkOrchestrator in internal/claude/runner.go to always\ncall SpawnWorkOrchestrator instead of returning early when the tab\nexists. SpawnWorkOrchestrator already handles both cases (new tab\nvs existing tab with restart).","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T17:41:04.433464-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T18:49:27.667503-05:00"}
{"id":"ac-586","title":"Build Works panel with status indicators","description":"Display list of works with status icons (○ pending, ● processing, ✓ completed, ✗ failed). Show work ID, branch name, and task progress. Highlight selected item.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:22.857792-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.968299-05:00","closed_at":"2026-01-13T20:05:36.968299-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-586","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.611316-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-586","depends_on_id":"ac-blu","type":"blocks","created_at":"2026-01-13T13:33:02.940083-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-586","depends_on_id":"ac-dib","type":"blocks","created_at":"2026-01-13T13:33:03.03278-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-59n","title":"Delete cmd/claude.go and remove registration","description":"Delete cmd/claude.go (per-task wrapper command). Remove rootCmd.AddCommand(claudeCmd) from cmd/root.go.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:13.518577-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:53:07.418388-05:00","closed_at":"2026-01-12T17:53:07.418388-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-59n","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.222581-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-59n","depends_on_id":"ac-ef6","type":"blocks","created_at":"2026-01-12T17:29:37.512515-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-5au","title":"cmd/task uses sql directly. It should use sqlc","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-12T08:57:27.863201-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T09:02:15.597621-05:00","closed_at":"2026-01-12T09:02:15.597621-05:00","close_reason":"Refactored cmd/task.go to use SQLC-generated queries instead of direct SQL. Added new SQLC queries (GetTaskBeadStatus, DeleteWorkTaskByTask, DeleteTaskBeadsByTask, DeleteTask, ResetTaskBeadStatuses) and corresponding wrapper methods in internal/db/task.go."}
{"id":"ac-5c5","title":"Add recovery for orphaned processing tasks","description":"If the orchestrator crashes while a task is in 'processing' status, that task will be stuck. EnsureWorkOrchestrator can restart the orchestrator, but it won't pick up the orphaned task.\n\nAdd recovery logic:\n- On orchestrator startup, check for tasks in 'processing' status\n- Either reset them to 'pending' or fail them with an error\n- Consider adding a timeout for processing tasks","status":"open","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:35.069314-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T18:10:35.069314-05:00"}
{"id":"ac-5ft","title":"Remove unused git functions (CheckoutInDir, CreateBranchInDir, HasCommitsAheadInDir)","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:47.744915-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:14.212452-05:00","closed_at":"2026-01-13T12:42:14.212452-05:00","close_reason":"Removed unused git functions: CheckoutInDir, CreateBranchInDir, HasCommitsAheadInDir","dependencies":[{"issue_id":"ac-5ft","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:05.161323-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-5ft","depends_on_id":"ac-l09","type":"blocks","created_at":"2026-01-13T12:26:14.622542-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-5ft","depends_on_id":"ac-947","type":"blocks","created_at":"2026-01-13T12:26:14.709447-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-5ir2","title":"Refactor TUI planWork to call logic directly instead of shelling out","description":"In cmd/tui_work.go, planWork() shells out to 'co run --plan-only'. Should call the underlying planning logic directly for better error handling and to avoid subprocess overhead.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:22:38.136099-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:57:47.623534-05:00","closed_at":"2026-01-14T19:57:47.623534-05:00","close_reason":"Added PlanWorkTasks helper function in run.go that encapsulates task creation logic. Updated TUI planWork to call PlanWorkTasks directly instead of shelling out to 'co run --plan-only'. Provides better error handling and displays number of tasks created."}
{"id":"ac-5lh","title":"Estimation tasks should run in main worktree without creating branches","description":"When running 'co plan --auto-group', estimation tasks may be creating unnecessary worktrees or branches. They should run in the main directory since they only execute 'co estimate' commands and don't modify any files.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:02:00.145937-05:00","created_by":"matthew","updated_at":"2026-01-10T16:09:48.575854-05:00","closed_at":"2026-01-10T16:09:48.575854-05:00","close_reason":"Incorrect understanding - estimate tasks DO need worktrees to examine code, they just don't modify files"}
{"id":"ac-5n9","title":"Implement Claude Code invocation","description":"Create internal/claude/runner.go:\n- Run(ctx, prompt, workDir) error\n- Executes: claude --dangerously-skip-permissions -p \"\u003cprompt\u003e\"\n- Streams stdout/stderr to terminal\n- Returns error on non-zero exit\n\nAcceptance criteria:\n- Claude is invoked with correct flags\n- Output is visible during execution\n- Errors are properly propagated","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.54837-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:51.902096-05:00","closed_at":"2026-01-09T20:36:51.902096-05:00","close_reason":"Implemented Run(ctx, prompt, workDir) that invokes claude --dangerously-skip-permissions -p with streaming output to stdout/stderr.","dependencies":[{"issue_id":"ac-5n9","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.589403-05:00","created_by":"matthew"}]}
{"id":"ac-5osz","title":"Make force re-estimation configurable in planBeadsWithComplexity","description":"cmd/run.go:265 passes true for force re-estimation which may be slow/expensive. Consider making this configurable via flag or defaulting to false.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T19:03:48.879794-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:11:44.933304-05:00","closed_at":"2026-01-13T19:11:44.933304-05:00","close_reason":"Fixed in feat/redo-bead-work branch"}
{"id":"ac-5rj","title":"do deadcode analysis, and remove anything not being used","status":"closed","priority":2,"issue_type":"epic","owner":"matthew@customer.io","created_at":"2026-01-13T11:53:02.049519-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:28.664869-05:00","closed_at":"2026-01-13T12:42:28.664869-05:00","close_reason":"Completed dead code analysis and removal: refactored git commands to use library functions, added migration 012 with down_sql storage, created co migrate command, and removed all dead code including layouts, github/pr.go, and misc unused functions","comments":[{"id":2,"issue_id":"ac-5rj","author":"Matthew Newhook","text":"# Dead Code Analysis and Refactoring Plan\n\n## Summary\n\nThree-part task:\n1. **Refactor git commands**: Use library functions instead of inline exec.Command\n2. **Fix migrations**: Store down_sql in DB and add `co migrate` command\n3. **Remove dead code**: Delete truly unused code\n\n---\n\n## Part 1: Refactor Inline Git Commands\n\n### Changes Needed\n\n#### 1. Update `worktree.Create` to support base branch\n\n**File:** `internal/worktree/worktree.go`\n\nCurrent: `func Create(repoPath, worktreePath, branch string) error`\nNew: `func Create(repoPath, worktreePath, branch, baseBranch string) error`\n\n#### 2. Refactor `cmd/work.go` (lines 154-180)\n\nReplace inline commands:\n- `exec.Command(\"git\", \"worktree\", \"add\", ...)` → `worktree.Create(...)`\n- `exec.Command(\"git\", \"push\", \"--set-upstream\", ...)` → `git.PushInDir(...)`\n- `exec.Command(\"git\", \"worktree\", \"remove\", ...)` → `worktree.Remove(...)`\n\n#### 3. Refactor `cmd/work_automated.go` (lines 291-314)\n\nSame refactoring as work.go.\n\n---\n\n## Part 2: Fix Migration System\n\n### Problem\n\nCurrent `schema_migrations` table:\n```sql\nCREATE TABLE schema_migrations (\n    version TEXT PRIMARY KEY,\n    applied_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n```\n\nThis doesn't store `down_sql`. If user upgrades `co` (new migrations applied) then downgrades to older `co`, the older binary won't have the migration files to rollback.\n\n### Solution\n\n#### 1. New migration to add down_sql column\n\n**File:** `internal/db/migrations/012_migration_down_sql.sql`\n\n```sql\n-- +up\nALTER TABLE schema_migrations ADD COLUMN name TEXT NOT NULL DEFAULT '';\nALTER TABLE schema_migrations ADD COLUMN down_sql TEXT NOT NULL DEFAULT '';\n\n-- +down\n-- SQLite doesn't support DROP COLUMN easily, recreate table\nCREATE TABLE schema_migrations_new (\n    version TEXT PRIMARY KEY,\n    applied_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO schema_migrations_new (version, applied_at)\nSELECT version, applied_at FROM schema_migrations;\nDROP TABLE schema_migrations;\nALTER TABLE schema_migrations_new RENAME TO schema_migrations;\n```\n\n#### 2. Update SQL queries\n\n**File:** `sql/queries/migrations.sql`\n\nAdd/modify queries:\n```sql\n-- name: RecordMigrationWithDown :exec\nINSERT INTO schema_migrations (version, name, down_sql) VALUES (?, ?, ?);\n\n-- name: GetMigrationDownSQL :one\nSELECT down_sql FROM schema_migrations WHERE version = ?;\n\n-- name: GetLastMigrationWithDown :one\nSELECT version, name, down_sql FROM schema_migrations\nORDER BY version DESC\nLIMIT 1;\n```\n\n#### 3. Update migration.go\n\n**File:** `internal/db/migration.go`\n\n- Modify `applyMigration` to store `down_sql` when recording migration\n- Modify `RollbackMigration` to read `down_sql` from DB instead of embedded files\n- Keep `RollbackMigrationForFS` for backwards compatibility during transition\n\n#### 4. Add `co migrate` command\n\n**File:** `cmd/migrate.go`\n\n```go\n// Commands:\n// co migrate status   - Show applied migrations\n// co migrate up       - Apply pending migrations (already happens automatically)\n// co migrate rollback - Rollback last migration\n```\n\n#### 5. Backfill existing migrations\n\nWhen `RunMigrations` runs, after applying migration 012, backfill existing migrations with their down_sql from embedded files (one-time operation).\n\n### Files to Modify\n\n| File | Changes |\n|------|---------|\n| `internal/db/migrations/012_migration_down_sql.sql` | New migration |\n| `sql/queries/migrations.sql` | Add new queries |\n| `internal/db/schema.sql` | Update schema_migrations definition |\n| `internal/db/migration.go` | Store/read down_sql from DB |\n| `cmd/migrate.go` | New command file |\n| `cmd/root.go` | Register migrate command |\n\n---\n\n## Part 3: Remove Dead Code\n\nAfter Parts 1 and 2, these items are truly dead:\n\n### 1. Layout Functions (entire file)\n**Delete:** `internal/claude/layouts.go`, `internal/claude/layouts_test.go`, `internal/claude/layouts/automated-workflow.kdl`\n\n### 2. Git Functions (3 functions)\n**File:** `internal/git/git.go`\n- Remove `CheckoutInDir` - branches created via worktree\n- Remove `CreateBranchInDir` - branches created via worktree\n- Remove `HasCommitsAheadInDir` - unused\n\n**Keep:** `PushInDir`, `PullInDir`\n\n### 3. GitHub Functions (entire file)\n**Delete:** `internal/github/pr.go`\n\n### 4. Misc Functions\n- `internal/mise/mise.go`: Remove `IsEnabled`\n- `internal/signal/signal.go`: Remove `IsBlocked`\n- `internal/claude/runner.go`: Remove `WorkOrchestratorTabName`\n\n### 5. Migration Functions - NOW USED\n**Keep all migration functions** - they'll be used by `co migrate` command:\n- `RollbackMigration`\n- `RollbackMigrationForFS`\n- `MigrationStatus`\n- `MigrationStatusContext`\n\n---\n\n## Implementation Order\n\n1. Add `baseBranch` to `worktree.Create`\n2. Refactor `cmd/work.go` and `cmd/work_automated.go`\n3. Create migration 012 (add down_sql column)\n4. Update SQL queries and regenerate sqlc\n5. Update `migration.go` to store/read down_sql\n6. Add backfill logic for existing migrations\n7. Create `cmd/migrate.go` command\n8. Remove dead code (layouts, unused git funcs, github pkg, misc)\n9. Clean up unused imports\n10. Run tests and deadcode analysis\n\n---\n\n## Files Summary\n\n| File | Action |\n|------|--------|\n| `internal/worktree/worktree.go` | Add baseBranch param |\n| `cmd/work.go` | Use library functions |\n| `cmd/work_automated.go` | Use library functions |\n| `internal/db/migrations/012_migration_down_sql.sql` | New migration |\n| `sql/queries/migrations.sql` | Add new queries |\n| `internal/db/schema.sql` | Update schema |\n| `internal/db/migration.go` | Store/read down_sql |\n| `cmd/migrate.go` | New command |\n| `cmd/root.go` | Register command |\n| `internal/claude/layouts.go` | Delete |\n| `internal/claude/layouts_test.go` | Delete |\n| `internal/claude/layouts/automated-workflow.kdl` | Delete |\n| `internal/github/pr.go` | Delete |\n| `internal/git/git.go` | Remove 3 unused functions |\n| `internal/mise/mise.go` | Remove IsEnabled |\n| `internal/signal/signal.go` | Remove IsBlocked |\n| `internal/claude/runner.go` | Remove WorkOrchestratorTabName |\n\n---\n\n## Verification\n\n```bash\ngo build ./...\ngo test ./...\nmise run sqlc-generate  # After updating queries\ngo run golang.org/x/tools/cmd/deadcode@latest ./...\n```\n\nTest migration manually:\n```bash\n./co migrate status\n./co migrate rollback\n./co migrate status\n```\n","created_at":"2026-01-13T17:25:19Z"}]}
{"id":"ac-5st","title":"Add sqlc generate documentation to CLAUDE.md","description":"Add a note to CLAUDE.md explaining how to regenerate SQLC code after modifying SQL queries or schema. Use mise run sqlc-generate command.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T21:02:13.693519-05:00","created_by":"matthew","updated_at":"2026-01-11T19:33:54.093873-05:00","closed_at":"2026-01-11T16:08:26.609233-05:00"}
{"id":"ac-5wh","title":"work review command should auto-run the created review task","description":"The work review command creates a review task but requires manual 'co run' invocation. It should automatically run the task after creating it. See cmd/work.go:482-488","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T18:10:39.624549-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T18:15:00.15032-05:00","closed_at":"2026-01-11T18:15:00.15032-05:00","close_reason":"Added auto-run of review task after creation by calling processTask","dependencies":[{"issue_id":"ac-5wh","depends_on_id":"ac-pij","type":"parent-child","created_at":"2026-01-11T18:12:14.461737-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-61b","title":"SQLC queries: Add works.sql and update tasks.sql","description":"Create sql/queries/works.sql with CRUD operations for works table. Update sql/queries/tasks.sql to handle work_id. Regenerate SQLC code.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:17:41.40234-05:00","created_by":"matthew","updated_at":"2026-01-10T20:53:12.572649-05:00","closed_at":"2026-01-10T20:53:12.572649-05:00","close_reason":"Implemented: Created sql/queries/works.sql with CRUD operations. Updated tasks.sql to include work_id. Regenerated SQLC code.","dependencies":[{"issue_id":"ac-61b","depends_on_id":"ac-ymr","type":"blocks","created_at":"2026-01-10T18:19:24.298556-05:00","created_by":"matthew"}]}
{"id":"ac-61jz","title":"Review: w-2ze","status":"closed","priority":2,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:32:17.544034-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:35:35.70447-05:00","closed_at":"2026-01-14T20:35:35.70447-05:00","close_reason":"Closed"}
{"id":"ac-61jz.1","title":"Remove unused github.com/creack/pty dependency from go.mod","description":"The go.mod file adds github.com/creack/pty v1.1.24 as a dependency, but it is never imported anywhere in the codebase. Running 'go mod tidy' removes it. This dependency should be removed to keep the module file clean.\n\nFile: go.mod:10","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:32:24.385295-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:32:24.385295-05:00","dependencies":[{"issue_id":"ac-61jz.1","depends_on_id":"ac-61jz","type":"parent-child","created_at":"2026-01-14T19:32:24.386166-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-61jz.2","title":"Remove debug logging code from TUI files before merge","description":"Several TUI files have debug logging code that should be removed before merging to main:\n\n1. cmd/tui_root.go:\n   - Lines 9-10: Adds 'log' and 'os' imports for debug logging\n   - Lines 17-22: Creates debug log file at /tmp/root-key-debug.log\n   - Lines 180-182: Logs all messages for debugging\n   - Lines 214-216: Logs key messages with modal state\n\n2. cmd/tui_plan.go:\n   - Lines 7-8: Adds 'log' and 'os' imports for debug logging\n\nThis debug code writes to /tmp files and should not be included in production code.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:32:31.74182-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:32:31.74182-05:00","dependencies":[{"issue_id":"ac-61jz.2","depends_on_id":"ac-61jz","type":"parent-child","created_at":"2026-01-14T19:32:31.742839-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-61jz.3","title":"Commit uncommitted working directory changes","description":"There are significant uncommitted changes in the working directory that appear to be part of the feature work but haven't been committed:\n\nModified files:\n- cmd/task_processing.go (auto-start work when processing task)\n- cmd/tui_monitor.go (InModal interface, status bar improvements)\n- cmd/tui_plan.go (edit bead dialog, create work dialog, InModal interface)\n- cmd/tui_root.go (modal handling, c-key prefix mode switching, debug logging)\n- cmd/tui_shared.go (new ViewEditBead mode, styleHotkeys helper, expanded beadTypes)\n- cmd/tui_work.go (InModal interface)\n- cmd/work.go (go mod tidy changes)\n- go.mod/go.sum (dependency cleanup)\n\nThese changes need to be reviewed and committed as part of the feature branch.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:32:39.868314-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:32:39.868314-05:00","dependencies":[{"issue_id":"ac-61jz.3","depends_on_id":"ac-61jz","type":"parent-child","created_at":"2026-01-14T19:32:39.86933-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-6dk","title":"fix the schema according the nullable schema analysis.","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T17:50:23.401552-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T17:58:35.323801-05:00","closed_at":"2026-01-11T17:58:35.323801-05:00","close_reason":"Fixed schema: converted nullable string/int columns to NOT NULL with defaults. Created migration 005 to recreate tables with proper constraints. Simplified Go code by removing nullString helper and using direct types."}
{"id":"ac-6n7","title":"Add go-sqlite3 dependency to go.mod","description":"Add github.com/ncruces/go-sqlite3 dependency to go.mod using: go get github.com/ncruces/go-sqlite3","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:55.793334-05:00","created_by":"matthew","updated_at":"2026-01-10T09:42:37.185342-05:00","closed_at":"2026-01-10T09:42:37.185342-05:00","close_reason":"Dependency will be properly added when db.go imports it - standard Go workflow","dependencies":[{"issue_id":"ac-6n7","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.71691-05:00","created_by":"matthew"}]}
{"id":"ac-6t8","title":"Implement Destroy Work confirmation","description":"Add 'd' keybinding to destroy selected work. Show confirmation dialog with work details. Call work destroy command on confirm. Handle cleanup and list refresh.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:27.268578-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.970357-05:00","closed_at":"2026-01-13T20:05:36.970357-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-6t8","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.168097-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-6t8","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:03.80082-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-6w4","title":"Modify cmd/run.go to ensure orchestrator and remove task spawning","description":"Replace processTaskInWork() with orchestrator resilience check. Call EnsureWorkOrchestrator() instead of spawning individual task tabs. Remove old task spawning logic.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:13.101665-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:50:42.468922-05:00","closed_at":"2026-01-12T17:50:42.468924-05:00","dependencies":[{"issue_id":"ac-6w4","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.189302-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-6w4","depends_on_id":"ac-h06","type":"blocks","created_at":"2026-01-12T17:29:37.241678-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-6zj","title":"Document co task reset command for restarting stuck tasks","description":"The co task reset command exists but is not documented. Add documentation explaining how to use it to restart stuck or failed tasks (resets status from processing/failed back to pending).","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T10:00:20.858671-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:27:41.805364-05:00","closed_at":"2026-01-13T11:27:41.805364-05:00","close_reason":"Added Task Commands section to CLAUDE.md documenting co task list, show, delete, and reset commands"}
{"id":"ac-6zo","title":"Create cmd/complete.go subcommand","description":"Create cmd/complete.go implementing:\n- co complete \u003cbead-id\u003e [--pr \u003curl\u003e]\n- Called by Claude Code when task is done\n- Updates SQLite status to completed\n- Optionally records PR URL","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.455048-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.518884-05:00","closed_at":"2026-01-10T09:45:02.518884-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-6zo","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.721222-05:00","created_by":"matthew"},{"issue_id":"ac-6zo","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.454068-05:00","created_by":"matthew"}]}
{"id":"ac-6zu","title":"Make TrackingDBPath method private in Project struct","description":"The TrackingDBPath method in internal/project/project.go should be made private if it's only used internally.\n\n**File to modify:** `internal/project/project.go`\n\n**Change:**\n- Rename `TrackingDBPath` to `trackingDBPath` (lowercase first letter)\n- Update all internal call sites within the package\n\n**Current code:**\n```go\n// TrackingDBPath returns the path to the tracking database.\nfunc (p *Project) TrackingDBPath() string {\n    return filepath.Join(p.Root, ConfigDir, TrackingDB)\n}\n```\n\n**After:**\n```go\n// trackingDBPath returns the path to the tracking database.\nfunc (p *Project) trackingDBPath() string {\n    return filepath.Join(p.Root, ConfigDir, TrackingDB)\n}\n```\n\nNote: First verify that this method is not used outside the project package. The OpenDB method uses TrackingDBPath internally and that usage should be updated.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T15:08:53.050515-05:00","created_by":"matthew","updated_at":"2026-01-11T19:33:54.094714-05:00","closed_at":"2026-01-11T16:09:07.338786-05:00"}
{"id":"ac-7dx","title":"Build Details panel with context-sensitive content","description":"Show details based on selected item: work details (branch, status, PR URL, tasks list), bead details (title, description, dependencies), task details (type, status, beads). Render nested lists for tasks within works.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:24.563341-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.972485-05:00","closed_at":"2026-01-13T20:05:36.972485-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-7dx","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.83862-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-7dx","depends_on_id":"ac-blu","type":"blocks","created_at":"2026-01-13T13:33:03.375668-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-7dx","depends_on_id":"ac-dib","type":"blocks","created_at":"2026-01-13T13:33:03.487768-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-7en","title":"co run should process new pending tasks even if work was previously completed","description":"After running co plan, co run, co plan, a second co run says 'Work is already completed' instead of processing newly planned tasks. The run command should check for pending tasks rather than just work status. See cmd/run.go:395-399","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T18:10:58.524405-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T18:38:44.518587-05:00","closed_at":"2026-01-11T18:38:44.518587-05:00","close_reason":"Fixed co run to check for pending tasks instead of work status"}
{"id":"ac-7jd","title":"Remove unused planAutoGroupForWork function","description":"The planAutoGroupForWork function in work_automated.go:293 is still defined but never called in the new flow.\n\nThe new code creates one implement task per bead directly in runAutomatedWorkflow. Either:\n1. Remove planAutoGroupForWork entirely\n2. Integrate it to enable intelligent bead grouping based on complexity estimates\n\nCurrently the comment says 'More sophisticated grouping would use complexity estimates' but doesn't use the existing function.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:34.855281-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T18:49:42.502701-05:00","closed_at":"2026-01-12T18:49:42.502701-05:00","close_reason":"Removed the unused planAutoGroupForWork function from work_automated.go"}
{"id":"ac-7pu","title":"Add database migrations for automated workflow","description":"Add automated_bead_id column to works table and review_iteration column to tasks table. Create migration file 006_automated_workflow.sql.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:39.264148-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.084616-05:00","closed_at":"2026-01-11T21:02:41.954755-05:00","dependencies":[{"issue_id":"ac-7pu","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:21.959736-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-7tz","title":"Modify internal/claude/claude.go for task-based execution","description":"Update RunInProject() to take task ID and list of beads instead of single bead. Change pane naming to task-\u003ctask-id\u003e. Update database polling to check task completion (all beads done). Build multi-bead prompt with instructions for completing each bead individually.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:34.186954-05:00","created_by":"matthew","updated_at":"2026-01-10T11:53:20.530204-05:00","closed_at":"2026-01-10T11:53:20.530204-05:00","close_reason":"Added task-based execution support to Claude runner","dependencies":[{"issue_id":"ac-7tz","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.213359-05:00","created_by":"matthew"},{"issue_id":"ac-7tz","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.307864-05:00","created_by":"matthew"}]}
{"id":"ac-7upw","title":"it should be possible to create a work from multiple issues.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:54:38.218998-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:37:36.941304-05:00","closed_at":"2026-01-14T20:37:36.941304-05:00","close_reason":"Duplicate of ac-j762"}
{"id":"ac-822","title":"Create migration 012 to add down_sql column to schema_migrations","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:43.187807-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:04.263383-05:00","closed_at":"2026-01-13T12:42:04.263383-05:00","close_reason":"Created migration 012 to add name and down_sql columns to schema_migrations table","dependencies":[{"issue_id":"ac-822","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.45334-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-827","title":"Test automated workflow end-to-end","description":"Test with beads with/without dependencies, verify review loop catches and fixes issues, ensure PR is created properly, and traditional mode still works.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:32:03.936345-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.085507-05:00","closed_at":"2026-01-11T21:03:59.730798-05:00","dependencies":[{"issue_id":"ac-827","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:38.339855-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-827","depends_on_id":"ac-rba","type":"blocks","created_at":"2026-01-11T19:33:14.864907-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-84fo","title":"Update work creation to use multiple selected beads","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:14.011851-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:37:14.011851-05:00","dependencies":[{"issue_id":"ac-84fo","depends_on_id":"ac-rf0n","type":"blocks","created_at":"2026-01-14T20:37:24.255475-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-84fo","depends_on_id":"ac-kzg3","type":"blocks","created_at":"2026-01-14T20:37:24.323497-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-879","title":"Fix work ID prefix detection in plan.go","description":"Change line 532 in cmd/plan.go from checking 'work-' prefix to 'w-' prefix. Also simplify to return work ID directly without database check (lines 532-542) and remove pattern matching fallback (lines 544-552).","status":"closed","priority":1,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T09:25:40.770238-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T10:07:38.420475-05:00","closed_at":"2026-01-12T09:39:27.459103-05:00","dependencies":[{"issue_id":"ac-879","depends_on_id":"ac-0pg","type":"blocks","created_at":"2026-01-12T09:26:13.893754-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-89r","title":"Implement Plan Work dialog","description":"Add 'p' keybinding to plan work. Offer choice between manual grouping and auto-group. For manual: allow comma-separated bead grouping. Call plan command with appropriate flags.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:28.119912-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.97497-05:00","closed_at":"2026-01-13T20:05:36.97497-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-89r","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.26616-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-89r","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:03.914945-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8ay","title":"Claude confused about completing tasks - co complete fails","description":"When Claude finishes implementing a task, it tries to use 'co complete' but gets errors. The command fails with both task IDs (w-4we.1) and bead IDs (ac-rvf), saying 'bead not found'. This happens even when the bead is already closed in bd. Claude needs clearer guidance on task completion flow.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T13:14:26.790799-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.90494-05:00","closed_at":"2026-01-11T15:57:40.571758-05:00","dependencies":[{"issue_id":"ac-8ay","depends_on_id":"ac-19j","type":"blocks","created_at":"2026-01-11T13:14:48.474742-05:00","created_by":"matthew"}]}
{"id":"ac-8e8h","title":"Update co work create to assign human names","description":"Modify work creation to assign a human name from the names package when creating new workers","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:36.288304-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:12:19.318792-05:00","closed_at":"2026-01-14T11:12:19.318792-05:00","close_reason":"Integrated names package in work creation - workers now get human names (Alice, Bob, etc.) when created","dependencies":[{"issue_id":"ac-8e8h","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:14.070953-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8e8h","depends_on_id":"ac-bjia","type":"blocks","created_at":"2026-01-14T11:02:28.79904-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8es","title":"Implement automated review-fix loop","description":"Implement runReview() and fixReviewIssues() functions that automatically detect review issues, fix them, and re-review until clean. Maximum 5 iterations with proper error handling.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:54.77764-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.086338-05:00","closed_at":"2026-01-11T21:03:39.295216-05:00","dependencies":[{"issue_id":"ac-8es","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:32.706746-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8es","depends_on_id":"ac-qcz","type":"blocks","created_at":"2026-01-11T19:33:04.426839-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8ev","title":"Refactor claude/runner.go to use zellij package","description":"Update internal/claude/runner.go to use the new zellij package instead of direct exec.Command calls. Remove duplicated zellij code.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:15.912612-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.283391-05:00","closed_at":"2026-01-13T13:14:41.283391-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-8ev","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:41.959907-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8ev","depends_on_id":"ac-8hf","type":"blocks","created_at":"2026-01-13T13:03:57.482697-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8ev","depends_on_id":"ac-t6g","type":"blocks","created_at":"2026-01-13T13:03:57.633736-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8ev","depends_on_id":"ac-4fu","type":"blocks","created_at":"2026-01-13T13:03:57.740274-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8ev","depends_on_id":"ac-ql4","type":"blocks","created_at":"2026-01-13T13:03:57.847164-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8hf","title":"Implement zellij session management functions","description":"Implement ListSessions(), SessionExists(name), CreateSession(name), and EnsureSession(name) in the zellij package","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:13.111087-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.273744-05:00","closed_at":"2026-01-13T13:14:41.273744-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-8hf","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:37.832969-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8hf","depends_on_id":"ac-gn0","type":"blocks","created_at":"2026-01-13T13:03:53.23135-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8mj","title":"Make co run and co plan non-blocking","description":"Refactor co run and co plan commands to be non-blocking by default, add new co poll command with Charm Bracelet TUI for monitoring task completion","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:07:35.441883-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:31:40.495546-05:00","closed_at":"2026-01-12T17:31:40.495546-05:00","close_reason":"Closed"}
{"id":"ac-8mj.1","title":"Remove polling loop from claude.Run() in runner.go","description":"Remove the entire polling loop (lines 180-236) from claude.Run() function. Always return immediately after spawning Claude command. Database updates will be handled by the co claude wrapper process.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:08:36.794931-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T11:31:00.800049-05:00","closed_at":"2026-01-12T10:21:08.722148-05:00","dependencies":[{"issue_id":"ac-8mj.1","depends_on_id":"ac-8mj","type":"parent-child","created_at":"2026-01-12T10:08:36.796029-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8mj.2","title":"Modify co run to always be non-blocking","description":"Modify processTaskInWork() in cmd/run.go to always skip waiting. Tasks spawn in zellij tabs and return immediately. Remove all blocking behavior.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:08:49.612605-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T11:31:00.801501-05:00","closed_at":"2026-01-12T10:23:14.741516-05:00","dependencies":[{"issue_id":"ac-8mj.2","depends_on_id":"ac-8mj","type":"parent-child","created_at":"2026-01-12T10:08:49.613661-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8mj.3","title":"Modify co plan to spawn background estimation","description":"Make planning non-blocking by creating tasks in database with 'estimation_pending' status. Spawn background process for LLM complexity estimation that updates values asynchronously.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:09:00.985227-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T11:31:00.802857-05:00","closed_at":"2026-01-12T10:25:11.089463-05:00","dependencies":[{"issue_id":"ac-8mj.3","depends_on_id":"ac-8mj","type":"parent-child","created_at":"2026-01-12T10:09:00.986251-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8mj.4","title":"Create database migration for spawn tracking","description":"Create migration 006_async_tracking.sql to add spawned_at and spawn_status columns to tasks table for tracking async execution state.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:09:11.956259-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T11:31:00.807916-05:00","closed_at":"2026-01-12T10:19:34.365821-05:00","dependencies":[{"issue_id":"ac-8mj.4","depends_on_id":"ac-8mj","type":"parent-child","created_at":"2026-01-12T10:09:11.957108-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8mj.5","title":"Create co poll command with Charm Bracelet TUI","description":"Implement new co poll command using Bubble Tea framework for beautiful TUI. Support monitoring work/task progress with live updates, progress bars, spinners, and color-coded status. Include --quiet flag for simple text mode.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:09:23.723469-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T11:31:00.808969-05:00","closed_at":"2026-01-12T10:28:57.341623-05:00","dependencies":[{"issue_id":"ac-8mj.5","depends_on_id":"ac-8mj","type":"parent-child","created_at":"2026-01-12T10:09:23.724531-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8qe","title":"Create internal/zellij package","description":"# Plan: Create internal/zellij Package\n\n## Overview\nExtract all zellij-related code from `internal/claude/runner.go` into a dedicated `internal/zellij/` package. This will provide clean abstractions for session, tab, and pane management with proper typing and error handling.\n\n## Current State\nAll zellij commands are scattered in `internal/claude/runner.go`:\n- Session management: `list-sessions`, create session with `-s`\n- Tab operations: `new-tab`, `go-to-tab-name`, `query-tab-names`, `close-tab`\n- Pane control: `write` (ASCII codes), `write-chars` (text)\n\n## Implementation Plan\n\n### Phase 1: Core Package Structure\n1. Create `internal/zellij/zellij.go` with Client struct and core types\n2. Define Session, Tab types with methods\n3. Add configuration options (timeouts, etc.)\n\n### Phase 2: Session Management\n4. Implement `ListSessions()` - list all zellij sessions\n5. Implement `SessionExists(name)` - check if session exists\n6. Implement `CreateSession(name)` - create a new session\n7. Implement `EnsureSession(name)` - create session if not exists\n\n### Phase 3: Tab Management\n8. Implement `CreateTab(session, name, cwd)` - create new tab\n9. Implement `SwitchToTab(session, name)` - switch to tab by name\n10. Implement `QueryTabNames(session)` - list all tab names\n11. Implement `TabExists(session, name)` - check if tab exists\n12. Implement `CloseTab(session)` - close current tab\n\n### Phase 4: Pane Input Control\n13. Implement `WriteASCII(session, code)` - write ASCII code (Ctrl+C, Enter, etc.)\n14. Implement `WriteChars(session, text)` - write text to pane\n15. Implement `SendCtrlC(session)` - convenience for interrupt\n16. Implement `SendEnter(session)` - convenience for enter key\n17. Implement `ExecuteCommand(session, cmd)` - write command + enter\n\n### Phase 5: High-Level Operations\n18. Implement `TerminateProcess(session)` - send Ctrl+C twice with delay\n19. Implement `ClearAndExecute(session, cmd)` - clear line and run command\n\n### Phase 6: Integration\n20. Update `internal/claude/runner.go` to use new zellij package\n21. Remove duplicated zellij code from runner.go\n22. Add unit tests for zellij package\n\n## API Design\n\n```go\npackage zellij\n\ntype Client struct {\n    // Configuration\n}\n\nfunc New() *Client\n\n// Session management\nfunc (c *Client) ListSessions(ctx context.Context) ([]string, error)\nfunc (c *Client) SessionExists(ctx context.Context, name string) (bool, error)\nfunc (c *Client) CreateSession(ctx context.Context, name string) error\nfunc (c *Client) EnsureSession(ctx context.Context, name string) error\n\n// Tab management\nfunc (c *Client) CreateTab(ctx context.Context, session, name, cwd string) error\nfunc (c *Client) SwitchToTab(ctx context.Context, session, name string) error\nfunc (c *Client) QueryTabNames(ctx context.Context, session string) ([]string, error)\nfunc (c *Client) TabExists(ctx context.Context, session, name string) (bool, error)\nfunc (c *Client) CloseTab(ctx context.Context, session string) error\n\n// Pane control\nfunc (c *Client) WriteASCII(ctx context.Context, session string, code int) error\nfunc (c *Client) WriteChars(ctx context.Context, session, text string) error\nfunc (c *Client) SendCtrlC(ctx context.Context, session string) error\nfunc (c *Client) SendEnter(ctx context.Context, session string) error\nfunc (c *Client) ExecuteCommand(ctx context.Context, session, cmd string) error\n\n// High-level operations\nfunc (c *Client) TerminateProcess(ctx context.Context, session string) error\nfunc (c *Client) ClearAndExecute(ctx context.Context, session, cmd string) error\n```\n\n## Benefits\n- Single place for all zellij interactions\n- Testable (can mock the client)\n- Type-safe API instead of raw exec.Command calls\n- Consistent error handling\n- Reusable across the codebase","status":"closed","priority":2,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:02:30.93037-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:45.984232-05:00","closed_at":"2026-01-13T13:14:45.984232-05:00","close_reason":"Completed: Created internal/zellij package with type-safe API for session, tab, and pane management. Refactored internal/claude/runner.go to use the new package. All child beads completed."}
{"id":"ac-8t3g","title":"Update SQL queries to remove zellij references","description":"Remove zellij_session and zellij_pane from SQL queries in sql/queries/tasks.sql and regenerate SQLC","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:18.394972-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:25:17.310787-05:00","closed_at":"2026-01-14T10:25:17.310787-05:00","close_reason":"Removed zellij references from SQL queries and regenerated SQLC","dependencies":[{"issue_id":"ac-8t3g","depends_on_id":"ac-bj0e","type":"parent-child","created_at":"2026-01-14T10:01:33.189888-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8t3g","depends_on_id":"ac-ohv9","type":"blocks","created_at":"2026-01-14T10:01:39.776237-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8wa","title":"Add Work concept to co (3-tier hierarchy: Work → Tasks → Beads)","description":"# Implementation Plan: Add Work Concept to co\n\n## Overview\nAdd a third tier \"Work\" to create hierarchy: **Work → Tasks → Beads**\n- **Work**: Controls git worktree, feature branch, and zellij tab\n- **Tasks**: Run as Claude Code sessions (panes) within work's tab\n- **Beads**: Individual issues solved within tasks\n\n## Architecture Changes\n\n### Current Model (2-tier)\n```\nTasks → Beads\n- Tasks control worktrees and branches\n- Tasks have zellij panes\n- Beads are grouped into tasks\n```\n\n### New Model (3-tier)\n```\nWork → Tasks → Beads\n- Work controls worktree and branch\n- Work has zellij tab\n- Tasks run sequentially in work's tab (no separate panes)\n- Beads are grouped into tasks\n```\n\n### Directory Structure\n```\n\u003cproject-dir\u003e/\n├── .co/\n│   ├── config.toml      # Project configuration\n│   └── tracking.db      # SQLite coordination database\n├── main/                # Main worktree (symlink or clone)\n│   └── .beads/          # Beads issue tracker\n└── \u003cwork-id\u003e/           # Work subdirectory\n    └── tree/            # Git worktree for this work\n        └── \u003ccode\u003e       # Actual source code\n```\n\nCommands run within `\u003cwork-id\u003e/` automatically operate on that work.\nCommands run elsewhere can use `--work=\u003cwork-id\u003e` to specify the work.\n\n## Implementation Steps\n\n### 1. Database Schema Updates\n\n#### Create migration: `internal/db/migrations/002_add_works.sql`\n```sql\n-- UP\nCREATE TABLE works (\n    id TEXT PRIMARY KEY,\n    status TEXT NOT NULL DEFAULT 'pending',\n    zellij_session TEXT,\n    zellij_tab TEXT,\n    worktree_path TEXT,\n    branch_name TEXT,\n    pr_url TEXT,\n    error_message TEXT,\n    started_at DATETIME,\n    completed_at DATETIME,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_works_status ON works(status);\n\n-- Add work_id to tasks table\nALTER TABLE tasks ADD COLUMN work_id TEXT REFERENCES works(id);\nCREATE INDEX idx_tasks_work_id ON tasks(work_id);\n\n-- Remove worktree_path from tasks (now managed by work)\nALTER TABLE tasks DROP COLUMN worktree_path;\n\n-- Junction table for work-task relationship (for flexibility)\nCREATE TABLE work_tasks (\n    work_id TEXT NOT NULL,\n    task_id TEXT NOT NULL,\n    position INTEGER DEFAULT 0,\n    PRIMARY KEY (work_id, task_id),\n    FOREIGN KEY (work_id) REFERENCES works(id),\n    FOREIGN KEY (task_id) REFERENCES tasks(id)\n);\n\nCREATE INDEX idx_work_tasks_work_id ON work_tasks(work_id);\nCREATE INDEX idx_work_tasks_task_id ON work_tasks(task_id);\n\n-- DOWN\nDROP TABLE work_tasks;\nDROP INDEX idx_tasks_work_id;\nALTER TABLE tasks DROP COLUMN work_id;\nALTER TABLE tasks ADD COLUMN worktree_path TEXT;\nDROP INDEX idx_works_status;\nDROP TABLE works;\n```\n\n#### Update reference schema: `internal/db/schema.sql`\n- Add works table definition\n- Update tasks table (add work_id, remove worktree_path)\n- Add work_tasks junction table\n\n### 2. SQLC Query Updates\n\n#### Create: `sql/queries/works.sql`\n```sql\n-- name: CreateWork :exec\nINSERT INTO works (id, status, worktree_path, branch_name)\nVALUES (?, ?, ?, ?);\n\n-- name: StartWork :exec\nUPDATE works SET\n    status = 'processing',\n    zellij_session = ?,\n    zellij_tab = ?,\n    started_at = CURRENT_TIMESTAMP\nWHERE id = ?;\n\n-- name: CompleteWork :exec\nUPDATE works SET\n    status = 'completed',\n    pr_url = ?,\n    completed_at = CURRENT_TIMESTAMP\nWHERE id = ?;\n\n-- name: FailWork :exec\nUPDATE works SET\n    status = 'failed',\n    error_message = ?,\n    completed_at = CURRENT_TIMESTAMP\nWHERE id = ?;\n\n-- name: GetWork :one\nSELECT * FROM works WHERE id = ?;\n\n-- name: ListWorks :many\nSELECT * FROM works ORDER BY created_at;\n\n-- name: GetLastWorkID :one\nSELECT id FROM works\nORDER BY created_at DESC\nLIMIT 1;\n\n-- name: AddTaskToWork :exec\nINSERT INTO work_tasks (work_id, task_id, position)\nVALUES (?, ?, ?);\n\n-- name: GetWorkTasks :many\nSELECT t.* FROM tasks t\nJOIN work_tasks wt ON t.id = wt.task_id\nWHERE wt.work_id = ?\nORDER BY wt.position;\n\n-- name: GetWorkByDirectory :one\nSELECT * FROM works\nWHERE worktree_path LIKE ?;\n```\n\n#### Update: `sql/queries/tasks.sql`\n- Add work_id parameter to CreateTask\n- Remove worktree_path from StartTask\n- Add queries for work-related operations\n\n### 3. Go Model Updates\n\n#### Create: `internal/db/work.go`\n```go\npackage db\n\ntype Work struct {\n    ID            string\n    Status        string\n    ZellijSession string\n    ZellijTab     string\n    WorktreePath  string\n    BranchName    string\n    PRURL         string\n    ErrorMessage  string\n    StartedAt     *time.Time\n    CompletedAt   *time.Time\n    CreatedAt     time.Time\n}\n\n// Methods: CreateWork, StartWork, CompleteWork, FailWork, GetWork, ListWorks\n// AddTaskToWork, GetWorkTasks, IsWorkCompleted\n```\n\n#### Update: `internal/db/task.go`\n- Add WorkID field to Task struct\n- Update CreateTask to accept work_id\n- Remove worktree management from StartTask\n\n### 4. Planning Phase Updates\n\n#### Update: `cmd/plan.go`\n\nNew planning workflow with context-aware work detection:\n1. Determine work context (from flag or current directory)\n2. Fetch ready beads from beads system\n3. Group beads into tasks (existing logic)\n4. Create tasks with work_id reference\n5. Create task_beads relationships\n\nPlanning modes:\n- `co plan` - Plan tasks for current work (when in work dir)\n- `co plan --work \u003cid\u003e` - Plan tasks for specified work\n- `co plan --auto-group` - Auto-group beads into tasks\n- `co plan bead1,bead2 bead3` - Manual grouping\n\nExample workflows:\n```bash\n# Method 1: Work from within work directory\nco work create             # Creates work-1\ncd work-1\nco plan --auto-group       # Plans for work-1\nco run                     # Runs work-1\n\n# Method 2: Specify work explicitly\nco work create             # Creates work-2\nco plan --work work-2 bead-abc,bead-def\nco run --work work-2\n\n# Method 3: Work from worktree\nco work create             # Creates work-3\ncd work-3/tree\nco plan                    # Detects work context\ngit status                 # In work/work-3 branch\n```\n\n#### Create: `internal/task/work_planner.go`\n- WorkPlanner interface similar to TaskPlanner\n- Groups tasks into works based on:\n  - Complexity budgets\n  - Dependencies between tasks\n  - Logical groupings\n\n### 5. Execution Phase Updates\n\n#### Major update: `cmd/run.go`\n\nChange execution from task-centric to work-centric with context awareness:\n\n```go\nfunc runRun(cmd *cobra.Command, args []string) {\n    workID := cmd.Flag(\"work\").Value.String()\n    if workID == \"\" {\n        workID, _ = getCurrentWork()\n    }\n\n    if workID != \"\" {\n        // Run specific work\n        work := database.GetWork(workID)\n        processWork(work)\n    } else {\n        // Run all pending works\n        works := database.ListWorks(StatusPending)\n        sortedWorks := sortWorksByDependency(works)\n        for _, work := range sortedWorks {\n            processWork(work)\n        }\n    }\n}\n\nfunc processWork(work Work) {\n    // 1. Worktree already exists (created during co work create)\n    worktreePath := work.WorktreePath\n\n    // 2. Create zellij tab for work\n    zellijTab := createZellijTab(work.ID)\n\n    // 3. Start work in database\n    database.StartWork(work.ID, zellijSession, zellijTab)\n\n    // 4. Get tasks for this work\n    tasks := database.GetWorkTasks(work.ID)\n\n    // 5. Process each task sequentially in work's tab\n    for _, task := range tasks {\n        processTaskInWork(task, work, worktreePath, zellijTab)\n    }\n\n    // 6. Create PR for entire work\n    createWorkPR(work, completedTasks)\n\n    // 7. Complete work or handle failures\n    database.CompleteWork(work.ID, prURL)\n}\n\nfunc processTaskInWork(task Task, work Work, worktreePath string, zellijTab string) {\n    // 1. Switch to work's tab\n    switchToZellijTab(zellijTab)\n\n    // 2. Run Claude in work's worktree with task context\n    // Tasks execute sequentially in the same tab, no separate panes\n    result := claude.Run(prompt, worktreePath, zellijSession, zellijTab)\n\n    // 3. Update task status based on result\n    // ...\n}\n```\n\n### 6. Claude Runner Updates\n\n#### Update: `internal/claude/runner.go`\n\nModify zellij management:\n- Works create tabs: `zellij action new-tab --name work-\u003cid\u003e`\n- Tasks run sequentially in the work's tab (no separate panes)\n- Each Claude session completes before the next task starts\n- Update monitoring to handle sequential task execution\n\n### 7. New Work Commands\n\n#### Create: `cmd/work.go`\n\nImplement work subcommands:\n```go\n// co work create - Create work with auto-generated ID\n// co work list - List all works with status\n// co work show [\u003cid\u003e] - Show work details (current dir or specified)\n// co work destroy \u003cid\u003e - Delete work subdirectory and database records\n```\n\nCommand structure using cobra:\n```go\nvar workCmd = \u0026cobra.Command{\n    Use:   \"work\",\n    Short: \"Manage work units\",\n}\n\nvar workCreateCmd = \u0026cobra.Command{\n    Use:   \"create\",\n    Short: \"Create a new work unit with auto-generated ID\",\n    Args:  cobra.NoArgs,\n    Run:   runWorkCreate,\n}\n\nvar workListCmd = \u0026cobra.Command{\n    Use:   \"list\",\n    Short: \"List all work units\",\n    Run:   runWorkList,\n}\n\nvar workShowCmd = \u0026cobra.Command{\n    Use:   \"show [\u003cid\u003e]\",\n    Short: \"Show work details (current directory or specified)\",\n    Args:  cobra.MaximumNArgs(1),\n    Run:   runWorkShow,\n}\n\nvar workDestroyCmd = \u0026cobra.Command{\n    Use:   \"destroy \u003cid\u003e\",\n    Short: \"Destroy a work unit and its worktree\",\n    Args:  cobra.ExactArgs(1),\n    Run:   runWorkDestroy,\n}\n```\n\n#### Work Creation Logic\n```go\nfunc runWorkCreate(cmd *cobra.Command, args []string) {\n    // 1. Generate work ID automatically\n    workID := generateWorkID() // e.g., \"work-1\", \"work-2\", etc.\n\n    // 2. Create work subdirectory\n    workDir := filepath.Join(projectDir, workID)\n    os.Mkdir(workDir, 0755)\n\n    // 3. Create git worktree inside work directory\n    worktreePath := filepath.Join(workDir, \"tree\")\n    branchName := fmt.Sprintf(\"work/%s\", workID)\n    git.CreateWorktree(worktreePath, branchName)\n\n    // 4. Create work record in database\n    database.CreateWork(workID, worktreePath, branchName)\n\n    // 5. Initialize mise in worktree if needed\n    if hasMiseConfig(worktreePath) {\n        mise.Initialize(worktreePath)\n    }\n\n    fmt.Printf(\"Created work: %s\\n\", workID)\n    fmt.Printf(\"Directory: %s\\n\", workDir)\n    fmt.Printf(\"Branch: %s\\n\", branchName)\n}\n\nfunc generateWorkID() string {\n    // Get next available work ID from database\n    lastID := database.GetLastWorkID()\n    nextNum := 1\n    if lastID != \"\" {\n        // Parse number from \"work-N\" format\n        parts := strings.Split(lastID, \"-\")\n        if len(parts) \u003e 1 {\n            num, _ := strconv.Atoi(parts[1])\n            nextNum = num + 1\n        }\n    }\n    return fmt.Sprintf(\"work-%d\", nextNum)\n}\n```\n\n#### Context-Aware Commands\nCommands detect work context from current directory:\n```go\nfunc getCurrentWork() (string, error) {\n    // Check if we're in a work subdirectory\n    cwd, _ := os.Getwd()\n    if strings.Contains(cwd, \"/tree\") {\n        // Extract work ID from path: /project/work-id/tree/...\n        parts := strings.Split(cwd, \"/\")\n        for i, part := range parts {\n            if part == \"tree\" \u0026\u0026 i \u003e 0 {\n                return parts[i-1], nil\n            }\n        }\n    }\n    return \"\", fmt.Errorf(\"not in a work directory\")\n}\n\n// Use in commands:\nfunc runPlan(cmd *cobra.Command, args []string) {\n    workID := cmd.Flag(\"work\").Value.String()\n    if workID == \"\" {\n        workID, _ = getCurrentWork()\n    }\n    if workID == \"\" {\n        return fmt.Errorf(\"no work context: use --work or run from work directory\")\n    }\n    // ... proceed with planning for this work\n}\n```\n\n### 8. Key Files to Modify\n\nCritical files requiring updates:\n- `/Users/matthew/co/internal/db/migrations/` - Add 002_add_works.sql\n- `/Users/matthew/co/internal/db/schema.sql` - Update reference schema\n- `/Users/matthew/co/sql/queries/` - Add works.sql, update tasks.sql\n- `/Users/matthew/co/cmd/plan.go` - Create works before tasks\n- `/Users/matthew/co/cmd/run.go` - Process works instead of tasks\n- `/Users/matthew/co/internal/claude/runner.go` - Tab/pane hierarchy\n- `/Users/matthew/co/internal/db/` - Add work.go, update task.go\n\n## Testing \u0026 Verification\n\n### Manual Testing Steps\n1. Build the updated co binary\n2. Create a test project: `co proj create test-work github.com/test/repo`\n3. Create work units and plan tasks:\n   ```bash\n   # Create first work\n   co work create      # Returns: Created work: work-1\n   cd work-1\n   co plan --auto-group\n\n   # Create second work\n   cd ..\n   co work create      # Returns: Created work: work-2\n   co plan --work work-2 bead-abc,bead-def\n   ```\n4. Run execution:\n   ```bash\n   co run --work work-1  # Run specific work\n   # OR\n   cd work-1 \u0026\u0026 co run   # Run from work directory\n   # OR\n   co run                # Run all pending works\n   ```\n5. Verify behavior:\n   - Work subdirectories created: `work-1/`, `work-2/`\n   - Git worktrees at: `work-1/tree/`, `work-2/tree/`\n   - Feature branches: `work/work-1`, `work/work-2`\n   - Zellij tabs created per work (no panes for tasks)\n   - Tasks run sequentially in work's tab\n   - One PR per work containing all task changes\n6. Check database state: `sqlite3 .co/tracking.db`\n   ```sql\n   SELECT * FROM works;\n   SELECT * FROM tasks WHERE work_id = 'work-1';\n   SELECT * FROM work_tasks;\n   ```\n\n### Expected Behavior\n- One git worktree per work (not per task)\n- One feature branch per work\n- One zellij tab per work\n- Multiple panes (one per task) within work's tab\n- One PR per work containing all task changes\n- Tasks within a work share the same codebase state\n\n## Migration Notes\n\nSince backwards compatibility is not required:\n- Existing projects will need to be recreated\n- No data migration needed\n- Clean database schema without legacy fields","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T18:16:22.879826-05:00","created_by":"matthew","updated_at":"2026-01-10T21:18:23.444661-05:00","closed_at":"2026-01-10T21:18:23.444661-05:00","close_reason":"All 9 dependent implementation tasks completed: database schema (ac-ymr), Go models (ac-s4d), SQLC queries (ac-61b), work commands (ac-dzl), planning phase (ac-129), execution phase (ac-pjw), Claude runner (ac-1gt), documentation (ac-ags), and testing (ac-rnx)","dependencies":[{"issue_id":"ac-8wa","depends_on_id":"ac-ymr","type":"blocks","created_at":"2026-01-10T18:19:07.411462-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-61b","type":"blocks","created_at":"2026-01-10T18:19:07.531516-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-s4d","type":"blocks","created_at":"2026-01-10T18:19:07.652075-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-129","type":"blocks","created_at":"2026-01-10T18:19:07.766023-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-pjw","type":"blocks","created_at":"2026-01-10T18:19:07.880426-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-1gt","type":"blocks","created_at":"2026-01-10T18:19:07.995124-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-dzl","type":"blocks","created_at":"2026-01-10T18:19:08.09025-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-rnx","type":"blocks","created_at":"2026-01-10T18:19:08.200347-05:00","created_by":"matthew"},{"issue_id":"ac-8wa","depends_on_id":"ac-ags","type":"blocks","created_at":"2026-01-10T18:19:49.65032-05:00","created_by":"matthew"}]}
{"id":"ac-8zo","title":"Update SQL queries and migration.go to store/read down_sql","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:44.05268-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:05.023832-05:00","closed_at":"2026-01-13T12:42:05.023832-05:00","close_reason":"Updated SQL queries and migration.go to store/read down_sql from database for rollback support","dependencies":[{"issue_id":"ac-8zo","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.568531-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-8zo","depends_on_id":"ac-822","type":"blocks","created_at":"2026-01-13T12:26:14.307171-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-8zr","title":"Add baseBranch parameter to worktree.Create","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:41.081765-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:41:55.038615-05:00","closed_at":"2026-01-13T12:41:55.038615-05:00","close_reason":"Added baseBranch parameter to worktree.Create function","dependencies":[{"issue_id":"ac-8zr","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.130447-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-93t","title":"Work branches should set upstream on creation","description":"When 'co work create' creates a new work branch, it should also push the branch to origin and set up upstream tracking. Currently, users get 'no upstream branch' error when trying to push later.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T13:13:26.437741-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.905686-05:00","closed_at":"2026-01-11T15:57:34.732627-05:00","dependencies":[{"issue_id":"ac-93t","depends_on_id":"ac-0lx","type":"blocks","created_at":"2026-01-11T13:14:09.358298-05:00","created_by":"matthew"}]}
{"id":"ac-947","title":"Refactor cmd/work_automated.go to use git/worktree library functions","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:42.432932-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:41:57.034276-05:00","closed_at":"2026-01-13T12:41:57.034276-05:00","close_reason":"Refactored cmd/work_automated.go to use worktree and git library functions","dependencies":[{"issue_id":"ac-947","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.349311-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-947","depends_on_id":"ac-8zr","type":"blocks","created_at":"2026-01-13T12:26:14.193229-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-956","title":"Consolidate zellij-task model with work-based orchestrator","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:27:38.949732-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:58:04.138973-05:00","closed_at":"2026-01-12T17:58:04.138973-05:00","close_reason":"All child issues completed. Epic implemented: task dependencies, work-based orchestrator, removed workflow_state."}
{"id":"ac-9ame","title":"Extract shared TUI code to tui_shared.go","description":"Extract from cmd/tui.go: lipgloss styles (tuiTitleStyle, tuiPanelStyle, etc.), helper functions (statusIcon, formatDuration), data types (beadItem renamed to issueItem), data fetching (fetchPollData, fetchBeadsWithFilters)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:36.980194-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:15:12.064711-05:00","closed_at":"2026-01-14T11:15:12.064711-05:00","close_reason":"Created tui_shared.go with shared styles, types (Panel, ViewMode, beadItem, beadFilters), and helper functions (statusIcon, statusIconPlain, statusStyled)","dependencies":[{"issue_id":"ac-9ame","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:14.212365-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9bwm","title":"Refactor TUI destroyWork to call logic directly instead of shelling out","description":"In cmd/tui_work.go, destroyWork() shells out to 'co work destroy'. Should call the underlying runWorkDestroy logic directly for better error handling and to avoid subprocess overhead.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:22:37.205187-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:00:19.295818-05:00","closed_at":"2026-01-14T20:00:19.295818-05:00","close_reason":"Extracted DestroyWork function in cmd/work.go. Refactored runWorkDestroy to use DestroyWork. Updated tui_work.go destroyWork to call DestroyWork directly instead of shelling out."}
{"id":"ac-9hx","title":"Implement main run command orchestration loop","description":"Update cmd/run.go to orchestrate the full workflow:\n1. Get ready beads (with --limit and --bead filters)\n2. For each bead:\n   a. Create branch: bead/\u003cbead-id\u003e\n   b. Run Claude with bead prompt\n   c. If changes: commit, push, create PR, merge PR\n   d. Close bead with reason\n   e. Cleanup branch\n3. Stop on first error\n\nFlags:\n- --branch, -b: target branch (default: main)\n- --bead: specific bead ID only\n- --limit, -n: max beads to process\n- --dry-run: show plan without executing\n- --no-merge: create PRs but don't merge\n\nAcceptance criteria:\n- Full workflow executes for a single bead\n- --dry-run shows plan without side effects\n- Stops immediately on error","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:19:01.843065-05:00","created_by":"matthew","updated_at":"2026-01-09T20:48:31.190588-05:00","closed_at":"2026-01-09T20:48:31.190588-05:00","close_reason":"Implemented full orchestration loop in cmd/run.go with --branch, --bead, --limit, --dry-run, and --no-merge flags. Workflow: create branch, run Claude, check commits, push, close bead, create PR, merge.","dependencies":[{"issue_id":"ac-9hx","depends_on_id":"ac-f6p","type":"blocks","created_at":"2026-01-09T20:19:49.398102-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-tia","type":"blocks","created_at":"2026-01-09T20:20:19.978523-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-5n9","type":"blocks","created_at":"2026-01-09T20:20:20.067903-05:00","created_by":"matthew"},{"issue_id":"ac-9hx","depends_on_id":"ac-b1v","type":"blocks","created_at":"2026-01-09T20:20:20.147985-05:00","created_by":"matthew"}]}
{"id":"ac-9obk","title":"Implement Plan Mode (tui_plan.go)","description":"Create tui_plan.go: left panel with issues list (reuse bead list code), right panel with Claude session launcher via zellij, Enter to start planning session, n to create new issue, filtering/sorting","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:54.485732-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:23:40.899949-05:00","closed_at":"2026-01-14T11:23:40.899949-05:00","close_reason":"Implemented Plan Mode in cmd/tui_plan.go with issue list, filtering (o/c/r), sorting (s), search (/), label filter (L), create issues (n), create epics (e), close issues (x), and launch planning session (Enter). Uses fetchBeadsWithFilters from tui.go.","dependencies":[{"issue_id":"ac-9obk","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:16.03813-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-9obk","depends_on_id":"ac-ykn2","type":"blocks","created_at":"2026-01-14T11:02:30.949698-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9qk","title":"estimate task ids don't use the short format","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T11:08:51.771705-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:42:03.274145-05:00","closed_at":"2026-01-13T11:42:03.274145-05:00","close_reason":"Changed estimate task IDs to use sequential numbering (GetNextTaskNumber) instead of timestamps. Updated complexity.go and work_automated.go to use the format 'workID.N' instead of 'workID.estimate-timestamp'."}
{"id":"ac-9qv","title":"Add co sync command to pull from upstream in repositories","description":"Add a new 'co sync' command that performs git pull in each repository (main and work worktrees) to sync the local git state with upstream. This ensures all local branches are up-to-date with their remote counterparts.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T13:19:06.705716-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.906368-05:00","closed_at":"2026-01-11T15:56:48.810439-05:00"}
{"id":"ac-9ts","title":"Add proper context handling and control-C cleanup in co commands","description":"Commands use context.Background() instead of proper context with signal handling. Need to add signal handlers for graceful shutdown and cleanup when user presses Ctrl-C.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T15:41:04.0931-05:00","created_by":"matthew","updated_at":"2026-01-11T21:04:20.087142-05:00","closed_at":"2026-01-11T20:16:10.389422-05:00"}
{"id":"ac-9ts.1","title":"Create centralized signal context package","description":"Create internal/signal/signal.go with:\n- WithSignalCancel(ctx context.Context) (context.Context, context.CancelFunc) - wraps context with SIGINT/SIGTERM handling\n- BlockSignals() / UnblockSignals() - for critical sections that shouldn't be interrupted\n- Context utilities for consistent signal setup","status":"closed","priority":1,"issue_type":"feature","owner":"matthew@customer.io","created_at":"2026-01-11T19:03:43.712393-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.087974-05:00","closed_at":"2026-01-11T21:02:16.00078-05:00","dependencies":[{"issue_id":"ac-9ts.1","depends_on_id":"ac-9ts","type":"parent-child","created_at":"2026-01-11T19:03:43.713396-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9ts.2","title":"Add context propagation to root command","description":"Modify cmd/root.go to:\n- Create a cancellable context with signal handling in PersistentPreRun\n- Store context in cobra command for subcommands to access\n- Provide helper to retrieve context from command","status":"closed","priority":1,"issue_type":"feature","owner":"matthew@customer.io","created_at":"2026-01-11T19:03:44.038914-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.088801-05:00","closed_at":"2026-01-11T21:02:16.026522-05:00","dependencies":[{"issue_id":"ac-9ts.2","depends_on_id":"ac-9ts","type":"parent-child","created_at":"2026-01-11T19:03:44.039761-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9ts.3","title":"Update cmd/*.go files to use cancellable context","description":"Replace context.Background() with the signal-aware context from root command in:\n- cmd/run.go (13 instances)\n- cmd/work.go (14 instances)\n- cmd/plan.go (14 instances)\n- cmd/task.go (8 instances)\n- cmd/complete.go (5 instances)\n- cmd/estimate.go (5 instances)","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:03:44.357414-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.089589-05:00","closed_at":"2026-01-11T21:02:16.054049-05:00","dependencies":[{"issue_id":"ac-9ts.3","depends_on_id":"ac-9ts","type":"parent-child","created_at":"2026-01-11T19:03:44.358184-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9ts.4","title":"Block signals during critical operations","description":"Add signal blocking for operations that must complete atomically:\n- Worktree creation in work create\n- Database migrations\n- Any multi-step operations that leave inconsistent state if interrupted\n\nFiles to modify:\n- cmd/work.go\n- internal/db/migration.go","status":"closed","priority":2,"issue_type":"feature","owner":"matthew@customer.io","created_at":"2026-01-11T19:03:44.669425-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.090388-05:00","closed_at":"2026-01-11T21:02:16.077831-05:00","dependencies":[{"issue_id":"ac-9ts.4","depends_on_id":"ac-9ts","type":"parent-child","created_at":"2026-01-11T19:03:44.670224-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9ts.5","title":"Consolidate signal handling in cmd/claude.go","description":"Refactor cmd/claude.go to use the new centralized signal handling:\n- Remove duplicate signal handling code\n- Use shared context from root command\n- Keep Claude process management but simplify signal forwarding","status":"closed","priority":3,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:03:44.981483-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.091133-05:00","closed_at":"2026-01-11T21:02:16.097113-05:00","dependencies":[{"issue_id":"ac-9ts.5","depends_on_id":"ac-9ts","type":"parent-child","created_at":"2026-01-11T19:03:44.982243-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-9vp","title":"Create TUI model with panel-based layout structure","description":"Set up the core Bubble Tea model with a 3-panel layout (Works, Beads, Details). Include the basic model struct with panel state, active panel tracking, and viewport dimensions.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:20.418197-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:03:35.691578-05:00","closed_at":"2026-01-13T20:03:35.691578-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-9vp","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.274142-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a08","title":"Delete dead code: layouts.go, layouts_test.go, automated-workflow.kdl","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:46.271433-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:15.054959-05:00","closed_at":"2026-01-13T12:42:15.054959-05:00","close_reason":"Deleted dead code: layouts.go, layouts_test.go, and layouts/ directory","dependencies":[{"issue_id":"ac-a08","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.916382-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a0r","title":"Move co work create --bead orchestration to zellij","description":"Refactor the 7-step automated workflow from CLI process to zellij-side orchestration for better visibility and resilience","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:07:56.52145-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:32:08.02348-05:00","closed_at":"2026-01-12T17:32:08.02348-05:00","close_reason":"Closed"}
{"id":"ac-a0r.1","title":"Create workflow_state table migration","description":"Create migration 007_workflow_state.sql to add workflow_state table for tracking orchestration steps. Table should include work_id, current_step, step_status, step_data (JSON), error_message, and timestamps.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:09:49.586963-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:33:33.332322-05:00","closed_at":"2026-01-12T17:33:33.332322-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-a0r.1","depends_on_id":"ac-a0r","type":"parent-child","created_at":"2026-01-12T10:09:49.587886-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a0r.2","title":"Create co orchestrate command","description":"Implement hidden internal command 'co orchestrate --work \u003cid\u003e --step \u003cn\u003e' that executes one workflow step at a time, updates state in database, and spawns next step via zellij if successful.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:10:00.85551-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:32:15.657398-05:00","closed_at":"2026-01-12T17:32:15.657398-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-a0r.2","depends_on_id":"ac-a0r","type":"parent-child","created_at":"2026-01-12T10:10:00.856313-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a0r.3","title":"Refactor runAutomatedWorkflow into orchestration steps","description":"Refactor work_automated.go runAutomatedWorkflow() into 7 separate step functions: stepCreateWork, stepCollectBeads, stepPlanTasks, stepExecuteTasks, stepWaitCompletion, stepReviewFix, stepCreatePR. Each step should be independently executable and resumable.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:10:13.136284-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:32:16.605151-05:00","closed_at":"2026-01-12T17:32:16.605151-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-a0r.3","depends_on_id":"ac-a0r","type":"parent-child","created_at":"2026-01-12T10:10:13.13722-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a0r.4","title":"Create zellij layout template for automated workflow","description":"Create .co/layouts/automated-workflow.kdl layout file with tabs for orchestrator, work, and monitor. Layout should spawn co orchestrate command in orchestrator tab and co poll in monitor tab.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:10:24.102899-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:33:37.940333-05:00","closed_at":"2026-01-12T17:33:37.940333-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-a0r.4","depends_on_id":"ac-a0r","type":"parent-child","created_at":"2026-01-12T10:10:24.103883-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a0r.5","title":"Test end-to-end orchestrated workflow","description":"Comprehensive testing of the orchestrated workflow including failure recovery, step resumption, parallel workflows, and zellij crash scenarios. Create both unit tests and integration tests.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T10:10:35.302766-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:33:45.23168-05:00","closed_at":"2026-01-12T17:33:45.23168-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-a0r.5","depends_on_id":"ac-a0r","type":"parent-child","created_at":"2026-01-12T10:10:35.30401-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-a35t","title":"Add tests for new work.go and run.go functionality","description":"cmd/plan_test.go was deleted but no replacement tests were added for the new functionality: parseBeadGroups, addBeadGroupsToWork, groupBeadsByWorkBeadGroup, and task creation in co run","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T18:54:18.499669-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T18:58:31.392566-05:00","closed_at":"2026-01-13T18:58:31.392566-05:00","close_reason":"Added comprehensive tests for groupBeadsByWorkBeadGroup in cmd/run_test.go"}
{"id":"ac-ags","title":"Documentation: Update CLAUDE.md and README for Work concept","description":"Update documentation to reflect the new 3-tier hierarchy (Work → Tasks → Beads). Update command examples, workflow descriptions, and architecture diagrams.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:19:37.262111-05:00","created_by":"matthew","updated_at":"2026-01-10T21:42:34.374857-05:00","closed_at":"2026-01-10T21:42:34.374857-05:00","close_reason":"Implemented: Work commands with create/list/show/destroy, work-centric execution in run.go, zellij tab management, documentation updates, and testing completed","dependencies":[{"issue_id":"ac-ags","depends_on_id":"ac-dzl","type":"blocks","created_at":"2026-01-10T18:19:49.765446-05:00","created_by":"matthew"}]}
{"id":"ac-ais","title":"Modify cmd/run.go to use task planner instead of per-bead processing","description":"Add --budget flag (default 70%). Change flow: 1) Fetch beads, 2) Plan tasks via task.Planner, 3) Process each task with processTaskWithWorktree(). Replace processBeadWithWorktree with task-based equivalent. Update dry-run output to show task assignments.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:33.867164-05:00","created_by":"matthew","updated_at":"2026-01-10T12:05:59.030148-05:00","closed_at":"2026-01-10T12:05:59.030148-05:00","close_reason":"Added task-based processing mode with --task and --budget flags","dependencies":[{"issue_id":"ac-ais","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.095451-05:00","created_by":"matthew"},{"issue_id":"ac-ais","depends_on_id":"ac-3wt","type":"blocks","created_at":"2026-01-10T11:35:31.956249-05:00","created_by":"matthew"},{"issue_id":"ac-ais","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.059944-05:00","created_by":"matthew"}]}
{"id":"ac-aof","title":"SQLite tracking and completion subcommands","description":"Replace temp file completion tracking with SQLite database and add CLI subcommands (complete, status, list) that Claude Code can use to mark tasks complete.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T09:34:29.520812-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:18.303813-05:00","closed_at":"2026-01-10T09:47:18.303813-05:00","close_reason":"All child tasks completed: SQLite tracking database (internal/db/), CLI subcommands (complete, status, list), run.go and runner.go DB integration","comments":[{"id":1,"issue_id":"ac-aof","author":"matthew","text":"Feature branch: epic/ac-aof - all child issues should branch from and merge to this branch","created_at":"2026-01-10T14:40:33Z"}]}
{"id":"ac-atn","title":"Add dependency support to plan command","description":"When planning tasks from beads, dependency order is not considered in manual grouping and single-bead modes. Auto-group mode already handles dependencies correctly.\n\n**Requirements:**\n1. Manual grouping: Auto-reorder tasks to respect dependencies (preserve user's bead groupings)\n2. Single-bead mode: Order tasks so dependencies execute first via topological sort\n\n**Use cases:**\n- `co plan child parent` should auto-reorder: parent task created first\n- `co plan` (no args) should create tasks in dependency order","status":"closed","priority":2,"issue_type":"epic","owner":"matthew@customer.io","created_at":"2026-01-11T19:09:45.586646-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:17:47.735139-05:00","closed_at":"2026-01-11T19:17:47.735139-05:00","close_reason":"Added dependency support to plan command: manual grouping auto-reorders tasks, single-bead mode creates tasks in dependency order"}
{"id":"ac-atn.1","title":"Refactor dependency helpers for reuse","description":"Extract dependency graph building and topological sort from `internal/task/planner.go` into shared utilities that can be used by `cmd/plan.go`.\n\n**Files to modify:**\n- `internal/task/planner.go` - Export existing functions (BuildDependencyGraph, TopologicalSort)\n- `internal/task/deps.go` (new) - Shared dependency utilities\n\n**Functions to extract/export:**\n- `buildDependencyGraph()` → `BuildDependencyGraph()`\n- `topologicalSort()` → `TopologicalSort()`\n- `DependencyGraph` struct (exported)","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:09:56.357126-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:13:56.568073-05:00","closed_at":"2026-01-11T19:13:56.568073-05:00","close_reason":"Extracted BuildDependencyGraph and TopologicalSort into internal/task/deps.go with exported DependencyGraph struct","dependencies":[{"issue_id":"ac-atn.1","depends_on_id":"ac-atn","type":"parent-child","created_at":"2026-01-11T19:09:56.358038-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-atn.2","title":"Add dependency-aware ordering to manual grouping","description":"Update `planManualGroups()` in `cmd/plan.go` to auto-reorder task groups based on bead dependencies.\n\n**Changes to `cmd/plan.go`:**\n1. Fetch `BeadWithDeps` for all beads in the plan (call `getBeadsWithDepsForPlan()`)\n2. Build dependency graph between task groups using exported `BuildDependencyGraph()`\n3. Topologically sort task groups to respect dependencies\n4. Create tasks in the sorted order (preserving user's bead groupings within each task)\n\n**Behavior:**\n- `co plan child parent` → auto-reorders so parent's task is created first\n- Groupings within a task are preserved (user controls which beads are together)\n- Cycle detection should error with clear message","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:10:09.618035-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:15:14.893063-05:00","closed_at":"2026-01-11T19:15:14.893063-05:00","close_reason":"Added sortGroupsByDependencies to planManualGroups for auto-reordering task groups based on bead dependencies","dependencies":[{"issue_id":"ac-atn.2","depends_on_id":"ac-atn","type":"parent-child","created_at":"2026-01-11T19:10:09.619022-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-atn.2","depends_on_id":"ac-atn.1","type":"blocks","created_at":"2026-01-11T19:10:09.62013-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-atn.3","title":"Add dependency ordering to single-bead mode","description":"Update `planSingleBead()` in `cmd/plan.go` to create tasks in dependency order.\n\n**Changes to `cmd/plan.go`:**\n1. Fetch `BeadWithDeps` for all ready beads (reuse `getBeadsWithDepsForPlan()`)\n2. Use exported `TopologicalSort()` to order beads\n3. Create tasks in the sorted order\n\n**Behavior:**\n- `co plan` (no args) creates one task per bead, ordered by dependencies\n- Beads with no dependencies come first\n- Cycle detection should error with clear message","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:10:09.909497-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:16:07.192812-05:00","closed_at":"2026-01-11T19:16:07.192812-05:00","close_reason":"Updated planSingleBead to use BuildDependencyGraph and TopologicalSort for dependency ordering","dependencies":[{"issue_id":"ac-atn.3","depends_on_id":"ac-atn","type":"parent-child","created_at":"2026-01-11T19:10:09.910302-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-atn.3","depends_on_id":"ac-atn.1","type":"blocks","created_at":"2026-01-11T19:10:09.91135-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-atn.4","title":"Add tests for dependency-aware planning","description":"Add comprehensive tests for the new dependency-aware planning in both modes.\n\n**Files to modify:**\n- `cmd/plan_test.go` (new or existing)\n\n**Test cases:**\n1. Manual grouping auto-reordering:\n   - Tasks reordered when dependencies require it\n   - User's bead groupings within tasks preserved\n2. Single-bead mode ordering:\n   - Tasks created in topological order\n   - Beads without dependencies processed first\n3. Cycle detection:\n   - Both modes detect and report cycles with clear error messages\n4. Edge cases:\n   - Empty dependency list\n   - All beads independent (no reordering needed)\n   - Deep dependency chains","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:10:20.606704-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:17:24.766321-05:00","closed_at":"2026-01-11T19:17:24.766321-05:00","close_reason":"Added comprehensive tests for sortGroupsByDependencies covering reordering, grouping preservation, cycles, deep chains, and edge cases","dependencies":[{"issue_id":"ac-atn.4","depends_on_id":"ac-atn","type":"parent-child","created_at":"2026-01-11T19:10:20.607702-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-atn.4","depends_on_id":"ac-atn.2","type":"blocks","created_at":"2026-01-11T19:10:20.608773-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-atn.4","depends_on_id":"ac-atn.3","type":"blocks","created_at":"2026-01-11T19:10:20.610041-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-au3","title":"Add automated bead-to-PR workflow mode to 'co work create'","description":"Add a new mode to 'co work create' that takes a bead ID and automatically executes the complete workflow from planning through PR creation, with an automated review-fix loop.\n\n## Overview\nWhen given a bead ID via --bead flag, automatically:\n1. Detect if the bead has dependencies (blocked-by relationships)\n2. Plan the bead (with dependencies if they exist, using auto-group)\n3. Execute the planned tasks\n4. Run code review in a loop (review, fix issues, re-review until clean)\n5. Create a pull request\n\n## Key Features\n- New --bead flag for co work create\n- Auto-generate branch name from bead title\n- Transitive dependency detection and inclusion\n- Automated review-fix loop until no issues found\n- End-to-end workflow from bead to PR\n\n## Success Criteria\n- Workflow completes end-to-end without manual intervention\n- Review issues are automatically resolved\n- PR contains all changes and proper metadata\n- Traditional co work create still works unchanged","status":"closed","priority":2,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:02.876486-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T20:58:24.297048-05:00","closed_at":"2026-01-11T19:41:08.067099-05:00"}
{"id":"ac-avr","title":"co work create creates unused zellij tab","description":"The 'co work create' command creates a zellij tab for the work, but this tab is never used since each task now creates its own tab during execution. This results in unnecessary tab creation and potential confusion. The work-level tab creation should either be removed or the architecture should be adjusted to use the work tab properly.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T13:19:50.039194-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.907101-05:00","closed_at":"2026-01-11T15:56:51.22029-05:00"}
{"id":"ac-b0a","title":"Add sub-issue creation to review tasks","description":"When a review task identifies issues, those issues should be raised as new beads attached to the review epic for the original issue. This enables tracking of review findings as actionable items that can be planned and addressed in subsequent tasks.","status":"closed","priority":2,"issue_type":"feature","owner":"matthew@customer.io","created_at":"2026-01-11T17:36:41.211258-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T17:38:48.442357-05:00","closed_at":"2026-01-11T17:38:48.442357-05:00","close_reason":"Updated review template to instruct Claude to create beads for review issues under a review epic"}
{"id":"ac-b1v","title":"Implement PR creation and merging via gh CLI","description":"Create internal/github/pr.go:\n- CreatePR(branch, base, title, body string) (prURL, error)\n- MergePR(prURL string) error\n- Uses gh pr create and gh pr merge commands\n\nAcceptance criteria:\n- PRs are created with correct title/body\n- PRs are merged successfully\n- Errors from gh are properly handled","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.867752-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:52.062255-05:00","closed_at":"2026-01-09T20:36:52.062255-05:00","close_reason":"Implemented CreatePR(branch, base, title, body) and MergePR(prURL) using gh CLI. MergePR uses --merge --delete-branch for cleanup.","dependencies":[{"issue_id":"ac-b1v","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.667497-05:00","created_by":"matthew"}]}
{"id":"ac-b7l6","title":"Verify no duplicate detectWorkFromDirectory function","description":"detectWorkFromDirectory was in cmd/plan.go (now deleted) and is also in cmd/work.go:917. Verify there are no other duplicates in the codebase","status":"closed","priority":3,"issue_type":"chore","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T18:54:19.308798-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T18:58:32.118285-05:00","closed_at":"2026-01-13T18:58:32.118285-05:00","close_reason":"Verified no duplicates - detectWorkFromDirectory is only defined at cmd/work.go:931"}
{"id":"ac-b7nf","title":"Update run.go message for orchestrator restart","description":"Update the message in cmd/run.go from 'Orchestrator is already running' to 'Orchestrator restarted in existing zellij tab' when the tab already existed.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T17:41:05.452689-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T17:41:05.452689-05:00"}
{"id":"ac-bj0e","title":"Remove zellij_session/zellij_pane columns","status":"closed","priority":2,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:06.102553-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:28:29.168679-05:00","closed_at":"2026-01-14T10:28:29.168679-05:00","close_reason":"Removed zellij_session/zellij_pane columns from tasks table via migration 014, updated SQL queries, simplified StartTask signature, and fixed tests"}
{"id":"ac-bjia","title":"Create internal/names package for worker naming","description":"Create internal/names/names.go with: predefined list of human names (Alice, Bob, Charlie...), GetNextAvailableName(ctx, db) function, ReleaseName(ctx, db, name) function","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:35.44855-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:10:31.019342-05:00","closed_at":"2026-01-14T11:10:31.019342-05:00","close_reason":"Created internal/names package with GetNextAvailableName and ReleaseName functions, plus comprehensive tests","dependencies":[{"issue_id":"ac-bjia","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:13.915684-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-bjia","depends_on_id":"ac-x522","type":"blocks","created_at":"2026-01-14T11:02:28.656527-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-blu","title":"Implement panel navigation and switching","description":"Add keyboard navigation: Tab/1-3 to switch panels, j/k or arrow keys to navigate within panels. Track cursor position per panel. Handle focus styling for active panel.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:21.276461-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.724817-05:00","closed_at":"2026-01-13T20:05:29.724817-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-blu","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.386121-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-blu","depends_on_id":"ac-9vp","type":"blocks","created_at":"2026-01-13T13:33:02.737239-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-c1ay","title":"Extract dialog code to tui_dialogs.go","description":"Extract all modal dialog code from cmd/tui.go: renderXxxDialog functions, dialog-related update handlers for create, confirm, assign dialogs","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:38.103267-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:17:54.437062-05:00","closed_at":"2026-01-14T11:17:54.437062-05:00","close_reason":"Created tui_dialogs.go with all dialog rendering methods: renderWithDialog, renderCreateWorkDialog, renderCreateBeadDialog, renderDestroyConfirmDialog, renderPlanDialog, renderCreateEpicDialog, renderCloseBeadConfirmDialog, renderBeadSearchDialog, renderLabelFilterDialog, renderAssignBeadsView, renderHelp","dependencies":[{"issue_id":"ac-c1ay","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:14.354297-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-c4m","title":"work review command should allow re-review with unique task IDs","description":"The review task ID uses a fixed format {workID}.review which prevents re-reviewing. Should generate unique IDs (e.g., {workID}.review-1) to allow multiple reviews. See cmd/work.go:464","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T18:10:48.859934-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T18:14:59.432004-05:00","closed_at":"2026-01-11T18:14:59.432004-05:00","close_reason":"Implemented unique review task IDs using format {workID}.review-N where N is sequential","dependencies":[{"issue_id":"ac-c4m","depends_on_id":"ac-pij","type":"parent-child","created_at":"2026-01-11T18:12:14.578743-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-c9x","title":"Make WorktreePath method private in Project struct","description":"The WorktreePath method in internal/project/project.go should be made private if it's only used internally.\n\n**File to modify:** `internal/project/project.go`\n\n**Change:**\n- Rename `WorktreePath` to `worktreePath` (lowercase first letter)\n- Update all internal call sites within the package\n\n**Current code:**\n```go\n// WorktreePath returns the path where a task's worktree should be created.\nfunc (p *Project) WorktreePath(taskID string) string {\n    return filepath.Join(p.Root, taskID)\n}\n```\n\n**After:**\n```go\n// worktreePath returns the path where a task's worktree should be created.\nfunc (p *Project) worktreePath(taskID string) string {\n    return filepath.Join(p.Root, taskID)\n}\n```\n\nNote: First verify that this method is not used outside the project package.","notes":"WorktreePath is used by cmd/run.go so it must remain public","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T15:08:40.174257-05:00","created_by":"matthew","updated_at":"2026-01-10T15:09:35.107973-05:00","closed_at":"2026-01-10T15:09:35.107973-05:00","close_reason":"WorktreePath is used by cmd/run.go so it must remain public"}
{"id":"ac-cg0","title":"Add co sync command to pull from upstream in all repos","description":"Add a new 'co sync' command that performs git pull in each repository (main and all worktrees) to synchronize the local git state with upstream. This would help keep all work units up-to-date with the latest changes from the remote repository.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T13:30:16.638195-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.90792-05:00","closed_at":"2026-01-11T15:58:05.719721-05:00"}
{"id":"ac-ckx","title":"Add GetBeadWithDeps function to beads client","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.437718-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.722176-05:00","closed_at":"2026-01-09T20:52:28.722176-05:00","close_reason":"Added GetBeadWithDeps(id) function that returns BeadWithDeps struct including Dependencies slice","dependencies":[{"issue_id":"ac-ckx","depends_on_id":"ac-r51","type":"blocks","created_at":"2026-01-09T20:45:18.014568-05:00","created_by":"matthew"}]}
{"id":"ac-cnm","title":"Add --deps flag to process dependencies","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.161987-05:00","created_by":"matthew","updated_at":"2026-01-09T21:00:31.395729-05:00","closed_at":"2026-01-09T21:00:31.395729-05:00","close_reason":"Implemented --deps flag that recursively processes open dependencies before the target bead. PR #8 merged.","dependencies":[{"issue_id":"ac-cnm","depends_on_id":"ac-ckx","type":"blocks","created_at":"2026-01-09T20:45:17.849864-05:00","created_by":"matthew"}]}
{"id":"ac-cq3","title":"Fix: Tasks not found by co run - missing work_tasks junction entries","description":"BUG: co task list shows tasks exist, but co run reports 'No tasks found for work'.\n\nRoot Cause: CreateTask() in internal/db/task.go sets work_id field but never calls AddTaskToWork() to create the required work_tasks junction table entry. GetWorkTasks() uses JOIN work_tasks, making tasks without junction entries invisible to run command.\n\nFix: Modify CreateTask() to automatically call AddTaskToWork() when workID is provided, creating the junction table entry within the same transaction.\n\nTest: After fix, tasks created with co plan should be findable by co run.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T12:59:04.849859-05:00","created_by":"matthew","updated_at":"2026-01-11T13:04:00.794205-05:00","closed_at":"2026-01-11T13:04:00.794205-05:00","close_reason":"Fixed: Added AddTaskToWork() call in CreateTask() to properly create work_tasks junction entries when workID is provided"}
{"id":"ac-ctt","title":"Update cmd/root.go to register new commands","description":"Update cmd/root.go init() to register:\n- completeCmd\n- statusCmd  \n- listCmd","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.117222-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:22.962581-05:00","closed_at":"2026-01-10T09:45:22.962581-05:00","close_reason":"Updated cmd/root.go to register completeCmd, statusCmd, listCmd","dependencies":[{"issue_id":"ac-ctt","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.725475-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-6zo","type":"blocks","created_at":"2026-01-10T09:35:23.06505-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-p9b","type":"blocks","created_at":"2026-01-10T09:35:23.185819-05:00","created_by":"matthew"},{"issue_id":"ac-ctt","depends_on_id":"ac-zqp","type":"blocks","created_at":"2026-01-10T09:35:23.290447-05:00","created_by":"matthew"}]}
{"id":"ac-d5o","title":"Add task_type column to database schema","description":"Add `task_type` column to tasks table to distinguish \"implement\" vs \"estimate\" tasks.\n\n**Files to modify:**\n- `internal/db/db.go` - Add migration function `migrateTaskType()`\n- `internal/db/task.go` - Add `TaskType` field to Task struct, update `CreateTask()` signature\n\n**Schema change:**\n```sql\nALTER TABLE tasks ADD COLUMN task_type TEXT NOT NULL DEFAULT 'implement'\n```\n\n**Code changes:**\n- Add `TaskType string` field to `Task` struct\n- Update `CreateTask(id string, taskType string, beadIDs []string, complexityBudget int)`\n- Update all `CreateTask` call sites to pass \"implement\" as task type","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:56.920021-05:00","created_by":"matthew","updated_at":"2026-01-10T14:14:12.494853-05:00","closed_at":"2026-01-10T14:14:12.494853-05:00","close_reason":"Implemented task_type column and migration"}
{"id":"ac-dib","title":"Set up data fetching for works, beads, and tasks","description":"Create polling mechanism to fetch works from DB, beads from bd ready/list, and tasks for selected work. Handle async data loading with loading states.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:21.964937-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.727244-05:00","closed_at":"2026-01-13T20:05:29.727244-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-dib","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.498419-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-dib","depends_on_id":"ac-9vp","type":"blocks","created_at":"2026-01-13T13:33:02.833836-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-dip","title":"orchestrator spins printing All 4 task(s) completed. Waiting for new tasks...","description":"instead of that it should print a nice spinner at the start of the line","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T11:05:51.229395-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:42:04.240579-05:00","closed_at":"2026-01-13T11:42:04.240579-05:00","close_reason":"Added animated spinner when orchestrator is waiting for new tasks. Replaced static 'All N task(s) completed. Waiting for new tasks...' message with a spinning animation using braille dot characters."}
{"id":"ac-dpk","title":"Remove misc unused functions (IsEnabled, IsBlocked, WorkOrchestratorTabName)","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:48.48127-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:22.740503-05:00","closed_at":"2026-01-13T12:42:22.740503-05:00","close_reason":"Removed misc unused functions: mise.IsEnabled, signal.IsBlocked, claude.WorkOrchestratorTabName, worktree.Remove, db.MigrationStatus","dependencies":[{"issue_id":"ac-dpk","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:05.287037-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-dql","title":"Create status bar with available actions","description":"Display context-sensitive keybindings at bottom of screen. Show different actions based on active panel and selected item state. Include quit and help shortcuts always visible.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:25.248893-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.729432-05:00","closed_at":"2026-01-13T20:05:29.729432-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-dql","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.948178-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-dql","depends_on_id":"ac-blu","type":"blocks","created_at":"2026-01-13T13:33:03.573581-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-dqn","title":"work create zellij tab unused - tasks create own tabs","description":"The co work create command creates a zellij tab for the work unit, but this tab is never used. Each task within the work creates its own tab instead. According to the documentation, tasks should run in sequence within the work's tab, sharing the same zellij tab. The current behavior leaves the work-level tab unused and creates unnecessary tabs.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T13:29:19.307739-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.908667-05:00","closed_at":"2026-01-11T15:57:05.638498-05:00"}
{"id":"ac-dr0","title":"Use errors.Is for proper error comparison throughout codebase","description":"Replace direct error comparisons (err == sql.ErrNoRows) with errors.Is(err, sql.ErrNoRows) for proper error unwrapping. This ensures errors wrapped with fmt.Errorf are properly compared.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T21:06:26.905801-05:00","created_by":"matthew","updated_at":"2026-01-11T20:58:24.29791-05:00","closed_at":"2026-01-11T17:15:04.524481-05:00"}
{"id":"ac-dsru","title":"Refactor TUI runWork to call logic directly instead of shelling out","description":"In cmd/tui_work.go, runWork() shells out to 'co run --work'. Should call the underlying run logic directly for better error handling and to avoid subprocess overhead.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:22:38.857708-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:02:39.508362-05:00","closed_at":"2026-01-14T20:02:39.508362-05:00","close_reason":"Refactored TUI runWork() to call new RunWork() function directly instead of shelling out to 'co run --work'"}
{"id":"ac-dzb","title":"Add BuildEstimatePrompt to runner","description":"Add estimate prompt builder to Claude runner.\n\n**File to modify:** `internal/claude/runner.go`\n\n**Function signature:**\n```go\nfunc BuildEstimatePrompt(taskID string, taskBeads []beads.Bead) string\n```\n\n**Prompt template:**\n- List all beads with ID, title, description\n- Instruct Claude to run `co estimate \u003cid\u003e --score X --tokens Y` for each\n- Include scoring guide (1=trivial, 5=medium, 10=major refactor)\n- Include token estimation guide (5000-50000)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:59.682405-05:00","created_by":"matthew","updated_at":"2026-01-10T14:15:48.477549-05:00","closed_at":"2026-01-10T14:15:48.477549-05:00","close_reason":"Added BuildEstimatePrompt function to runner"}
{"id":"ac-dzl","title":"Work commands: Implement create/list/show/destroy subcommands","description":"Create cmd/work.go with subcommands: create (auto-generates ID, creates subdirectory with worktree), list, show (context-aware), destroy. Implement getCurrentWork() for directory context detection.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:18:37.465949-05:00","created_by":"matthew","updated_at":"2026-01-10T21:42:34.366717-05:00","closed_at":"2026-01-10T21:42:34.366717-05:00","close_reason":"Implemented: Work commands with create/list/show/destroy, work-centric execution in run.go, zellij tab management, documentation updates, and testing completed","dependencies":[{"issue_id":"ac-dzl","depends_on_id":"ac-s4d","type":"blocks","created_at":"2026-01-10T18:19:24.876816-05:00","created_by":"matthew"}]}
{"id":"ac-e7b","title":"Remove unused processWork function in task_processing.go","description":"The processWork function in task_processing.go:140-167 appears unused. run.go now calls claude.EnsureWorkOrchestrator directly instead.\n\nVerify it's not used elsewhere and remove if confirmed dead code.","status":"closed","priority":4,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:35.506027-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T18:49:42.693913-05:00","closed_at":"2026-01-12T18:49:42.693913-05:00","close_reason":"Removed unused processWork function from task_processing.go and all related dead code from work_automated.go (runReviewFixLoop, createReviewTask, checkForReviewIssues, planAndExecuteFixTasks, planAndExecuteFixTasksLegacy, createWorkPR). The review-fix functionality was integrated into the orchestrator instead."}
{"id":"ac-ec4","title":"Create internal/db/bead.go for tracking operations","description":"Create internal/db/bead.go with:\n- TrackedBead struct (including ZellijSession, ZellijPane fields)\n- StartBead(id, title, zellijSession, zellijPane) - mark as processing with session info\n- CompleteBead(id, prURL) - mark as completed\n- FailBead(id, errMsg) - mark as failed\n- GetBead(id) - get tracking record (includes session/pane info)\n- IsCompleted(id) - check if completed/failed\n- ListBeads(statusFilter) - list all beads\n- GetBeadSession(id) - get zellij session/pane for a bead","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.23703-05:00","created_by":"matthew","updated_at":"2026-01-10T09:44:04.319552-05:00","closed_at":"2026-01-10T09:44:04.319552-05:00","close_reason":"Created internal/db/bead.go with TrackedBead struct, StartBead, CompleteBead, FailBead, GetBead, IsCompleted, ListBeads, GetBeadSession functions","dependencies":[{"issue_id":"ac-ec4","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.719938-05:00","created_by":"matthew"},{"issue_id":"ac-ec4","depends_on_id":"ac-nz0","type":"blocks","created_at":"2026-01-10T09:35:22.26614-05:00","created_by":"matthew"}]}
{"id":"ac-ef6","title":"Refactor cmd/orchestrate.go to work-based task polling","description":"Replace workflow-step model with simple task polling loop. Orchestrator polls for ready tasks (pending with all deps satisfied) using GetReadyTasks() and executes them inline. Remove step constants and step-based logic.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:12.452196-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:42:56.586308-05:00","closed_at":"2026-01-12T17:42:56.586312-05:00","dependencies":[{"issue_id":"ac-ef6","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.156262-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ef6","depends_on_id":"ac-lcz","type":"blocks","created_at":"2026-01-12T17:29:36.80992-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ej2","title":"destroying a work with an active claude session doesn't terminate the orchestrator and claude session","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-13T12:04:56.53627-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:55:34.917977-05:00","closed_at":"2026-01-13T12:55:34.917977-05:00","close_reason":"Added TerminateWorkTabs function in internal/claude/runner.go to terminate orchestrator and Claude task tabs before work destruction. The function sends Ctrl+C to each tab to terminate running processes, then closes the tabs. Called from runWorkDestroy in cmd/work.go."}
{"id":"ac-epn","title":"Add 'co work review' command","description":"Add a 'co work review' command that creates a task for reviewing code changes in a work unit. This would allow orchestrating code review sessions through Claude Code, examining the work's branch/PR for quality, security issues, and adherence to project standards.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:25:36.637234-05:00","created_by":"matthew","updated_at":"2026-01-11T20:58:24.298718-05:00","closed_at":"2026-01-11T17:30:58.372427-05:00"}
{"id":"ac-ewl","title":"Remove Anthropic SDK dependency","description":"Clean up Anthropic SDK dependency after migration.\n\n**Changes:**\n1. Remove `github.com/anthropics/anthropic-sdk-go` import from `internal/task/complexity.go`\n2. Run `go mod tidy` to remove from go.mod/go.sum\n3. Verify build succeeds without SDK","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:02.930692-05:00","created_by":"matthew","updated_at":"2026-01-10T14:32:20.469843-05:00","closed_at":"2026-01-10T14:32:20.469843-05:00","close_reason":"Removed Anthropic SDK dependency","dependencies":[{"issue_id":"ac-ewl","depends_on_id":"ac-3ei","type":"blocks","created_at":"2026-01-10T14:02:29.242445-05:00","created_by":"matthew"}]}
{"id":"ac-ex6","title":"Add test coverage for task dependency logic","description":"The orchestrate_test.go (370 lines) was deleted with no replacement tests. Add tests for:\n- GetReadyTasksForWork query logic (tasks ready when all dependencies completed)\n- Task execution order with dependencies\n- Error handling when tasks are blocked by uncompleted dependencies\n- HasPendingDependencies function","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:34.455879-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T18:49:42.127073-05:00","closed_at":"2026-01-12T18:49:42.127073-05:00","close_reason":"Added comprehensive tests for task dependency logic: TestAddTaskDependency, TestGetReadyTasksForWork, TestGetReadyTasksForWorkMultipleDependencies, TestHasPendingDependencies, TestDeleteTaskDependency, TestBlockedTasksNotReady, TestFailedTaskBlocksDependents"}
{"id":"ac-f65a","title":"Implement Review and PR task creation","description":"Add 'R' keybinding to create review task for completed work. Add 'P' keybinding to create PR task. Show status feedback. Validate work is in correct state before action.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:32.058667-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.977134-05:00","closed_at":"2026-01-13T20:05:36.977134-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-f65a","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.710481-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-f65a","depends_on_id":"ac-pun","type":"blocks","created_at":"2026-01-13T13:33:04.663953-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-f6p","title":"Implement beads client to query ready work","description":"Create internal/beads/client.go:\n- GetReadyBeads() - runs `bd ready --json`, parses output\n- CloseBead(id, reason) - runs `bd close \u003cid\u003e --reason \"\u003creason\u003e\"`\n- Bead struct with ID, Title, Description fields\n\nAcceptance criteria:\n- GetReadyBeads returns parsed beads from bd ready\n- CloseBead successfully closes a bead","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:44.955092-05:00","created_by":"matthew","updated_at":"2026-01-09T20:33:01.642893-05:00","closed_at":"2026-01-09T20:33:01.642893-05:00","close_reason":"Implemented beads client with GetReadyBeads() and CloseBead() functions. PR #1 merged.","dependencies":[{"issue_id":"ac-f6p","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:19:46.368644-05:00","created_by":"matthew"}]}
{"id":"ac-f7o","title":"Update co complete command to support task lookup from bead ID","description":"Modify cmd/complete.go: look up task_id from task_beads table using bead_id, mark bead as complete in task_beads, check if all beads in task are complete, if so mark task as complete. Keep existing bead-only completion as fallback for backwards compatibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:34.401719-05:00","created_by":"matthew","updated_at":"2026-01-10T11:50:06.427885-05:00","closed_at":"2026-01-10T11:50:06.427885-05:00","close_reason":"Updated co complete command to support task lookup","dependencies":[{"issue_id":"ac-f7o","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.331247-05:00","created_by":"matthew"},{"issue_id":"ac-f7o","depends_on_id":"ac-mv4","type":"blocks","created_at":"2026-01-10T11:35:32.534277-05:00","created_by":"matthew"}]}
{"id":"ac-fa3","title":"Implement Create Work dialog","description":"Add 'c' keybinding to open create work dialog. Text input for branch name with validation. Optional bead selection from ready beads. Calls work create command on confirm.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:26.549793-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.979183-05:00","closed_at":"2026-01-13T20:05:36.979183-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-fa3","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.057888-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-fa3","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:03.693918-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-faz","title":"co plan --auto-group fails without creating worktree","description":"When running 'co plan --auto-group', the estimation task fails with 'estimation task did not complete successfully' and no worktree is created for the task.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T15:17:26.501494-05:00","created_by":"matthew","updated_at":"2026-01-10T16:28:38.153986-05:00","closed_at":"2026-01-10T16:28:38.153986-05:00","close_reason":"Fixed by creating worktrees for estimation tasks in EstimateBatch"}
{"id":"ac-fru","title":"Add tasks, task_beads, and complexity_cache tables to database schema","description":"Add new SQLite tables to internal/db/: tasks (id, status, complexity_budget, actual_complexity, zellij_session, zellij_pane, worktree_path, pr_url, error_message, timestamps), task_beads (task_id, bead_id, status), complexity_cache (bead_id, description_hash, complexity_score, estimated_tokens, created_at)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.332219-05:00","created_by":"matthew","updated_at":"2026-01-10T11:42:10.14169-05:00","closed_at":"2026-01-10T11:42:10.14169-05:00","close_reason":"Added tasks, task_beads, and complexity_cache tables to database schema","dependencies":[{"issue_id":"ac-fru","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.560886-05:00","created_by":"matthew"}]}
{"id":"ac-g7w","title":"Review: w-537","status":"closed","priority":2,"issue_type":"epic","owner":"matthew@customer.io","created_at":"2026-01-11T19:42:42.00184-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.091886-05:00","closed_at":"2026-01-11T20:09:52.118975-05:00"}
{"id":"ac-g7w.1","title":"Fix review issue detection in automated workflow","description":"The checkForReviewIssues function in cmd/work_automated.go:314-328 has overly broad matching logic that checks if ANY ready bead contains 'Review:' or the work ID. This could match unrelated beads. Should track beads before review and only check for new ones.","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T19:42:42.156607-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T20:02:21.102144-05:00","closed_at":"2026-01-11T20:02:21.102144-05:00","close_reason":"Fixed checkForReviewIssues fallback to track pre-review beads and only detect truly new beads instead of matching by title heuristics","dependencies":[{"issue_id":"ac-g7w.1","depends_on_id":"ac-g7w","type":"parent-child","created_at":"2026-01-11T19:42:42.157375-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-g7w.2","title":"Fix race condition picking up unrelated beads in review-fix loop","description":"In cmd/work_automated.go:281-297, planAndExecuteFixTasks calls GetReadyBeadsInDir and processes ALL ready beads, not just review-created ones. Unrelated ready beads would be incorrectly processed.","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T19:42:42.352817-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T19:57:13.361101-05:00","closed_at":"2026-01-11T19:57:13.361101-05:00","close_reason":"Added co task set-review-epic command and task_metadata table. Fixed planAndExecuteFixTasks to use review epic instead of all ready beads.","dependencies":[{"issue_id":"ac-g7w.2","depends_on_id":"ac-g7w","type":"parent-child","created_at":"2026-01-11T19:42:42.354624-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-g7w.3","title":"Add tests for new automated workflow functions","description":"Missing unit tests for: generateBranchNameFromBead, collectBeadsForAutomatedWorkflow, GetTransitiveDependenciesInDir, GetBeadWithChildrenInDir. Branch name generation especially needs edge case coverage.","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-11T19:42:42.537572-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T20:00:23.764564-05:00","closed_at":"2026-01-11T20:00:23.764564-05:00","close_reason":"Added comprehensive unit tests for generateBranchNameFromBead (31 edge cases), collectBeadsForAutomatedWorkflow, GetTransitiveDependenciesInDir, and GetBeadWithChildrenInDir. Tests cover input validation, error handling, and integration scenarios.","dependencies":[{"issue_id":"ac-g7w.3","depends_on_id":"ac-g7w","type":"parent-child","created_at":"2026-01-11T19:42:42.538291-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-gn0","title":"Create zellij package structure with Client struct and core types","description":"Create internal/zellij/zellij.go with Client struct, Session/Tab types, and configuration options","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:12.404577-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.270097-05:00","closed_at":"2026-01-13T13:14:41.270097-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-gn0","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:36.723226-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-goi","title":"when I co work destroy \u003cwork\u003e the orchestrator doesn't stop","description":"it sits there printing No tasks yet. Waiting for tasks to be created... forever","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T11:07:29.598544-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:42:05.282941-05:00","closed_at":"2026-01-13T11:42:05.282941-05:00","close_reason":"Added check at the start of each orchestration loop iteration to verify the work still exists in the database. If the work has been destroyed, the orchestrator now exits cleanly with a message."}
{"id":"ac-goq","title":"Show task dependencies in co task list output","description":"The co task list command shows tasks in a flat list without showing their dependency relationships. Add columns or formatting to show what each task depends on and what depends on it, making the task hierarchy visible.","status":"closed","priority":2,"issue_type":"feature","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T10:00:20.670934-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:28:34.212699-05:00","closed_at":"2026-01-13T11:28:34.212699-05:00","close_reason":"Added dependency display to co task list output showing 'Depends on' and 'Blocks' relationships"}
{"id":"ac-gs6","title":"Add feature branch workflow with final PR","description":"Extend cmd/run.go:\n- When --branch is specified, all PRs target that branch\n- After all beads complete, create final PR: branch → main\n- Skip final PR if no beads were processed\n\nAcceptance criteria:\n- PRs target feature branch when --branch specified\n- Final PR is created after all beads complete\n- Works correctly when some beads have no changes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:19:02.166276-05:00","created_by":"matthew","updated_at":"2026-01-09T20:52:28.892894-05:00","closed_at":"2026-01-09T20:52:28.892894-05:00","close_reason":"Implemented feature branch workflow: when --branch != main, PRs target feature branch and final PR merges to main after all beads complete","dependencies":[{"issue_id":"ac-gs6","depends_on_id":"ac-9hx","type":"blocks","created_at":"2026-01-09T20:19:49.718878-05:00","created_by":"matthew"}]}
{"id":"ac-h06","title":"Add SpawnWorkOrchestrator and EnsureWorkOrchestrator to runner.go","description":"Add functions to spawn work orchestrator in zellij tab named work-\u003cwork-id\u003e. SpawnWorkOrchestrator creates tab and runs 'co orchestrate --work \u003cid\u003e'. EnsureWorkOrchestrator checks if tab exists and spawns if not. Deprecate old Run() function.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:12.684643-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:44:25.12368-05:00","closed_at":"2026-01-12T17:44:25.123684-05:00","dependencies":[{"issue_id":"ac-h06","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.16695-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-h06","depends_on_id":"ac-ef6","type":"blocks","created_at":"2026-01-12T17:29:36.946598-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-hd25","title":"It should be possible in plan mode to group all selected beads under an epic","description":"My idea here is to select a bunch of beads and create an epic encapsulating all the work.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:40.81368-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:38:12.796644-05:00"}
{"id":"ac-ho1","title":"Delete dead code: internal/github/pr.go","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:47.003705-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:21.862052-05:00","closed_at":"2026-01-13T12:42:21.862052-05:00","close_reason":"Deleted entire internal/github/ package (pr.go was unused)","dependencies":[{"issue_id":"ac-ho1","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:05.042096-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-i1j5","title":"When the orchestrator is printing '⠙ All 4 task(s) completed. Waiting for new tasks...' I see newlines being created. Also claude hasn't exited. Seems like  a bug","description":" Mustering… (ctrl+c to interrupt · 57s · ↑ 891 tokens)\n\n──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n❯\n──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n  -- INSERT -- ⏵⏵ bypass permissions on (shift+tab to cycle)\n\nTask marked as completed in database, terminating Claude...\n\n=== Task w-22u.pr completed (took 58s) ===\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                   c\n\n\n\n\n\n\n\n\n\n\n\n⠏ All 4 task(s) completed. Waiting for new tasks...","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-13T14:00:42.653363-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:36:01.582748-05:00","closed_at":"2026-01-13T19:36:01.582748-05:00","close_reason":"Fixed two bugs: 1) Claude termination now kills entire process group to ensure all child processes exit. 2) SpinnerWait no longer prints newlines between wait cycles."}
{"id":"ac-i1q","title":"Update CLAUDE.md documentation to reflect w-xxx ID format","description":"Update CLAUDE.md lines 95, 117, 130, 146 to change references from 'work-1, work-2' format to actual 'w-xxx' format used in code.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T09:26:02.77921-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T10:07:38.421529-05:00","closed_at":"2026-01-12T09:41:30.972833-05:00","dependencies":[{"issue_id":"ac-i1q","depends_on_id":"ac-0pg","type":"blocks","created_at":"2026-01-12T09:26:14.094455-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-i1q","depends_on_id":"ac-879","type":"blocks","created_at":"2026-01-12T09:26:23.837857-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-i1q","depends_on_id":"ac-ob2","type":"blocks","created_at":"2026-01-12T09:26:23.949178-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-i2z","title":"PR task created by 'co work pr' cannot be run with 'co run'","description":"When running 'co work pr w-4we', a PR task 'w-4we.pr' is created successfully. However, attempting to run it with 'co run w-4we.pr' fails with 'work w-4we.pr not found'. The run command appears to be looking for a work instead of a task.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T13:17:04.637133-05:00","created_by":"matthew","updated_at":"2026-01-11T16:03:35.909401-05:00","closed_at":"2026-01-11T15:56:21.803762-05:00"}
{"id":"ac-ibym","title":"Refactor TUI assignSelectedBeads to call logic directly instead of shelling out","description":"In cmd/tui_work.go, assignSelectedBeads() shells out to 'co work add'. Should call the underlying runWorkAdd logic directly for better error handling and to avoid subprocess overhead.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:22:39.557997-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:05:09.542705-05:00","closed_at":"2026-01-14T20:05:09.542705-05:00","close_reason":"Created AddBeadsToWork function in cmd/work.go and updated assignSelectedBeads in cmd/tui_work.go to call it directly instead of shelling out to 'co work add'"}
{"id":"ac-ieo","title":"Initialize Go project with cobra CLI","description":"Create the ac (auto claude) Go project:\n- go mod init github.com/newhook/autoclaude\n- Install cobra: go get github.com/spf13/cobra@latest\n- Create main.go with root command\n- Create cmd/run.go with placeholder run command\n\nAcceptance criteria:\n- `go build` succeeds\n- `./ac --help` shows usage\n- `./ac run --help` shows run command flags","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:30.087397-05:00","created_by":"matthew","updated_at":"2026-01-09T20:26:43.02485-05:00","closed_at":"2026-01-09T20:26:43.02485-05:00","close_reason":"Initialized Go project with cobra CLI. Created main.go, cmd/root.go, and cmd/run.go. Build succeeds and help commands work correctly."}
{"id":"ac-ijae","title":"Fix tests after zellij column removal","description":"Update internal/db/task_test.go to remove zellij session/pane parameters from StartTask calls","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:18.753423-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:28:24.641761-05:00","closed_at":"2026-01-14T10:28:24.641761-05:00","close_reason":"Updated all StartTask calls in tests to use simplified signature","dependencies":[{"issue_id":"ac-ijae","depends_on_id":"ac-bj0e","type":"parent-child","created_at":"2026-01-14T10:01:33.412657-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ijae","depends_on_id":"ac-wftt","type":"blocks","created_at":"2026-01-14T10:01:39.988637-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-j762","title":"It should be possible to assign multiple issues to a work in plan mode","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:54:28.134084-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:54:28.134084-05:00","dependencies":[{"issue_id":"ac-j762","depends_on_id":"ac-xg7k","type":"blocks","created_at":"2026-01-14T20:37:19.775179-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-j762","depends_on_id":"ac-rf0n","type":"blocks","created_at":"2026-01-14T20:37:19.843193-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-j762","depends_on_id":"ac-kzg3","type":"blocks","created_at":"2026-01-14T20:37:19.914248-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-j762","depends_on_id":"ac-84fo","type":"blocks","created_at":"2026-01-14T20:37:19.986862-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-j762","depends_on_id":"ac-ozhr","type":"blocks","created_at":"2026-01-14T20:37:20.078607-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-jg8r","title":"co work review on a review work gives error","description":"\nmatthew@Matthew-Newhook w-22u % co work review\nError: work w-22u has not been started yet (status: pending)\nUsage:\n  co work review [\u003cid\u003e] [flags]\n\nFlags:\n  -h, --help   help for review\n\nmatthew@Matthew-Newhook w-22u % pwd\n","status":"open","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-13T14:21:15.825007-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T14:21:15.825007-05:00","dependencies":[{"issue_id":"ac-jg8r","depends_on_id":"ac-u1dp","type":"blocks","created_at":"2026-01-14T15:44:24.260682-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-jno","title":"Modify cmd/work.go to spawn orchestrator on work create","description":"After creating work in runWorkCreate(), call claude.SpawnWorkOrchestrator() to spawn the orchestrator tab. Update user feedback to show orchestrator is running.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:12.897079-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:51:22.100971-05:00","closed_at":"2026-01-12T17:51:22.100971-05:00","close_reason":"Already implemented in runAutomatedWorkflow. Manual work creation (without --bead) has no tasks, so spawning orchestrator would immediately exit.","dependencies":[{"issue_id":"ac-jno","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.178471-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-jno","depends_on_id":"ac-h06","type":"blocks","created_at":"2026-01-12T17:29:37.092165-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-jsb","title":"Build Beads panel with ready/blocked indicators","description":"Display beads from bd ready by default. Add toggle to show all beads. Show bead ID, title, and blocking status. Support filtering and searching.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:23.626736-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.73364-05:00","closed_at":"2026-01-13T20:05:29.73364-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-jsb","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:42.722348-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-jsb","depends_on_id":"ac-blu","type":"blocks","created_at":"2026-01-13T13:33:03.145505-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-jsb","depends_on_id":"ac-dib","type":"blocks","created_at":"2026-01-13T13:33:03.264272-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-k4eu","title":"Review the contentns of this PR, filing issues for any problems.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:17:04.698481-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:35:47.07035-05:00","closed_at":"2026-01-14T20:35:47.07035-05:00","close_reason":"Closed"}
{"id":"ac-kzg3","title":"Render selection indicators in plan mode bead list","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:13.134204-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:37:13.134204-05:00","dependencies":[{"issue_id":"ac-kzg3","depends_on_id":"ac-xg7k","type":"blocks","created_at":"2026-01-14T20:37:24.189238-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-l09","title":"Refactor cmd/work.go to use git/worktree library functions","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:41.757573-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:41:55.74551-05:00","closed_at":"2026-01-13T12:41:55.74551-05:00","close_reason":"Refactored cmd/work.go to use worktree and git library functions instead of inline exec.Command","dependencies":[{"issue_id":"ac-l09","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.242236-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-l09","depends_on_id":"ac-8zr","type":"blocks","created_at":"2026-01-13T12:26:14.081213-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-l67c","title":"Add error handling and user feedback","description":"Show error messages in status bar or toast. Handle command failures gracefully. Provide loading indicators for async operations. Add success confirmations for completed actions.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:33.752617-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.981009-05:00","closed_at":"2026-01-13T20:05:36.981009-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-l67c","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.922789-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-l67c","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:04.894937-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-l6c","title":"Migrate from direct SQL queries to sqlc for type safety","description":"Replace direct SQL queries with sqlc-generated code for better type safety, compile-time checking, and maintainability. This includes creating .sql schema files and query definitions for sqlc code generation.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T15:41:57.314315-05:00","created_by":"matthew","updated_at":"2026-01-10T16:47:57.175932-05:00","closed_at":"2026-01-10T16:47:57.175932-05:00","close_reason":"Successfully migrated from direct SQL queries to sqlc for type safety, compile-time checking, and better maintainability"}
{"id":"ac-la1","title":"Project-based orchestrator with worktree isolation","description":"# Plan: Project-based Orchestrator with Worktree Isolation\n\n## Overview\n\nRestructure `co` to use a project-based model where:\n- Each project lives in its own directory with `.co/` for state\n- The target repo is symlinked (local) or cloned (GitHub) into `main/`\n- Each task gets an isolated git worktree\n- Zellij sessions are named per project/task for future parallelism\n- Beads issue tracking lives in the `main/` repo\n\n## Directory Structure\n\n```\n\u003cproject-dir\u003e/\n├── .co/\n│   ├── config.toml      # Project configuration\n│   └── tracking.db      # SQLite coordination database\n├── main/                # Symlink to local repo OR clone from GitHub\n│   └── .beads/          # Beads issue tracker (in repo)\n├── bead-123/            # Worktree for task bead-123\n├── bead-456/            # Worktree for task bead-456\n└── ...\n```\n\n## New Commands\n\n### `co proj create \u003cdir\u003e \u003crepo\u003e`\n\nCreates a new orchestrator project.\n\n**Arguments:**\n- `\u003cdir\u003e` - Path to create project directory\n- `\u003crepo\u003e` - Either local path (symlinked) or GitHub URL (cloned)\n\n**Behavior:**\n1. Create `\u003cdir\u003e/` and `\u003cdir\u003e/.co/`\n2. Detect if `\u003crepo\u003e` is local path or GitHub URL\n3. If local: `ln -s \u003crepo\u003e \u003cdir\u003e/main`\n4. If GitHub: `git clone \u003crepo\u003e \u003cdir\u003e/main`\n5. Write `\u003cdir\u003e/.co/config.toml` with:\n   ```toml\n   [project]\n   name = \"\u003cdir-basename\u003e\"\n   created_at = \"2024-...\"\n\n   [repo]\n   type = \"local\" | \"github\"\n   source = \"\u003coriginal-path-or-url\u003e\"\n   path = \"main\"\n   ```\n6. Initialize `\u003cdir\u003e/.co/tracking.db`\n\n### `co proj destroy [--force]`\n\nTears down the current project.\n\n**Behavior:**\n1. Find project root (walk up looking for `.co/`)\n2. List all worktrees and prompt for confirmation (unless `--force`)\n3. Remove all worktrees via `git worktree remove`\n4. Delete project directory\n\n### `co proj status`\n\nShows project status including active worktrees and task states.\n\n## Project Context Detection\n\n`co` commands find the project by walking up from cwd looking for `.co/`:\n- `/Users/matthew/proj/bead-xyz/foo/bar` → finds `/Users/matthew/proj/.co/`\n- Override with `--project=\u003cpath\u003e` flag on any command\n\n## Modified Workflow\n\n### `co run` Changes\n\n1. **Find project context** (cwd walk or `--project` flag)\n2. **Load config** from `.co/config.toml`\n3. **Query beads** from `main/` directory (where `.beads/` lives)\n4. **For each task:**\n   - Create worktree: `git -C main/ worktree add ../\u003ctask-id\u003e -b bead/\u003ctask-id\u003e`\n   - Launch Claude in Zellij session `co-\u003cproject-name\u003e`, pane named `\u003ctask-id\u003e`\n   - Claude works in `\u003cproject-dir\u003e/\u003ctask-id\u003e/`\n   - On success: `git worktree remove \u003ctask-id\u003e`\n   - On failure: Keep worktree for debugging\n\n### Zellij Session \u0026 Pane Model\n\n**Session**: One per project, named `co-\u003cproject-name\u003e`\n**Panes**: One per task, named after the task ID\n\nExample:\n- Session: `co-myapp`\n- Panes: `bead-123`, `bead-456`, etc.\n\nThis enables:\n- Multiple projects running simultaneously (separate sessions)\n- Future parallel task execution within a project (multiple panes)\n- Easy identification: `zellij -s co-myapp` shows all tasks for that project\n\n### Worktree Cleanup\n\n- **On success**: Remove worktree immediately\n- **On failure**: Keep worktree for debugging (user can inspect/fix)\n\n## Implementation Steps\n\n### 1. Add new `internal/project/` package\n\n```go\n// internal/project/project.go\ntype Project struct {\n    Root   string      // Project directory path\n    Config *Config     // Parsed config.toml\n    DB     *db.DB      // Tracking database\n}\n\ntype Config struct {\n    Project ProjectConfig\n    Repo    RepoConfig\n}\n\ntype ProjectConfig struct {\n    Name      string\n    CreatedAt time.Time\n}\n\ntype RepoConfig struct {\n    Type   string  // \"local\" or \"github\"\n    Source string  // Original path or URL\n    Path   string  // Always \"main\"\n}\n\nfunc Find(startDir string) (*Project, error)      // Walk up to find .co/\nfunc Create(dir, repoSource string) (*Project, error)\nfunc (p *Project) MainRepoPath() string           // Returns \u003croot\u003e/main\nfunc (p *Project) WorktreePath(taskID string) string\n```\n\n### 2. Add new `internal/worktree/` package\n\n```go\n// internal/worktree/worktree.go\nfunc Create(repoPath, worktreePath, branch string) error\nfunc Remove(repoPath, worktreePath string) error\nfunc List(repoPath string) ([]Worktree, error)\nfunc Exists(repoPath, worktreePath string) bool\n```\n\n### 3. Add `cmd/proj.go` with subcommands\n\n- `co proj create \u003cdir\u003e \u003crepo\u003e`\n- `co proj destroy [--force]`\n- `co proj status`\n\n### 4. Update `cmd/run.go`\n\n- Add `--project` flag\n- Use `project.Find()` to get context\n- Query beads from `project.MainRepoPath()`\n- Create worktrees for each task\n- Clean up worktrees on completion\n\n### 5. Update `internal/claude/runner.go`\n\n- Accept project name parameter\n- Use session name `co-\u003cproject\u003e` (one session per project)\n- Pane name is the task ID\n- Work directory is the worktree path\n\n### 6. Update database schema\n\nAdd project tracking:\n```sql\n-- Beads table gains project context\nALTER TABLE beads ADD COLUMN worktree_path TEXT;\n```\n\n## Files to Modify\n\n| File | Changes |\n|------|---------|\n| `cmd/root.go` | Add `proj` command group, `--project` global flag |\n| `cmd/run.go` | Project context, worktree creation/cleanup |\n| `cmd/complete.go` | Find project from cwd |\n| `cmd/status.go` | Show worktree info |\n| `internal/claude/runner.go` | Project-aware session naming |\n| `internal/beads/client.go` | Accept repo path parameter |\n| `internal/db/db.go` | Path from project, schema update |\n\n## New Files\n\n| File | Purpose |\n|------|---------|\n| `cmd/proj.go` | Project management commands |\n| `internal/project/project.go` | Project discovery and config |\n| `internal/project/config.go` | TOML config parsing |\n| `internal/worktree/worktree.go` | Git worktree operations |\n\n## Verification\n\n1. **Create project from local repo:**\n   ```bash\n   co proj create ~/co-test ~/some-repo\n   ls ~/co-test/  # Should show .co/, main/\n   cat ~/co-test/.co/config.toml\n   ```\n\n2. **Create project from GitHub:**\n   ```bash\n   co proj create ~/co-github https://github.com/user/repo\n   ls ~/co-github/main/.git  # Should be a real clone\n   ```\n\n3. **Run from project dir:**\n   ```bash\n   cd ~/co-test\n   co run --dry-run  # Should find project, list beads from main/\n   ```\n\n4. **Run from subdirectory:**\n   ```bash\n   cd ~/co-test/main/src\n   co run --dry-run  # Should still find project root\n   ```\n\n5. **Worktree lifecycle:**\n   ```bash\n   co run  # Creates worktree, runs Claude, cleans up\n   ls ~/co-test/  # Worktree should be gone after completion\n   ```\n\n6. **Zellij session/pane:**\n   ```bash\n   zellij list-sessions  # Should show co-\u003cproject-name\u003e\n   zellij -s co-\u003cproject-name\u003e action list-panes  # Should show task panes\n   ```\n\n## Future Work (Out of Scope)\n\n- Dependency management between beads for parallel execution\n- Running multiple independent tasks concurrently in same Zellij session\n- `co proj list` to show all known projects\n","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T10:22:37.856945-05:00","created_by":"matthew","updated_at":"2026-01-10T10:45:14.697697-05:00","closed_at":"2026-01-10T10:45:14.697697-05:00","close_reason":"Implemented all child tasks for project-based orchestrator with worktree isolation"}
{"id":"ac-la1.1","title":"Add internal/project/ package","description":"Create the project discovery and configuration package.\n\n## Implementation\n- Create internal/project/project.go with Project struct\n- Create internal/project/config.go for TOML parsing\n- Implement Find(startDir) to walk up looking for .co/\n- Implement Create(dir, repoSource) for project initialization\n- Implement MainRepoPath() and WorktreePath(taskID) helpers\n\n## Config Structure\n```toml\n[project]\nname = \"\u003cdir-basename\u003e\"\ncreated_at = \"2024-...\"\n\n[repo]\ntype = \"local\" | \"github\"\nsource = \"\u003coriginal-path-or-url\u003e\"\npath = \"main\"\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:22:53.312453-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.783237-05:00","closed_at":"2026-01-10T10:44:22.783237-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.1","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:22:53.313396-05:00","created_by":"matthew"}]}
{"id":"ac-la1.2","title":"Add internal/worktree/ package","description":"Create git worktree management package.\n\n## Implementation\n- Create internal/worktree/worktree.go\n- Implement Create(repoPath, worktreePath, branch) \n- Implement Remove(repoPath, worktreePath)\n- Implement List(repoPath) returning []Worktree\n- Implement Exists(repoPath, worktreePath)\n\n## Commands\n- Create: git -C \u003crepo\u003e worktree add \u003cpath\u003e -b \u003cbranch\u003e\n- Remove: git -C \u003crepo\u003e worktree remove \u003cpath\u003e\n- List: git -C \u003crepo\u003e worktree list --porcelain","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:20.778468-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.786589-05:00","closed_at":"2026-01-10T10:44:22.786589-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.2","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:20.779348-05:00","created_by":"matthew"}]}
{"id":"ac-la1.3","title":"Add cmd/proj.go with subcommands","description":"Create project management CLI commands.\n\n## Commands\n- co proj create \u003cdir\u003e \u003crepo\u003e: Creates project directory, .co/, symlinks/clones repo\n- co proj destroy [--force]: Removes worktrees and project directory\n- co proj status: Shows project info, active worktrees, task states\n\n## Behavior\n- proj create: detect local path vs GitHub URL, create structure, init DB\n- proj destroy: find project root, confirm, cleanup worktrees, delete dir\n- proj status: show config, list worktrees, show task states from DB","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:20.997707-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.788875-05:00","closed_at":"2026-01-10T10:44:22.788875-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.3","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:20.998384-05:00","created_by":"matthew"},{"issue_id":"ac-la1.3","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.209763-05:00","created_by":"matthew"}]}
{"id":"ac-la1.4","title":"Update cmd/run.go for project context","description":"Modify run command to use project-based workflow.\n\n## Changes\n- Add --project flag for explicit project path\n- Use project.Find() to get context from cwd or flag\n- Load config from .co/config.toml\n- Query beads from project.MainRepoPath() (where .beads/ lives)\n- Create worktree before each task\n- Clean up worktree on success, keep on failure\n- Pass project name to claude.Run() for Zellij session naming","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:21.227045-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.790902-05:00","closed_at":"2026-01-10T10:44:22.790902-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.4","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.227733-05:00","created_by":"matthew"},{"issue_id":"ac-la1.4","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.339098-05:00","created_by":"matthew"},{"issue_id":"ac-la1.4","depends_on_id":"ac-la1.2","type":"blocks","created_at":"2026-01-10T10:23:34.45809-05:00","created_by":"matthew"}]}
{"id":"ac-la1.5","title":"Update internal/claude/runner.go for project sessions","description":"Modify Claude runner for project-aware Zellij sessions.\n\n## Changes\n- Accept project name parameter in Run()\n- Use session name co-\u003cproject\u003e (one session per project)\n- Pane name is the task ID (already done)\n- Work directory is the worktree path (passed in)\n\n## Zellij Model\n- Session: co-\u003cproject-name\u003e\n- Panes: \u003ctask-id\u003e for each task\n- Enables parallel tasks within same project in future","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T10:23:21.444426-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.792581-05:00","closed_at":"2026-01-10T10:44:22.792581-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.5","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.445082-05:00","created_by":"matthew"},{"issue_id":"ac-la1.5","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.580327-05:00","created_by":"matthew"}]}
{"id":"ac-la1.6","title":"Update database for project context","description":"Update SQLite database for project-aware tracking.\n\n## Changes\n- Database path now comes from project (.co/tracking.db)\n- Add worktree_path column to beads table\n- Update db.Open() to accept path parameter\n- Update schema migration if needed\n\n## Schema Change\nALTER TABLE beads ADD COLUMN worktree_path TEXT;","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T10:23:21.67905-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.794199-05:00","closed_at":"2026-01-10T10:44:22.794199-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.6","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.679753-05:00","created_by":"matthew"},{"issue_id":"ac-la1.6","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.692759-05:00","created_by":"matthew"}]}
{"id":"ac-la1.7","title":"Update supporting commands and clients","description":"Update remaining files for project context.\n\n## Files\n- cmd/root.go: Add proj command group, --project global flag\n- cmd/complete.go: Find project from cwd\n- cmd/status.go: Show worktree info\n- internal/beads/client.go: Accept repo path parameter for bd commands\n\n## Changes\n- All commands that need project context use project.Find()\n- Beads client runs bd commands in the main repo directory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T10:23:21.900393-05:00","created_by":"matthew","updated_at":"2026-01-10T10:44:22.796011-05:00","closed_at":"2026-01-10T10:44:22.796011-05:00","close_reason":"Implemented project-based orchestrator with worktree isolation","dependencies":[{"issue_id":"ac-la1.7","depends_on_id":"ac-la1","type":"parent-child","created_at":"2026-01-10T10:23:21.901124-05:00","created_by":"matthew"},{"issue_id":"ac-la1.7","depends_on_id":"ac-la1.1","type":"blocks","created_at":"2026-01-10T10:23:34.797419-05:00","created_by":"matthew"}]}
{"id":"ac-lcz","title":"Add task dependencies database migration and queries","description":"Create migration 009_task_dependencies.sql with task_dependencies table. Add SQL queries for AddTaskDependency, GetTaskDependencies, GetReadyTasks. Create internal/db/task_dependencies.go with Go wrapper functions.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:12.245594-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:37:43.575006-05:00","closed_at":"2026-01-12T17:37:43.57501-05:00","dependencies":[{"issue_id":"ac-lcz","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.141024-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ljt5","title":"Remove zellij display code from commands","description":"Remove code that displays ZellijSession/ZellijPane from cmd/status.go, cmd/work.go, cmd/tui.go, cmd/task.go","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:18.936522-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:27:03.160766-05:00","closed_at":"2026-01-14T10:27:03.160766-05:00","close_reason":"Removed task zellij display code from cmd/task.go and cmd/tui.go","dependencies":[{"issue_id":"ac-ljt5","depends_on_id":"ac-bj0e","type":"parent-child","created_at":"2026-01-14T10:01:33.52051-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ljt5","depends_on_id":"ac-8t3g","type":"blocks","created_at":"2026-01-14T10:01:40.092374-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-mbc","title":"TUI Management Interface (lazygit-style)","description":"Transform `co poll` from a simple monitoring TUI into a full lazygit-style management interface for the Claude Orchestrator.\n\n## Design\n\n### Layout (3-panel lazygit-style)\n```\n┌─────────────────────────────────────────────────────────────────┐\n│ co - Claude Orchestrator                              [?] Help  │\n├─────────────────┬─────────────────┬─────────────────────────────┤\n│ [1] Works       │ [2] Beads       │ [3] Details                 │\n│                 │                 │                             │\n│ \u003e w-abc ●       │   beads-123     │ Work: w-abc                 │\n│   w-def ✓       │ \u003e beads-456     │ Branch: feat/new-feature    │\n│   w-ghi ○       │   beads-789     │ Status: processing          │\n│                 │                 │ PR: -                       │\n│                 │                 ├─────────────────────────────│\n│                 │                 │ Tasks (2/3)                 │\n│                 │                 │ w-abc.1 ✓ implement         │\n│                 │                 │ w-abc.2 ● implement         │\n│                 │                 │ w-abc.3 ○ implement         │\n├─────────────────┴─────────────────┴─────────────────────────────┤\n│ [c]reate [d]estroy [p]lan [r]un [a]ssign [A]uto [R]eview [P]R   │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n### Panels\n1. **Works Panel** - All work units with status indicators (○ pending, ● processing, ✓ completed, ✗ failed)\n2. **Beads Panel** - Ready beads from `bd ready`, toggle to show all beads\n3. **Details Panel** - Context-sensitive details for selected item, shows nested tasks/beads\n\n### Key Bindings\n- `c` - Create work (branch name input wizard)\n- `d` - Destroy selected work\n- `p` - Plan work (manual grouping or auto-group dialog)\n- `r` - Run work (start task execution)\n- `a` - Assign beads to selected work\n- `A` - Automated workflow (create + plan + run + review + PR)\n- `R` - Create review task for work\n- `P` - Create PR task for work\n- `Tab` / `1-3` - Switch between panels\n- `j/k` or `↑/↓` - Navigate within panel\n- `Enter` - Drill down / expand / select\n- `Space` - Toggle selection (for multi-select)\n- `?` - Show help modal\n- `q` - Quit\n\n### Sub-views/Dialogs\n1. **Create Work Dialog** - Text input for branch name\n2. **Plan Dialog** - Choice between manual grouping and auto-group\n3. **Bead Assignment** - Multi-select beads to add to work\n4. **Help Modal** - Full keybinding reference\n\n## Implementation Phases\n\nPhase 1: Core TUI Framework\n- Create new TUI model with panel-based layout\n- Implement panel switching and navigation\n- Set up data fetching (works, beads, tasks)\n\nPhase 2: Display Components\n- Works list with status indicators\n- Beads list with ready/blocked indicators\n- Details panel with context-sensitive content\n- Status bar with available actions\n\nPhase 3: Work Management Actions\n- Create work dialog\n- Destroy work confirmation\n- Plan work (manual and auto-group)\n- Run work\n\nPhase 4: Bead Assignment\n- Assign beads to work\n- Multi-select interface\n- Show bead dependencies\n\nPhase 5: Advanced Actions\n- Automated workflow (A key)\n- Review task creation (R key)\n- PR task creation (P key)\n\nPhase 6: Polish\n- Help modal\n- Error handling and feedback\n- Responsive layout for different terminal sizes","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:31:19.940064-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.714518-05:00","closed_at":"2026-01-13T20:05:29.714518-05:00","close_reason":"TUI management interface implemented in PR #69"}
{"id":"ac-mv4","title":"Add task CRUD operations to internal/db/database.go","description":"Add functions: CreateTask(task), StartTask(taskID, session, pane, worktree), CompleteTask(taskID, prURL), FailTask(taskID, errMsg), GetTaskBeads(taskID), GetTaskForBead(beadID), CompleteTaskBead(taskID, beadID), FailTaskBead(taskID, beadID), IsTaskCompleted(taskID). Include logic to auto-complete task when all beads are done.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:33.655441-05:00","created_by":"matthew","updated_at":"2026-01-10T11:47:04.360805-05:00","closed_at":"2026-01-10T11:47:04.360805-05:00","close_reason":"Added task CRUD operations to database","dependencies":[{"issue_id":"ac-mv4","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.984663-05:00","created_by":"matthew"},{"issue_id":"ac-mv4","depends_on_id":"ac-fru","type":"blocks","created_at":"2026-01-10T11:35:20.579713-05:00","created_by":"matthew"}]}
{"id":"ac-ne39","title":"Add test coverage for run.go functions","description":"cmd/run_test.go only tests groupBeadsByWorkBeadGroup. Missing tests for createTasksFromWorkBeads and planBeadsWithComplexity functions.","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T19:03:48.090473-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:11:44.931077-05:00","closed_at":"2026-01-13T19:11:44.931077-05:00","close_reason":"Fixed in feat/redo-bead-work branch"}
{"id":"ac-nehx","title":"TUI Three-Mode Architecture Refactoring","description":"Refactor TUI from 3-depth drill-down to three-mode architecture: Plan, Work, Monitor modes. Display 'issues' instead of 'beads'. Workers get human names for identification.","status":"closed","priority":1,"issue_type":"epic","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:16.623604-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:33:10.915519-05:00","closed_at":"2026-01-14T11:33:10.915519-05:00","close_reason":"All 10 child beads completed: database schema, names package, TUI refactoring with Plan/Work/Monitor modes, shared code extraction, and polish."}
{"id":"ac-nz0","title":"Create internal/db/db.go for SQLite connection","description":"Create internal/db/db.go with:\n- Open() function to initialize DB connection and create ~/.config/co/tracking.db\n- Close() function\n- Schema creation with beads table:\n  - id, status, title, pr_url, error_message\n  - zellij_session (TEXT) - zellij session name where Claude is running\n  - zellij_pane (TEXT) - pane name/ID within the session\n  - started_at, completed_at, created_at, updated_at\n- Status constants: pending, processing, completed, failed\n- Support CO_DB_PATH env var override","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.02255-05:00","created_by":"matthew","updated_at":"2026-01-10T09:43:25.986541-05:00","closed_at":"2026-01-10T09:43:25.986541-05:00","close_reason":"Created internal/db/db.go with Open(), Close(), schema creation with beads table, status constants, and CO_DB_PATH env var support","dependencies":[{"issue_id":"ac-nz0","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.718597-05:00","created_by":"matthew"},{"issue_id":"ac-nz0","depends_on_id":"ac-6n7","type":"blocks","created_at":"2026-01-10T09:35:22.062034-05:00","created_by":"matthew"}]}
{"id":"ac-o1y","title":"Extract duplicate prompt-building switch to shared helper","description":"executeTask in orchestrate.go:116-157 and processTask in task_processing.go:14-115 have similar switch statements for building prompts by task type.\n\nExtract to a shared helper function like:\n  func buildPromptForTask(task *db.Task, work *db.Work, beadList []beads.Bead) (string, error)\n\nThis reduces duplication and ensures consistent prompt building.","status":"closed","priority":4,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:35.292413-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:30:18.013525-05:00","closed_at":"2026-01-13T11:30:18.013525-05:00","close_reason":"Extracted buildPromptForTask and getBeadsForTask helper functions to eliminate duplicate switch statements in executeTask and processTask"}
{"id":"ac-o45","title":"review the current set of command and ensure the docs are up to date","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-13T11:53:17.62222-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:57:45.970704-05:00","closed_at":"2026-01-13T11:57:45.970704-05:00","close_reason":"Updated CLAUDE.md documentation to include all current CLI commands including complete, estimate, list, status, poll, sync, task set-review-epic, work pr, work review, and work create --bead. Also updated project structure section to reflect all cmd files."}
{"id":"ac-o8ym","title":"Polish TUI: styling, state persistence, help screens","description":"Final polish: mode tab bar styling, state persistence when switching modes, help screen for each mode, UI terminology 'beads' to 'issues' in all display text","status":"closed","priority":3,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:58.398392-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:32:34.737279-05:00","closed_at":"2026-01-14T11:32:34.737279-05:00","close_reason":"Polished TUI: integrated dedicated mode models into root model, updated terminology from 'beads' to 'issues' in UI, added mode-specific help screens, ensured state persistence via FocusChanged notifications.","dependencies":[{"issue_id":"ac-o8ym","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:16.324021-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-o8ym","depends_on_id":"ac-oem8","type":"blocks","created_at":"2026-01-14T11:02:32.234586-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-o8ym","depends_on_id":"ac-9obk","type":"blocks","created_at":"2026-01-14T11:02:32.35817-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-o8ym","depends_on_id":"ac-p8f0","type":"blocks","created_at":"2026-01-14T11:02:32.499722-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ob2","title":"Fix work ID prefix detection in work.go","description":"Change line 546 in cmd/work.go from checking 'work-' prefix to 'w-' prefix. This function already returns ID directly without DB check.","status":"closed","priority":1,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T09:25:51.257733-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T10:07:38.422542-05:00","closed_at":"2026-01-12T09:40:08.775722-05:00","dependencies":[{"issue_id":"ac-ob2","depends_on_id":"ac-0pg","type":"blocks","created_at":"2026-01-12T09:26:13.999727-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-oem8","title":"Implement Work Mode (tui_work.go)","description":"Create tui_work.go: extract current works/tasks management, left panel with workers list (showing human names), right panel with worker details and controls (create, destroy, assign, run)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:52.718522-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:27:48.660265-05:00","closed_at":"2026-01-14T11:27:48.660265-05:00","close_reason":"Implemented Work Mode in cmd/tui_work.go with workers list showing human names, tasks panel, details panel, and controls for create/destroy/plan/run/assign/review/PR.","dependencies":[{"issue_id":"ac-oem8","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:15.909438-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-oem8","depends_on_id":"ac-ykn2","type":"blocks","created_at":"2026-01-14T11:02:30.803665-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ohv9","title":"Create migration to remove zellij_session/zellij_pane columns","description":"Add migration file to drop zellij_session and zellij_pane columns from tasks table","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:18.214184-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:23:50.659251-05:00","closed_at":"2026-01-14T10:23:50.659251-05:00","close_reason":"Created migration 014_remove_task_zellij_columns.sql and updated schema.sql","dependencies":[{"issue_id":"ac-ohv9","depends_on_id":"ac-bj0e","type":"parent-child","created_at":"2026-01-14T10:01:33.084914-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ozhr","title":"Update plan mode help with multi-select keybindings","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:14.636316-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:45:53.365876-05:00","closed_at":"2026-01-14T20:45:53.365876-05:00","close_reason":"Added multi-select functionality to Plan mode: Space key toggles issue selection, 'w' creates work from selected issues (comma-separated), updated help text with multi-select keybindings and indicators"}
{"id":"ac-p8f0","title":"Implement Monitor Mode with grid layout (tui_monitor.go)","description":"Create tui_monitor.go: grid layout (2x2, 3x2 etc.) with one panel per worker, each panel shows status header + tasks list with states, auto-resize on terminal/worker changes, 2s polling, arrow key navigation","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:56.425441-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:29:34.378482-05:00","closed_at":"2026-01-14T11:29:34.378482-05:00","close_reason":"Implemented Monitor Mode in cmd/tui_monitor.go with grid layout (2x2, 3x2 etc.), one panel per worker showing status header, progress bar, tasks list with states, 2s polling, arrow key navigation.","dependencies":[{"issue_id":"ac-p8f0","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:16.178287-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-p8f0","depends_on_id":"ac-ykn2","type":"blocks","created_at":"2026-01-14T11:02:31.092385-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-p9b","title":"Create cmd/status.go subcommand","description":"Create cmd/status.go implementing:\n- co status [bead-id]\n- With ID: Show detailed status including zellij session/pane info\n- Without ID: Show all beads currently processing with their session/pane\n- Useful for debugging which Claude instance is working on what","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.678228-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.540741-05:00","closed_at":"2026-01-10T09:45:02.540741-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-p9b","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.722503-05:00","created_by":"matthew"},{"issue_id":"ac-p9b","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.654291-05:00","created_by":"matthew"}]}
{"id":"ac-pij","title":"Work command auto-submit and re-review improvements","description":"Improvements to work pr and work review commands for better UX","status":"closed","priority":2,"issue_type":"epic","owner":"matthew@customer.io","created_at":"2026-01-11T18:11:57.056096-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T18:15:06.185372-05:00","closed_at":"2026-01-11T18:15:06.185372-05:00","close_reason":"Completed all child beads: unique review task IDs, auto-run review task, and auto-run PR task"}
{"id":"ac-pjw","title":"Execution phase: Update run.go for work-centric processing","description":"Update cmd/run.go to process works instead of tasks. Implement work context detection. Works control worktrees, tasks run sequentially within work's zellij tab.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:18:15.075753-05:00","created_by":"matthew","updated_at":"2026-01-10T21:42:34.369852-05:00","closed_at":"2026-01-10T21:42:34.369852-05:00","close_reason":"Implemented: Work commands with create/list/show/destroy, work-centric execution in run.go, zellij tab management, documentation updates, and testing completed","dependencies":[{"issue_id":"ac-pjw","depends_on_id":"ac-s4d","type":"blocks","created_at":"2026-01-10T18:19:24.644676-05:00","created_by":"matthew"}]}
{"id":"ac-pun","title":"Implement Run Work action","description":"Add 'r' keybinding to run selected work. Show confirmation if work has unplanned beads. Call run command. Update work status in real-time as tasks execute.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:28.95471-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.982839-05:00","closed_at":"2026-01-13T20:05:36.982839-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-pun","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.376612-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-pun","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:04.012962-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-qcz","title":"Add helper functions for branch name generation and dependency collection","description":"Implement generateBranchName() to create git-safe branch names from bead titles, and helper functions for collecting transitive dependencies.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:42.350319-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.092658-05:00","closed_at":"2026-01-11T21:03:27.719241-05:00","dependencies":[{"issue_id":"ac-qcz","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:24.662675-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-qd1h","title":"Complete runAutomatedWorkflowForWork implementation","description":"The function at cmd/work.go:359 has a TODO comment and just spawns the orchestrator instead of implementing the full automated workflow (implement, review/fix loop, PR)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T18:54:17.650263-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T18:58:30.634645-05:00","closed_at":"2026-01-13T18:58:30.634645-05:00","close_reason":"Consolidated runAutomatedWorkflowForWork with runFullAutomatedWorkflow by delegating to the latter"}
{"id":"ac-qfhl","title":"w key in plan mode still calls the cli?","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:40:58.240487-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:45:02.28857-05:00","closed_at":"2026-01-14T20:45:02.28857-05:00","close_reason":"Refactored executeCreateWork in tui_plan.go to call internal logic (CreateWorkWithBranch, addBeadGroupsToWork, SpawnWorkOrchestrator) directly instead of shelling out to 'co work create' CLI command via zellij"}
{"id":"ac-ql4","title":"Implement high-level zellij operations","description":"Implement TerminateProcess(session) - sends Ctrl+C twice with delay, and ClearAndExecute(session, cmd) - clears line and runs command","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:15.220673-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.281107-05:00","closed_at":"2026-01-13T13:14:41.281107-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-ql4","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:40.956681-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ql4","depends_on_id":"ac-8hf","type":"blocks","created_at":"2026-01-13T13:03:56.341787-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ql4","depends_on_id":"ac-4fu","type":"blocks","created_at":"2026-01-13T13:03:56.455922-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-qw66","title":"the orchestrator isn't automatically started if it was stopped","description":"matthew@Matthew-Newhook w-22u % co plan ac-xom2\nUsing project: co-proj\nPlanning tasks for work: w-22u\nCreated implement task w-22u.3 with 1 bead(s): ac-xom2\n\nCreated 1 implement task(s). Run 'co run' to execute.\nmatthew@Matthew-Newhook w-22u % co run\nUsing project: co-proj\n\n=== Running work w-22u ===\nBranch: feat/tui-management-interface-lazygit-style\nWorktree: /Users/matthew/co-proj/w-22u/tree\nWork orchestrator tab work-w-22u already exists\n\nOrchestrator is already running.\nSwitch to the zellij session to monitor progress.","status":"open","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-13T14:15:17.648434-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T14:15:17.648434-05:00","dependencies":[{"issue_id":"ac-qw66","depends_on_id":"ac-580r","type":"blocks","created_at":"2026-01-14T17:41:11.589598-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-qw66","depends_on_id":"ac-b7nf","type":"blocks","created_at":"2026-01-14T17:41:11.689867-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-r51","title":"Add GetBead function to beads client","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T20:45:11.286533-05:00","created_by":"matthew","updated_at":"2026-01-09T20:48:31.350644-05:00","closed_at":"2026-01-09T20:48:31.350644-05:00","close_reason":"Added GetBead(id) function to internal/beads/client.go that retrieves a single bead by ID using bd show --json."}
{"id":"ac-rba","title":"Add --bead flag to co work create command","description":"Modify cmd/work.go to add --bead flag, make branch argument optional when bead is provided, auto-generate branch name, and call automated workflow when flag is present.","status":"closed","priority":1,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:59.520023-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.093419-05:00","closed_at":"2026-01-11T21:03:53.49171-05:00","dependencies":[{"issue_id":"ac-rba","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:35.427306-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-rba","depends_on_id":"ac-7pu","type":"blocks","created_at":"2026-01-11T19:33:07.147473-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-rba","depends_on_id":"ac-2rz","type":"blocks","created_at":"2026-01-11T19:33:09.734262-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-rba","depends_on_id":"ac-8es","type":"blocks","created_at":"2026-01-11T19:33:12.198909-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-rcy","title":"Virtual Tasks: Group beads by complexity for efficient context usage","description":"Redesign co run to group beads into virtual tasks based on LLM-estimated complexity. Each Claude Code agent works on a task (multiple beads), producing one PR per task. Algorithm: dependency flattening → complexity estimation → bin-packing. See plan file: ~/.claude/plans/indexed-frolicking-bunny.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T11:33:43.137206-05:00","created_by":"matthew","updated_at":"2026-01-10T15:07:30.699654-05:00","closed_at":"2026-01-10T15:07:30.699654-05:00","close_reason":"All dependent tasks completed - virtual task grouping implemented"}
{"id":"ac-rd7","title":"Restore review-fix loop in orchestrator","description":"The old workflow had a review-fix loop that could iterate up to 5 times. If review found issues, it would create fix tasks and re-run.\n\nThe new model creates a single review task followed by pr task. If review finds issues, there's no mechanism to:\n1. Create fix tasks for issues found\n2. Re-run review after fixes\n3. Limit iterations to prevent infinite loops\n\nOptions:\n- Make review task create child fix tasks with dependencies\n- Add review iteration logic to orchestrator\n- Have review task handle fixes inline","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T18:10:34.643617-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T18:49:42.311916-05:00","closed_at":"2026-01-12T18:49:42.311916-05:00","close_reason":"Integrated review-fix loop into the orchestrator (cmd/orchestrate.go). After a review task completes, handleReviewFixLoop checks for new beads via review_epic_id, creates fix tasks, creates a new review task, and updates PR task dependencies. Limited to 5 iterations."}
{"id":"ac-rf0n","title":"Add Space key toggle and Esc to clear selection in plan mode","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:12.292015-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:37:12.292015-05:00","dependencies":[{"issue_id":"ac-rf0n","depends_on_id":"ac-xg7k","type":"blocks","created_at":"2026-01-14T20:37:24.121636-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-rky","title":"Create internal/task/complexity.go with LLM-based complexity estimator","description":"Implement ComplexityEstimator interface with Estimate(bead) (score, tokens, error). Create LLMEstimator using Claude Haiku API to analyze bead title+description and return complexity score (1-10) and estimated context tokens. Include caching logic that checks description_hash against complexity_cache table.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:14.846849-05:00","created_by":"matthew","updated_at":"2026-01-10T11:58:57.501077-05:00","closed_at":"2026-01-10T11:58:57.501077-05:00","close_reason":"Created LLM-based complexity estimator with caching","dependencies":[{"issue_id":"ac-rky","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:03.760278-05:00","created_by":"matthew"},{"issue_id":"ac-rky","depends_on_id":"ac-345","type":"blocks","created_at":"2026-01-10T11:35:20.811773-05:00","created_by":"matthew"}]}
{"id":"ac-rnx","title":"Testing: Verify work concept implementation","description":"Test work creation, planning within work context, execution of works, zellij tab behavior, PR creation per work. Verify database state and directory structure.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T18:18:48.514893-05:00","created_by":"matthew","updated_at":"2026-01-10T21:42:34.377267-05:00","closed_at":"2026-01-10T21:42:34.377267-05:00","close_reason":"Implemented: Work commands with create/list/show/destroy, work-centric execution in run.go, zellij tab management, documentation updates, and testing completed","dependencies":[{"issue_id":"ac-rnx","depends_on_id":"ac-dzl","type":"blocks","created_at":"2026-01-10T18:19:24.980974-05:00","created_by":"matthew"}]}
{"id":"ac-rqb","title":"Add unit tests for dependency flattening and bin-packing algorithms","description":"Create internal/task/planner_test.go with tests for: dependency graph building, identifying groupable beads, first-fit decreasing bin-packing, respecting dependency constraints. Test edge cases: single bead, all beads independent, chain dependencies, circular reference detection.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:50.277592-05:00","created_by":"matthew","updated_at":"2026-01-10T12:02:47.826538-05:00","closed_at":"2026-01-10T12:02:47.826538-05:00","close_reason":"Tests already added in planner_test.go: dependency graph, topological sort, cycle detection, bin-packing, budget splitting, dependency constraints","dependencies":[{"issue_id":"ac-rqb","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.552774-05:00","created_by":"matthew"},{"issue_id":"ac-rqb","depends_on_id":"ac-3wt","type":"blocks","created_at":"2026-01-10T11:35:33.098538-05:00","created_by":"matthew"}]}
{"id":"ac-rtd","title":"Add backfill logic for existing migrations down_sql","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T12:25:44.753566-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T12:42:05.713785-05:00","closed_at":"2026-01-13T12:42:05.713785-05:00","close_reason":"Added backfill logic to populate down_sql for existing migrations after migration 012 is applied","dependencies":[{"issue_id":"ac-rtd","depends_on_id":"ac-5rj","type":"parent-child","created_at":"2026-01-13T12:26:04.682485-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-rtd","depends_on_id":"ac-8zo","type":"blocks","created_at":"2026-01-13T12:26:14.413889-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-rvf","title":"Add base branch option to co work command","description":"The `co work create` command currently creates feature branches off the default main branch and targets main for PRs. Add a `--base` option to specify:\n\n1. Which branch to base the worktree/feature branch off of\n2. Which branch the PR should target for merging\n\nThis enables working on features that build on other in-progress work branches, or targeting release branches instead of main.\n\nExample usage:\n```\nco work create --base epic-feature-branch\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:33:35.484693-05:00","created_by":"matthew","updated_at":"2026-01-11T13:28:16.395342-05:00","closed_at":"2026-01-11T13:28:16.395342-05:00","close_reason":"Feature implemented - added --base flag to co work create command"}
{"id":"ac-s4d","title":"Go models: Create work.go and update task.go","description":"Create internal/db/work.go with Work struct and methods (CreateWork, StartWork, CompleteWork, etc.). Update internal/db/task.go to add WorkID field and remove worktree management.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:17:52.389933-05:00","created_by":"matthew","updated_at":"2026-01-10T20:56:33.068728-05:00","closed_at":"2026-01-10T20:56:33.068728-05:00","close_reason":"Implemented: Created internal/db/work.go with Work struct and methods. Updated task.go to add WorkID field and modified CreateTask/StartTask methods.","dependencies":[{"issue_id":"ac-s4d","depends_on_id":"ac-61b","type":"blocks","created_at":"2026-01-10T18:19:24.425481-05:00","created_by":"matthew"}]}
{"id":"ac-s4iv","title":"Only call handleReviewFixLoop in auto mode","description":"When a review task completes, handleReviewFixLoop is called which auto-creates fix tasks or PR. This should only happen in auto mode, not when user manually creates a review task via TUI.\n\nCurrent behavior:\n- User presses R in TUI Work mode → creates review task\n- Orchestrator picks up and runs the review task\n- executeTask calls handleReviewFixLoop → auto-creates PR/fix tasks (unwanted)\n\nPossible solutions:\n1. Add auto_mode flag to Work model, only call handleReviewFixLoop if work.AutoMode\n2. Check if review task has dependencies (auto-created reviews depend on implement tasks, manual ones don't)\n3. Store origin/source on tasks to distinguish manual vs auto-created\n\nThe simplest may be option 2: check if the review task has dependencies before calling handleReviewFixLoop.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:45:33.223404-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:45:33.223404-05:00"}
{"id":"ac-s9cx","title":"the work mode doesn't automatically refresh","description":"## Problem\n\nThe Work mode in the TUI doesn't automatically refresh after switching modes (e.g., switching from Work to Plan and back to Work).\n\n## Root Cause\n\nThe `FocusChanged()` method in `tui_work.go` only calls `refreshData()` once when gaining focus, but does NOT restart the periodic tick timer. The tick chain established in `Init()` is lost when switching modes.\n\nIn contrast, Plan mode correctly re-establishes periodic refresh in its `FocusChanged()` method by calling both `refreshData()` and `startPeriodicRefresh()`.\n\n### Current Behavior\n\n| Mode | Init() | FocusChanged(true) | Result |\n|------|--------|-------------------|--------|\n| Plan | refreshData() | refreshData() + startPeriodicRefresh() | Continues refreshing |\n| Work | refreshData() + tick() | refreshData() only | **Stops refreshing** |\n| Monitor | refreshData() + tick() | refreshData() only | **Stops refreshing** |\n\n## Files to Fix\n\n1. `cmd/tui_work.go:117-125` - Add `m.tick()` to `FocusChanged()` return\n2. `cmd/tui_monitor.go:81-88` - Same fix for consistency\n\n## Fix\n\nUpdate `FocusChanged()` in both files to restart the tick timer:\n\n```go\nfunc (m *workModel) FocusChanged(focused bool) tea.Cmd {\n    m.focused = focused\n    if focused {\n        m.loading = true\n        return tea.Batch(m.refreshData(), m.tick())  // Add m.tick()\n    }\n    return nil\n}\n```\n\n## Verification\n\n1. Start TUI, switch to Work mode - verify 2-second refresh\n2. Press `c` then `p` to switch to Plan mode\n3. Press `c` then `w` to switch back to Work mode\n4. Verify Work mode continues refreshing automatically","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:52:38.298256-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:31:37.232543-05:00","closed_at":"2026-01-14T20:31:37.232543-05:00","close_reason":"Added m.tick() to tea.Batch in FocusChanged() for both tui_work.go and tui_monitor.go to restart periodic refresh when gaining focus"}
{"id":"ac-sjx","title":"GetContext() is often called multiple times.","description":"\nFor example, the call to GetWork(GetContext()) should use ctx.\n\nfunc runPlan(cmd *cobra.Command, args []string) error {\n\tctx := GetContext()\n\tproj, err := project.Find(ctx, flagPlanProject)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"not in a project directory: %w\", err)\n\t}\n\tdefer proj.Close()\n\n\tfmt.Printf(\"Using project: %s\\n\", proj.Config.Project.Name)\n\n\t// Determine work context\n\tworkID := flagPlanWork\n\tif workID == \"\" {\n\t\t// Try to detect work from current directory\n\t\tworkID, _ = detectWorkFromDirectory(proj)\n\t}\n\n\t// Validate work exists if specified\n\tvar work *db.Work\n\tif workID != \"\" {\n\t\twork, err = proj.DB.GetWork(GetContext(), workID)\n","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-13T09:51:48.772559-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T10:34:24.975115-05:00","closed_at":"2026-01-13T10:34:24.975115-05:00","close_reason":"Fixed redundant GetContext() calls across cmd package - reused existing ctx variable where it was already defined instead of calling GetContext() multiple times"}
{"id":"ac-sqi","title":"Implement partial failure handling with partial PR creation","description":"When agent fails mid-task: 1) Detect via polling (agent exits without all beads complete), 2) If any work committed, create PR listing completed beads and noting failed ones, 3) Mark failed beads in task_beads table, 4) Keep worktree for debugging. Allow retry of failed beads with co run \u003cfailed-bead-id\u003e.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:34:50.0705-05:00","created_by":"matthew","updated_at":"2026-01-10T12:10:40.476992-05:00","closed_at":"2026-01-10T12:10:40.476992-05:00","close_reason":"Implemented partial failure handling with partial PR creation","dependencies":[{"issue_id":"ac-sqi","depends_on_id":"ac-rcy","type":"blocks","created_at":"2026-01-10T11:35:04.445682-05:00","created_by":"matthew"},{"issue_id":"ac-sqi","depends_on_id":"ac-7tz","type":"blocks","created_at":"2026-01-10T11:35:32.77114-05:00","created_by":"matthew"},{"issue_id":"ac-sqi","depends_on_id":"ac-ais","type":"blocks","created_at":"2026-01-10T11:35:32.876338-05:00","created_by":"matthew"}]}
{"id":"ac-t4b2","title":"Implement Assign Beads interface","description":"Add 'a' keybinding to assign beads to selected work. Show multi-select list of ready beads. Space to toggle selection, Enter to confirm. Update work's bead list.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:29.664293-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.98499-05:00","closed_at":"2026-01-13T20:05:36.98499-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-t4b2","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.482234-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-t4b2","depends_on_id":"ac-jsb","type":"blocks","created_at":"2026-01-13T13:33:04.117901-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-t4b2","depends_on_id":"ac-586","type":"blocks","created_at":"2026-01-13T13:33:04.22733-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-t6g","title":"Implement zellij tab management functions","description":"Implement CreateTab(session, name, cwd), SwitchToTab(session, name), QueryTabNames(session), TabExists(session, name), and CloseTab(session)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:03:21.519528-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T13:14:41.276253-05:00","closed_at":"2026-01-13T13:14:41.276253-05:00","close_reason":"Created internal/zellij package with Client struct, session/tab/pane management, high-level operations. Refactored internal/claude/runner.go to use the new package. Added unit tests.","dependencies":[{"issue_id":"ac-t6g","depends_on_id":"ac-8qe","type":"parent-child","created_at":"2026-01-13T13:03:38.885433-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-t6g","depends_on_id":"ac-gn0","type":"blocks","created_at":"2026-01-13T13:03:54.317646-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-tia","title":"Implement git branch and commit operations","description":"Create internal/git/git.go:\n- CreateBranch(name, base string) - create and checkout branch\n- HasChanges() bool - check for uncommitted changes\n- CommitAll(message string) - stage and commit all\n- Push(branch string) - push to origin\n- Checkout(branch string) - switch branches\n- DeleteBranch(branch string) - cleanup after merge\n- GetCurrentBranch() string - get current branch name\n\nAcceptance criteria:\n- All git operations work via exec.Command\n- Proper error handling for git failures","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T20:18:45.184949-05:00","created_by":"matthew","updated_at":"2026-01-09T20:36:51.728059-05:00","closed_at":"2026-01-09T20:36:51.728059-05:00","close_reason":"Implemented streamlined git operations (GetCurrentBranch, Checkout, DeleteBranch, Push). Removed CreateBranch, CommitAll, HasChanges since Claude Code handles those per CLAUDE.md workflow.","dependencies":[{"issue_id":"ac-tia","depends_on_id":"ac-ieo","type":"blocks","created_at":"2026-01-09T20:20:19.493061-05:00","created_by":"matthew"}]}
{"id":"ac-tu0z","title":"Implement Automated Workflow action","description":"Add 'A' keybinding for automated workflow. Creates work from selected beads, auto-groups, runs, reviews until clean, creates PR. Shows progress indicator. Uses work create --bead flag.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:31.21319-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:36.986955-05:00","closed_at":"2026-01-13T20:05:36.986955-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-tu0z","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:43.598526-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-tu0z","depends_on_id":"ac-fa3","type":"blocks","created_at":"2026-01-13T13:33:04.341568-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-tu0z","depends_on_id":"ac-89r","type":"blocks","created_at":"2026-01-13T13:33:04.459081-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-tu0z","depends_on_id":"ac-pun","type":"blocks","created_at":"2026-01-13T13:33:04.559314-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-u1dp","title":"Fix co work review to check for commits instead of work status","description":"The current check in runWorkReview() uses work.Status == db.StatusPending to block reviews. However:\n1. StartWork() is never called anywhere, so works never transition to 'processing'\n2. Work status doesn't reflect whether commits exist on the branch\n3. Works with commits can still have 'pending' status\n\nFix: Check for actual commits on the branch compared to base branch, rather than relying on work status.\n\nLocation: cmd/work.go:840-842","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T15:44:14.359749-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T15:44:20.544717-05:00"}
{"id":"ac-uria","title":"README.md is out of date","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T20:08:09.09807-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:06:44.067014-05:00","closed_at":"2026-01-14T10:06:44.067014-05:00","close_reason":"Updated README.md to match current two-phase workflow (work → run), updated co work create syntax to use beads instead of branch names, added missing internal packages (signal/, zellij/), added missing cmd files (migrate.go, task_processing.go), updated How It Works diagram, and documented --auto and --plan flags"}
{"id":"ac-v0kx","title":"Add duplicate bead validation in parseBeadGroups","description":"parseBeadGroups in cmd/work.go doesn't detect duplicate beads across groups. For example 'co work create bead-1 bead-1,bead-2' would add bead-1 twice.","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T19:03:49.93006-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:11:44.92606-05:00","closed_at":"2026-01-13T19:11:44.92606-05:00","close_reason":"Fixed in feat/redo-bead-work branch"}
{"id":"ac-vry","title":"Update cmd/plan.go to use batch estimation","description":"Update plan command to use new batch estimation.\n\n**File to modify:** `cmd/plan.go`\n\n**Changes in `planAutoGroup()`:**\n1. Create estimator with project context:\n   `estimator := task.NewLLMEstimator(database, proj.MainRepoPath(), proj.Name)`\n2. Call batch estimation before planning:\n   `estimator.EstimateBatch(ctx, readyBeads)`\n3. Use cached estimates for planning logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:02:01.857325-05:00","created_by":"matthew","updated_at":"2026-01-10T14:31:02.629342-05:00","closed_at":"2026-01-10T14:31:02.629342-05:00","close_reason":"Updated plan command to use batch estimation","dependencies":[{"issue_id":"ac-vry","depends_on_id":"ac-3ei","type":"blocks","created_at":"2026-01-10T14:02:29.127596-05:00","created_by":"matthew"}]}
{"id":"ac-vvl","title":"Implement embedded schema and migration system","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-10T16:59:08.646046-05:00","created_by":"matthew","updated_at":"2026-01-10T17:08:47.040618-05:00","closed_at":"2026-01-10T17:08:47.040618-05:00","close_reason":"Implemented embedded schema and migration system with up/down support, migration tracking table, and sqlc integration following the pattern from mj/server"}
{"id":"ac-vypi","title":"the issues tab in plan mode doesn't handle issues already assigned to work","description":"Its not possible right now to see whether an issue is assigned to a work.","status":"open","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T19:53:34.781852-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T19:54:14.341201-05:00"}
{"id":"ac-vyyn","title":"Fix unused ctx parameter in createTasksFromWorkBeads","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T18:53:31.000229-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T18:58:29.898893-05:00","closed_at":"2026-01-13T18:58:29.898893-05:00","close_reason":"Fixed unused ctx parameter - changed from interface{} to context.Context and used it properly in createTasksFromWorkBeads"}
{"id":"ac-w14","title":"Update internal/claude/runner.go for DB polling","description":"Update internal/claude/runner.go:\n- Remove os and path/filepath imports\n- Remove completionFile creation (lines 42-44)\n- Remove file instruction append (line 47)\n- Add import for internal/db\n- Update Run() to accept or return zellij session/pane names\n- Record session/pane in DB via db.StartBead() or update existing record\n- Change prompt to append 'co complete \u003cid\u003e' instruction\n- Change polling loop to poll db.IsCompleted(beadID) instead of file stat\n- Consider: expose session name constant or make configurable","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:57.554085-05:00","created_by":"matthew","updated_at":"2026-01-10T09:47:09.349291-05:00","closed_at":"2026-01-10T09:47:09.349291-05:00","close_reason":"Updated cmd/run.go with DB integration (Open, StartBead, FailBead), updated runner.go to poll DB for completion","dependencies":[{"issue_id":"ac-w14","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.727958-05:00","created_by":"matthew"},{"issue_id":"ac-w14","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:23.688381-05:00","created_by":"matthew"}]}
{"id":"ac-was","title":"work pr command should auto-run the created PR task","description":"The work pr command creates a PR task but requires manual 'co run' invocation. It should automatically run the task after creating it. See cmd/work.go:417-423","status":"closed","priority":2,"issue_type":"bug","owner":"matthew@customer.io","created_at":"2026-01-11T18:11:11.688413-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T18:15:00.884907-05:00","closed_at":"2026-01-11T18:15:00.884907-05:00","close_reason":"Added auto-run of PR task after creation by calling processTask","dependencies":[{"issue_id":"ac-was","depends_on_id":"ac-pij","type":"parent-child","created_at":"2026-01-11T18:12:14.347136-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-wftt","title":"Simplify StartTask function signature","description":"Remove zellijSession and zellijPane parameters from StartTask in internal/db/task.go","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T10:01:18.58027-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T10:26:12.13205-05:00","closed_at":"2026-01-14T10:26:12.13205-05:00","close_reason":"Removed zellijSession and zellijPane parameters from StartTask function","dependencies":[{"issue_id":"ac-wftt","depends_on_id":"ac-bj0e","type":"parent-child","created_at":"2026-01-14T10:01:33.302791-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-wftt","depends_on_id":"ac-8t3g","type":"blocks","created_at":"2026-01-14T10:01:39.8834-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-wyk","title":"Remove workflow_state table and code","description":"Delete internal/db/workflow_state.go. Delete or mark down migration 008_workflow_state.sql. Remove workflow state queries from sql/queries/. Run sqlc-generate to update generated code.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-12T17:28:13.720255-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-12T17:58:04.008189-05:00","closed_at":"2026-01-12T17:58:04.008189-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ac-wyk","depends_on_id":"ac-956","type":"parent-child","created_at":"2026-01-12T17:29:21.233954-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-wyk","depends_on_id":"ac-350","type":"blocks","created_at":"2026-01-12T17:29:37.657435-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-x522","title":"Add worker name column to database","description":"Create database migration to add 'name' column to works table for human-readable worker names (Alice, Bob, etc.)","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:34.655384-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:08:53.939246-05:00","closed_at":"2026-01-14T11:08:53.939246-05:00","close_reason":"Added name column to works table via migration 015, updated schema.sql, SQL queries, and all callers of CreateWork","dependencies":[{"issue_id":"ac-x522","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:13.769693-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-x6j","title":"Refactor database opening for projects","description":"\tproj, err := project.Find(flagCompleteProject)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"not in a project directory: %w\", err)\n\t}\n\n\tdatabase, err := proj.OpenDB()\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to open database: %w\", err)\n\t}\n\tdefer proj.Close()\n\nThis pattern is inefficient. Project.Find should open the database, and then add proj.DB to get the already opened database.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T10:18:24.400165-05:00","created_by":"matthew","updated_at":"2026-01-11T19:33:54.09555-05:00","closed_at":"2026-01-11T17:04:04.785091-05:00"}
{"id":"ac-x7ag","title":"Fix incorrect comment in AddBeadsToWork about groupID=0","description":"In cmd/work.go:455, the comment says 'each as its own group with groupID=0' but groupID=0 means all beads will be in the same group (group 0), not individual groups.\n\nEither:\n1. Fix the comment to accurately describe the behavior (all beads added to group 0)\n2. Or change the implementation to assign each bead its own unique group ID","status":"open","priority":4,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:23:22.694916-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T20:23:22.694916-05:00"}
{"id":"ac-xg7k","title":"Add selectedBeads map to planModel struct","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T20:37:11.693043-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T21:05:40.58129-05:00","closed_at":"2026-01-14T21:05:40.58129-05:00","close_reason":"selectedBeads map[string]bool already exists in planModel struct at tui_plan.go:77 and is initialized in newPlanModel at line 127"}
{"id":"ac-xom2","title":"the workflow for creating a work isn't quite right.","description":"I want to be able to create workflow with a set of beads so I can automatically generate hte branch name.","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-13T14:13:59.92408-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T14:17:47.112283-05:00","closed_at":"2026-01-13T14:17:47.112283-05:00","close_reason":"Added ability to create work with auto-generated branch name from selected beads. In TUI: press 'c', select beads with Space, then press 'b' to use them. In CLI: use --bead flag without --auto to create work with auto-generated branch (--auto runs full automation)."}
{"id":"ac-xpwi","title":"Implement responsive layout for terminal sizes","description":"Handle terminal resize events. Adjust panel widths proportionally. Hide panels gracefully on very small terminals. Ensure text truncation for long content.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T13:32:34.479016-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T20:05:29.740276-05:00","closed_at":"2026-01-13T20:05:29.740276-05:00","close_reason":"TUI management interface implemented in PR #69","dependencies":[{"issue_id":"ac-xpwi","depends_on_id":"ac-mbc","type":"parent-child","created_at":"2026-01-13T13:32:44.036349-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-xpwi","depends_on_id":"ac-9vp","type":"blocks","created_at":"2026-01-13T13:33:04.995563-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-yar","title":"Add co estimate command","description":"Add new `co estimate` command for Claude to report complexity estimates.\n\n**New file:** `cmd/estimate.go`\n\n**Command signature:**\n```\nco estimate \u003cbead-id\u003e --score \u003c1-10\u003e --tokens \u003cn\u003e\n```\n\n**Behavior:**\n1. Get bead from beads DB to compute description hash\n2. Store estimate in complexity_cache table\n3. Mark bead complete in task_beads table\n4. If all beads in task have estimates, auto-complete the task\n5. Print confirmation message","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:01:57.816712-05:00","created_by":"matthew","updated_at":"2026-01-10T14:21:12.486746-05:00","closed_at":"2026-01-10T14:21:12.486746-05:00","close_reason":"Added co estimate command for complexity reporting","dependencies":[{"issue_id":"ac-yar","depends_on_id":"ac-d5o","type":"blocks","created_at":"2026-01-10T14:02:28.556897-05:00","created_by":"matthew"},{"issue_id":"ac-yar","depends_on_id":"ac-2u6","type":"blocks","created_at":"2026-01-10T14:02:28.67766-05:00","created_by":"matthew"}]}
{"id":"ac-ykn2","title":"Implement root model with mode switching","description":"Refactor cmd/tui.go to use rootModel with: activeMode (Plan/Work/Monitor), P/W/M key switching, tab bar rendering [P] Plan [W] Work [M] Monitor, message routing to active sub-model","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-14T11:01:39.046381-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-14T11:19:30.687642-05:00","closed_at":"2026-01-14T11:19:30.687642-05:00","close_reason":"Created tui_root.go with rootModel that manages mode switching via P/W/M keys, renders tab bar, and routes messages to legacy model. Updated runTUI to use new root model.","dependencies":[{"issue_id":"ac-ykn2","depends_on_id":"ac-nehx","type":"parent-child","created_at":"2026-01-14T11:02:15.785807-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ykn2","depends_on_id":"ac-9ame","type":"blocks","created_at":"2026-01-14T11:02:29.776835-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ykn2","depends_on_id":"ac-c1ay","type":"blocks","created_at":"2026-01-14T11:02:29.922713-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-ymr","title":"Database schema: Add works table and update relationships","description":"Create migration 002_add_works.sql with works table, update tasks table to add work_id, create work_tasks junction table. Update reference schema in internal/db/schema.sql.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T18:17:30.575155-05:00","created_by":"matthew","updated_at":"2026-01-10T18:25:08.098687-05:00","closed_at":"2026-01-10T18:25:08.098687-05:00","close_reason":"Implemented: Created migration 002_add_works.sql with works table, updated tasks table to add work_id, created work_tasks junction table. Updated reference schema."}
{"id":"ac-ys9","title":"Add transitive dependency collection to beads client","description":"Add GetTransitiveDependencies() function to internal/beads/client.go that collects all beads that depend on a given bead, returning them in topologically sorted order.","status":"closed","priority":2,"issue_type":"task","owner":"matthew.newhook@gmail.com","created_at":"2026-01-11T19:31:45.74205-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-11T21:04:20.094156-05:00","closed_at":"2026-01-11T21:03:39.319902-05:00","dependencies":[{"issue_id":"ac-ys9","depends_on_id":"ac-au3","type":"parent-child","created_at":"2026-01-11T19:32:27.538755-05:00","created_by":"Matthew Newhook"},{"issue_id":"ac-ys9","depends_on_id":"ac-qcz","type":"blocks","created_at":"2026-01-11T19:32:56.483622-05:00","created_by":"Matthew Newhook"}]}
{"id":"ac-yyo","title":"co work create --bead should support a comma delimited set of beads","status":"closed","priority":2,"issue_type":"task","owner":"matthew@customer.io","created_at":"2026-01-13T10:56:46.766122-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T11:00:57.315267-05:00","closed_at":"2026-01-13T11:00:57.315267-05:00","close_reason":"Added comma-delimited bead ID support to --bead flag: parseBeadIDs parses comma-separated IDs, generateBranchNameFromBeads handles multiple bead titles, collectBeadsForMultipleIDs deduplicates transitive dependencies across all beads"}
{"id":"ac-z6rh","title":"Check for existing beads in work_beads before adding","description":"co work create and co work add should check if beads already exist in work_beads table before adding. Currently AddWorkBeads silently skips duplicates (line 76-78 in internal/db/work_beads.go) but this should be an explicit validation with user feedback.","status":"closed","priority":2,"issue_type":"bug","owner":"matthew.newhook@gmail.com","created_at":"2026-01-13T19:04:14.746609-05:00","created_by":"Matthew Newhook","updated_at":"2026-01-13T19:11:44.928746-05:00","closed_at":"2026-01-13T19:11:44.928746-05:00","close_reason":"Fixed in feat/redo-bead-work branch"}
{"id":"ac-zqp","title":"Create cmd/list.go subcommand","description":"Create cmd/list.go implementing:\n- co list [--status \u003cfilter\u003e]\n- List all tracked beads\n- Optional status filter (pending, processing, completed, failed)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T09:34:56.900454-05:00","created_by":"matthew","updated_at":"2026-01-10T09:45:02.564939-05:00","closed_at":"2026-01-10T09:45:02.564939-05:00","close_reason":"Created cmd/complete.go, cmd/status.go, cmd/list.go subcommands","dependencies":[{"issue_id":"ac-zqp","depends_on_id":"ac-aof","type":"parent-child","created_at":"2026-01-10T09:35:13.724199-05:00","created_by":"matthew"},{"issue_id":"ac-zqp","depends_on_id":"ac-ec4","type":"blocks","created_at":"2026-01-10T09:35:22.857299-05:00","created_by":"matthew"}]}
